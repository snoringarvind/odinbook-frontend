(this["webpackJsonpreact-frontend"]=this["webpackJsonpreact-frontend"]||[]).push([[0],{128:function(e,t,s){},129:function(e,t,s){},130:function(e,t,s){},131:function(e,t,s){},132:function(e,t,s){},133:function(e,t,s){},134:function(e,t,s){},135:function(e,t,s){},136:function(e,t,s){},137:function(e,t,s){},138:function(e,t,s){},139:function(e,t,s){},140:function(e,t,s){},141:function(e,t,s){},142:function(e,t){},143:function(e,t,s){},144:function(e,t,s){},145:function(e,t,s){},146:function(e,t,s){},147:function(e,t,s){},148:function(e,t,s){},149:function(e,t,s){},150:function(e,t,s){},151:function(e,t,s){},152:function(e,t,s){"use strict";s.r(t);var a=s(0),n=s(1),c=s.n(n),r=s(66),i=s.n(r),o=(s(74),s(75),s(2)),l=s(6),d=s(3),j=(s(76),function(e){var t=e.to,s=e.label,n=Object(l.j)({path:t});n=null!=n&&!!n.isExact;var c=Object(l.h)().pathname.split("/"),r=document.querySelector("#search");return r&&"search"!==c[1]&&(r.value=""),Object(a.jsx)("div",{className:n?"active nav-links":"nav-links",children:Object(a.jsx)(d.b,{to:t,children:Object(a.jsx)("i",{className:s})})})}),u=s(12),b=s.n(u),m=s(18),O=s(30),f=s.n(O),h=(s(49),s(5)),x=s.n(h),p=s(68),v=s.n(p),g=(s(128),s(4)),N=function(e){var t=e.value,s=e.index,c=e.friendBtn,r=e.setFriendBtn,i=e.userid,l=e.isChanged,j=e.setIsChanged,u=e.path,b=Object(n.useState)(""),m=Object(o.a)(b,2),O=m[0],f=m[1],h=Object(n.useContext)(_),x=h.jwtData,p=h.myFriendsValue,v=h.axios_request,N=Object(o.a)(p,2),S=N[0],y=N[1],C=Object(n.useState)(!1),k=Object(o.a)(C,2),w=k[0],D=k[1];return Object(n.useEffect)((function(){-1!==S.findIndex((function(e){return e.username===t.username}))&&(c[s]=!0,r(c)),D(!w)}),[]),Object(a.jsxs)("div",{className:"UserFriendCard",children:[O&&Object(a.jsx)("div",{className:"error",children:O}),!O&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"profile-picture",children:Object(g.a)(t.fname[0].toLowerCase())}),Object(a.jsxs)("div",{className:"name-container",children:[Object(a.jsx)(d.b,{to:{pathname:"/user/".concat(t.username,"/posts"),state:{userid:t._id,fname:t.fname,lname:t.lname,username:t.username}},children:Object(a.jsxs)("div",{className:"name",children:[Object(a.jsxs)("span",{children:[t.fname," "]}),Object(a.jsx)("span",{children:t.lname})]})}),Object(a.jsx)("div",{className:"username",children:t.username})]}),x.sub!==t._id&&Object(a.jsxs)("div",{className:"add-btn",style:{color:"myfriends"==u||x.sub===i||c[s]?"red":"blue"},onClick:function(){c[s]=!c[s],r(c),D(!w),function(){var e="/friend/".concat(t._id);if(v({route:e,data:"",method:"POST",axios_error:function(e){f(e.message)},axios_response:function(e){}}),x.sub!=i&&"myfriends"!=u||(S.splice(s,1),y(S),j(!l)),x.sub!==i)if(0==c[s]){var a=S.findIndex((function(e){return e.username==t.username}));-1!==a&&(S.splice(a,1),y(S))}else S.push(t)}()},children:[(x.sub==i||"myfriends"===u)&&Object(a.jsx)("div",{className:"add-btn fas fa-user-minus"}),x.sub!==i&&"myfriends"!==u&&Object(a.jsx)("div",{className:c[s]?"add-btn fas fa-user-minus":"add-btn fas fa-user-plus"})]}),x.sub!==t._id&&Object(a.jsx)("div",{className:"chat-link-container",children:Object(a.jsx)(d.b,{to:{pathname:"/chat",state:{userid:t._id,fname:t.fname,lname:t.lname,username:t.username}},children:Object(a.jsx)("div",{className:"chat-btn fab fa-facebook-messenger"})})})]})]})},S=function(e){var t,s,c,r=e.path,i=Object(n.useState)(""),d=Object(o.a)(i,2),j=d[0],u=d[1],b=Object(n.useState)(!0),m=Object(o.a)(b,2),O=m[0],f=m[1],h=Object(n.useState)([]),p=Object(o.a)(h,2),v=p[0],g=p[1],S=Object(n.useState)([]),y=Object(o.a)(S,2),C=y[0],k=y[1],w=Object(n.useState)(!1),D=Object(o.a)(w,2),E=D[0],F=D[1],I=Object(n.useContext)(_),L=I.myFriendsValue,P=I.didMyFriendsMountValue,T=I.axios_request,A=Object(o.a)(P,2),M=A[0],U=A[1],V=Object(o.a)(L,2),q=V[0],R=V[1],B=Object(l.h)();if("myfriends"!==r){var G=JSON.parse(localStorage.getItem("local_history"));t=G.userid,s=G.fname,c=G.lname}var J=function(){var e;e="/friend/".concat("myfriends"==r?H.sub:t);T({route:e,data:"",method:"GET",axios_error:function(e){u(e.message),f(!1)},axios_response:function(e){if("myfriends"==r)R(e.data);else if(t==H.sub)R(e.data);else{var s=Array(e.data.length).fill(!1);k(s)}g(e.data),f(!1)}})},H=Object(n.useContext)(_).jwtData;return Object(n.useEffect)((function(){"myfriends"==r?M?(J(),U(!1)):(g(q),f(!1)):H.sub!==t?J():M?(J(),U(!1)):(g(q),f(!1))}),[B.pathname]),Object(a.jsxs)("div",{className:"myfriends"===r?"UserFriend":"UserFriend myaccount",children:[j&&Object(a.jsx)("div",{className:"error",children:j}),!j&&Object(a.jsx)("h2",{className:"title-msg",children:"My Friends."}),!j&&Object(a.jsxs)(a.Fragment,{children:[O&&Object(a.jsx)("div",{className:"loading-container",style:{zIndex:"1"},children:Object(a.jsx)("div",{className:"spinner-border loading",role:"status",children:Object(a.jsx)("span",{className:"sr-only"})})}),!O&&(0===v.length?Object(a.jsxs)("div",{className:"empty-friends",children:["myfriends"!==r&&H.sub!==t&&Object(a.jsxs)("div",{children:[Object(a.jsxs)("span",{children:[s," "]})," ",Object(a.jsxs)("span",{children:[c," "]}),Object(a.jsx)("span",{children:"has no friends on OdinBook :("})]}),("myfriends"===r||H.sub===t)&&Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{children:"You don't have any friends to show."}),Object(a.jsx)("div",{children:"You can add them by searching their name :)"}),Object(a.jsx)("div",{children:"To search with username, please prefix with '@' :)"})]})]}):Object(a.jsx)(a.Fragment,{children:v.map((function(e,s){return Object(a.jsx)(N,{value:e,index:s,setError:u,friendBtn:C,setFriendBtn:k,userid:t,isChanged:E,setIsChanged:F,path:r},x()())}))}))]})]})},_=Object(n.createContext)(),y=function(e){var t=e.children,s=Object(n.useState)(!1),c=Object(o.a)(s,2),r=c[0],i=c[1],l=Object(n.useState)({search:""}),d=Object(o.a)(l,2),j=d[0],u=d[1],O=Object(n.useState)([]),h=Object(o.a)(O,2),p=h[0],g=h[1],N=Object(n.useState)(!0),S=Object(o.a)(N,2),y=S[0],C=S[1],k=Object(n.useState)({}),w=Object(o.a)(k,2),D=w[0],E=w[1],F=Object(n.useState)(!0),I=Object(o.a)(F,2),L=I[0],P=I[1],T=Object(n.useState)([]),A=Object(o.a)(T,2),M=A[0],U=A[1],V=Object(n.useState)(!0),q=Object(o.a)(V,2),R=q[0],B=q[1],G=Object(n.useState)([]),J=Object(o.a)(G,2),H=J[0],W=J[1],z=Object(n.useState)(!0),Y=Object(o.a)(z,2),K=Y[0],Q=Y[1],X=Object(n.useState)([]),Z=Object(o.a)(X,2),$=Z[0],ee=Z[1],te=Object(n.useState)([]),se=Object(o.a)(te,2),ae=se[0],ne=se[1],ce=Object(n.useState)(!0),re=Object(o.a)(ce,2),ie=re[0],oe=re[1],le=Object(n.useState)(!0),de=Object(o.a)(le,2),je=de[0],ue=de[1],be=Object(n.useState)(!1),me=Object(o.a)(be,2),Oe=me[0],fe=me[1],he=Object(n.useState)(""),xe=Object(o.a)(he,2),pe=xe[0],ve=xe[1],ge=Object(n.useState)(JSON.parse(localStorage.getItem("jwtData"))),Ne=Object(o.a)(ge,2),Se=Ne[0],_e=Ne[1],ye="https://odinbook12.herokuapp.com/odinbook",Ce=function(){var e=Object(m.a)(b.a.mark((function e(t){var s,a,n,c,r,i,o,l;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=t.route,a=t.data,n=t.method,c=t.axios_error,r=t.axios_response,null===Se&&"/login"!==s&&"/signup"!==s){e.next=19;break}return e.prev=2,"/login"!==s&&"/signup"!==s&&(i=Se.token,o={authorization:"Bearer ".concat(i)}),e.next=6,f()({url:"".concat(ye).concat(s),method:n,headers:o||"",data:a});case 6:l=e.sent,"/login"!==s&&"/signup"!==s||(localStorage.setItem("jwtData",JSON.stringify(l.data.jwtData)),_e(l.data.jwtData)),fe(!0),console.log("Utils Response=",l),r(l),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(2),e.t0.response?(console.log("Utils Error",e.t0.response.data),403===e.t0.response.status&&fe(!1)):console.log("Utils Error",e.t0.message),c(e.t0);case 17:e.next=21;break;case 19:console.log("Utils Error= NO JWT TOKEN"),fe(!1);case 21:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t){return e.apply(this,arguments)}}(),ke=Object(n.useState)(""),we=Object(o.a)(ke,2),De=we[0],Ee=we[1],Fe=function(){var e=Object(m.a)(b.a.mark((function e(){var t,s,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/isUserAuth","GET",e.prev=2,s=Se.token,t={authorization:"Bearer ".concat(s)},e.next=7,f()({url:"".concat(ye).concat("/isUserAuth"),method:"GET",data:s,headers:t});case 7:a=e.sent,console.log("response from context login",a),fe(!0),ue(!1),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(2),console.log("error from context login",e.t0),ue(!1),e.t0.response&&(403===e.t0.response.status?fe(!1):ve(e.t0.response.data));case 18:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){if(Oe){var e=v()("https://odinbook12.herokuapp.com",{withCredentials:!0});Ee(e),Se&&e.emit("join",Se.user)}Oe?ue(!1):Fe()}),[Oe]);return Object(a.jsxs)(_.Provider,{value:{searchValue:[r,i],searchBarStateValue:[j,u],jwtData:Se,myFriendsValue:[p,g],didMyFriendsMountValue:[y,C],myAboutValue:[D,E],myPostsValue:[M,U],didMyPostsMountValue:[R,B],myNewsFeedValue:[H,W],didMyNewsFeedMountValue:[K,Q],didMyAboutMountValue:[L,P],isAuthValue:[Oe,fe],socket:De,axios_request:Ce,myChatListValue:[$,ee],isReadValue:[ae,ne],didMyChatListMountValue:[ie,oe]},children:[!pe&&Object(a.jsx)(a.Fragment,{children:je?Object(a.jsx)("div",{className:"loading-container",children:Object(a.jsx)("div",{className:"spinner-border loading",role:"status",children:Object(a.jsx)("span",{className:"sr-only"})})}):t}),pe&&function(){var e=[];if(Array.isArray(pe))for(var t=0;t<pe.length;t++)e.push(Object(a.jsx)("li",{children:pe[t].msg},x()()));else e.push(Object(a.jsx)("li",{children:pe.msg},x()()));return Object(a.jsx)("ul",{className:"errors",children:e})}()]})},C=(s(129),function(){var e=Object(n.useContext)(_).axios_request,t=Object(n.useState)(!1),s=Object(o.a)(t,2),c=s[0],r=s[1],i=Object(n.useRef)(),d=Object(n.useRef)(),j=Object(n.useState)([]),u=Object(o.a)(j,2),O=u[0],f=u[1],h=Object(n.useState)(""),p=Object(o.a)(h,2),v=p[0],g=p[1],N=Object(n.useState)(!1),S=Object(o.a)(N,2),y=S[0],C=S[1],k=function(){var t=Object(m.a)(b.a.mark((function t(){var s,a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:C(!0),s=function(e){e.response?f(e.response.data):g(e.message),C(!1)},a=function(e){C(!1)},e({route:"/login",data:{username:i.current.value,password:d.current.value},method:"POST",axios_error:s,axios_response:a});case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(a.jsxs)("div",{className:"Login",children:[v&&Object(a.jsx)("div",{className:"error",children:v}),!v&&Object(a.jsxs)("form",{autoComplete:"off",children:[Object(a.jsx)("div",{className:"head",children:" Login"}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"username",children:"Username:"}),Object(a.jsx)("input",{type:"text",name:"username",id:"username",placeholder:"Enter your username",ref:i})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"password",children:"Password:"}),Object(a.jsx)("input",{type:"password",name:"password",id:"password",placeholder:"Enter your password",ref:d})]}),function(){var e=[];if(Array.isArray(O))for(var t=0;t<O.length;t++)e.push(Object(a.jsx)("li",{children:O[t].msg},x()()));else e.push(Object(a.jsx)("li",{children:O.msg},x()()));return Object(a.jsx)("ul",{className:"errors",children:e})}(),Object(a.jsxs)("div",{className:"buttons",children:[Object(a.jsx)("div",{className:"login-btn",children:Object(a.jsx)("button",{onClick:function(e){if(e.preventDefault(),!y)return k()},children:y?"Logging-in":"Log-in"})}),Object(a.jsx)("div",{className:"signup-btn",onClick:function(e){e.preventDefault(),r(!0)},children:Object(a.jsx)("button",{children:"Sign-up"})})]}),c&&Object(a.jsx)(l.a,{to:"/signup"})]})]})}),k=function(){var e=Object(n.useContext)(_).isAuthValue,t=Object(o.a)(e,2),s=t[0],c=t[1];return Object(n.useEffect)((function(){c(!1)}),[s]),Object(a.jsxs)("div",{className:"Logout",children:[localStorage.clear(),window.location.reload()]})},w=(s(130),function(){var e=Object(n.useContext)(_).axios_request,t=Object(n.useState)(!1),s=Object(o.a)(t,2),c=s[0],r=s[1],i=Object(n.useState)(""),d=Object(o.a)(i,2),j=d[0],u=d[1],b=Object(n.useState)([]),m=Object(o.a)(b,2),O=m[0],f=m[1],h=Object(n.useState)(!1),p=Object(o.a)(h,2),v=p[0],g=p[1],N=Object(n.useRef)(),S=Object(n.useRef)(),y=Object(n.useRef)(),C=Object(n.useRef)();return Object(a.jsxs)("div",{className:"Signup",children:[j&&Object(a.jsx)("div",{className:"error",children:j}),!j&&Object(a.jsxs)("form",{autoComplete:"off",children:[Object(a.jsx)("div",{className:"head",children:"Signup"}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"fname",children:"First Name:"}),Object(a.jsx)("input",{type:"text",name:"fname",id:"fname",placeholder:"Enter your First Name",ref:N})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"lname",children:"Last Name:"}),Object(a.jsx)("input",{type:"text",name:"lname",id:"lname",placeholder:"Enter your Last Name",ref:S})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"username",children:"Username:"}),Object(a.jsx)("input",{type:"text",name:"username",id:"username",placeholder:"Enter your username",ref:y})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"password",children:"Password:"}),Object(a.jsx)("input",{type:"password",name:"password",id:"password",placeholder:"Enter your password",ref:C})]}),function(){var e=[];if(Array.isArray(O))for(var t=0;t<O.length;t++)e.push(Object(a.jsx)("li",{children:O[t].msg},x()()));else e.push(Object(a.jsx)("li",{children:O.msg},x()()));return Object(a.jsx)("ul",{className:"errors",children:e})}(),Object(a.jsxs)("div",{className:"buttons",children:[Object(a.jsx)("div",{className:"signup-btn",children:Object(a.jsx)("button",{onClick:function(t){return t.preventDefault(),v?void 0:(g(!0),void e({route:"/signup",data:{fname:N.current.value,lname:S.current.value,username:y.current.value,password:C.current.value},method:"POST",axios_error:function(e){e.response?f(e.response.data):u(e.message),g(!1)},axios_response:function(e){g(!1),f([]),u("")}}))},children:v?"signing-in":"Sign-up"})}),Object(a.jsx)("div",{className:"login-btn",onClick:function(e){e.preventDefault(),r(!0)},children:Object(a.jsx)("button",{children:"Login"})})]}),c&&Object(a.jsx)(l.a,{to:"/login"})]})]})}),D=(s(131),s(132),function(){var e=Object(n.useContext)(_).searchValue,t=Object(o.a)(e,2),s=(t[0],t[1]),c=Object(l.g)(),r=Object(n.useRef)();return Object(a.jsx)("div",{className:"SearchBar",children:Object(a.jsx)("form",{onSubmit:function(e){return e.preventDefault(),s(!0),""===r.current.value?void 0:c.push("/search/".concat(r.current.value))},autoComplete:"off",children:Object(a.jsx)("input",{type:"text",id:"search",name:"search",ref:r,placeholder:"Search Odinbook"})})})}),E=(s(133),function(e){var t=e.value,s=e.index,c=(e.result,e.friendBtn),r=e.setFriendBtn,i=(e.arrg,Object(n.useContext)(_)),l=i.jwtData,j=i.myFriendsValue,u=i.axios_request,b=Object(o.a)(j,2),m=b[0],O=b[1],f=Object(n.useState)(null),h=Object(o.a)(f,2),x=(h[0],h[1],Object(n.useState)("")),p=Object(o.a)(x,2),v=p[0],N=p[1],S=Object(n.useState)(!1),y=Object(o.a)(S,2),C=y[0],k=y[1];Object(n.useEffect)((function(){-1!==m.findIndex((function(e){return e.username===t.username}))&&(c[s]=!0,r(c)),k(!C)}),[]);var w=document.querySelector("#search");return Object(a.jsxs)("div",{className:"SearchResultCard",children:[v&&Object(a.jsx)("div",{className:"error",children:v}),!v&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"profile-picture",children:Object(g.a)(t.fname[0].toLowerCase())}),Object(a.jsxs)("div",{className:"name-container",onClick:function(e){e.stopPropagation(),e.preventDefault(),w.value=""},children:[Object(a.jsx)(d.b,{to:{pathname:"/user/".concat(t.username,"/posts"),state:{userid:t._id,fname:t.fname,lname:t.lname,username:t.username}},children:Object(a.jsxs)("div",{className:"name",children:[Object(a.jsxs)("span",{children:[t.fname," "]}),Object(a.jsx)("span",{children:t.lname})]})}),Object(a.jsx)("div",{className:"username",children:t.username})]}),t._id!==l.sub&&Object(a.jsx)("div",{className:c[s]?"add-btn fas fa-user-minus":"add-btn fas fa-user-plus",style:{color:c[s]?"red":"blue"},onClick:function(e){e.preventDefault(),e.stopPropagation(),c[s]=!c[s],r(c),k(!C),function(){var e="/friend/".concat(t._id);if(u({route:e,data:"",method:"POST",axios_error:function(e){N(e.message)},axios_response:function(e){}}),!1===c[s]){var a=m.findIndex((function(e){return e.username===t.username}));-1!==a&&(m.splice(a,1),O(m))}else m.push(t)}()}}),t._id!==l.sub&&Object(a.jsx)("div",{className:"chat-link-container",children:Object(a.jsx)(d.b,{to:{pathname:"/chat",state:{userid:t._id,fname:t.fname,lname:t.lname,username:t.username}},children:Object(a.jsx)("div",{className:"chat-btn fab fa-facebook-messenger"})})})]})]})}),F=function(){var e=Object(n.useContext)(_),t=e.searchValue,s=e.axios_request,c=Object(o.a)(t,2),r=c[0],i=c[1],d=Object(n.useState)([]),j=Object(o.a)(d,2),u=j[0],b=j[1],m=Object(l.i)(),O=Object(n.useState)(""),f=Object(o.a)(O,2),h=f[0],p=f[1],v=Object(n.useState)(!0),g=Object(o.a)(v,2),N=g[0],S=g[1],y=Object(n.useState)([]),C=Object(o.a)(y,2),k=C[0],w=C[1],D=function(){var e="/user/search/".concat(m.name);s({route:e,data:"",method:"GET",axios_error:function(e){p(e.message),S(!1)},axios_response:function(e){S(!1),Array.isArray(e.data)?w(e.data):w([e.data]);var t=Array(e.data.length).fill(!1);b(t)}})};Object(n.useEffect)((function(){!0===r&&(D(),i(!1))}),[r]),Object(n.useEffect)((function(){r||m&&(document.querySelector("#search").value=m.name,D())}),[]);var F=[];return Object(a.jsxs)("div",{className:"SearchResult",children:[h&&Object(a.jsx)("div",{className:"error",children:h}),!h&&Object(a.jsxs)(a.Fragment,{children:[N&&"loading...",!N&&(0==k.length?Object(a.jsx)("div",{className:"empty",children:"No users found with this query :("}):k.map((function(e,t){return Object(a.jsx)(E,{value:e,index:t,setResult:w,result:k,friendBtn:u,setFriendBtn:b,arrg:F},x()())})))]})]})},I=(s(134),function(e){var t=e.to,s=e.fname,n=e.lname,c=e.userid,r=e.username,i=e.label,o=Object(l.j)({path:t});return o&&(o=o.isExact),Object(a.jsx)("div",{className:o?"active nav-links":"nav-links",children:Object(a.jsx)(d.b,{to:{pathname:t,state:{fname:s,lname:n,userid:c,username:r}},children:i})})}),L=s(22),P=s(26),T=function(e){var t=e.objkey,s=e.index,c=e.clickIndex,r=e.setClickIndex,i=(e.result,e.setResult,e.ee),l=e.setee,d=e.jwtData,j=e.userid,u=Object(n.useContext)(_),b=u.myAboutValue,m=u.axios_request,O=Object(o.a)(b,2),f=O[0],h=O[1],x=Object(n.useState)(""),p=Object(o.a)(x,2),v=p[0],N=p[1],S=Object(n.useState)(!1),y=Object(o.a)(S,2),C=y[0],k=y[1],w=Object(n.useState)(!1),D=Object(o.a)(w,2),E=D[0],F=D[1],I=Object(n.useState)(Object(P.a)({},t,i[t])),T=Object(o.a)(I,2),A=T[0],M=T[1],U={bio:"Bio",nickName:"Nick-name",school:"School",college:"College",working:"Work Place",relationshipStatus:"Relationhsip Status",book:"Book",food:"Food",gender:"Gender",dob:"Date of birth",email:"Email",phone:"Phone"},V=function(e){e.preventDefault();var s=document.getElementById(t),a=e.target,n=a.name,c=a.value;if("INPUT"==s.tagName){var r=s.id,i=Object(g.a)(c);if("food"!==r&&"book"!==r){if(i.length>=30)return void k(!0);k(!1)}else if("food"==r||"book"==r){if(i.length>=50)return void k(!0);k(!1)}}M(Object(L.a)(Object(L.a)({},A),{},Object(P.a)({},n,c)))};return Object(n.useEffect)((function(){if(c==s){var e=document.getElementById(t);e.focus(),e.style.border="1px solid blue",e.style.boxShadow="0.3px 0.3px 5px blue",e.style.outline="none",document.getElementById("save-icon-".concat(s)).style.color="blue"}}),[]),Object(a.jsxs)("div",{className:"UserAboutCard",children:[v&&Object(a.jsx)("div",{className:"error",children:v}),!v&&Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("form",{autoComplete:"off",onSubmit:function(e){e.preventDefault()},children:Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:t,children:U[t]}),Object(a.jsxs)("div",{className:"container",children:[c!=s&&Object(a.jsx)("div",{className:"profile-values",children:i[t]||"No ".concat(U[t]," added")}),c==s&&"relationshipStatus"!==t&&"gender"!==t&&"dob"!==t&&"bio"!==t&&Object(a.jsx)("input",{name:t,id:t,value:A[t],onChange:V,maxLength:"food"==t||"book"==t?"50":"30"}),1==C&&Object(a.jsx)("div",{className:"input-tooltip",children:Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("span",{children:"No more than "}),"food"==t||"book"==t?"50":"30",Object(a.jsx)("span",{children:" characters :)"})," "]})}),c==s&&"bio"==t&&Object(a.jsx)("div",{className:"bio-container",children:Object(a.jsx)("textarea",{name:"bio",id:"bio",value:A[t],onChange:V})}),c==s&&"dob"==t&&Object(a.jsx)("input",{type:"date",name:"dob",id:"dob",selected:A[t]?null:"",start:!0}),c==s&&"relationshipStatus"==t&&Object(a.jsxs)("select",{id:"relationshipStatus",name:"relationshipStatus",onChange:V,defaultValue:i[t],children:[Object(a.jsx)("option",{value:"Status",children:"Status"}),Object(a.jsx)("option",{value:"Married",children:"Married"}),Object(a.jsx)("option",{value:"Single",children:"Single"}),Object(a.jsx)("option",{value:"Divorced",children:"Divorced"}),Object(a.jsx)("option",{value:"It's complicated",children:"It's complicated"}),Object(a.jsx)("option",{value:"In a relationship",children:"In relationship"}),Object(a.jsx)("option",{value:"Open Relationship",children:"Open Relationship"}),Object(a.jsx)("option",{value:"Engaged",children:"Engaged"}),Object(a.jsx)("option",{value:"Widowed",children:"Widowed"})]}),c==s&&"gender"===t&&Object(a.jsxs)("select",{id:"gender",name:"gender",onChange:V,defaultValue:i[t],children:[Object(a.jsx)("option",{value:"Male",children:"Male"}),Object(a.jsx)("option",{value:"Female",children:"Female"}),Object(a.jsx)("option",{value:"Transgender",children:"Transgender"}),Object(a.jsx)("option",{value:"Gender Neutral",children:" Gender Neutral"}),Object(a.jsx)("option",{value:"Non Binary",children:"Non Binary"})]})]}),j===d.sub&&c!==s&&Object(a.jsx)("div",{className:"edit-icon fas fa-edit",onClick:function(e){e.preventDefault(),e.stopPropagation(),r(s)}}),d.sub===j&&c==s&&Object(a.jsx)("div",{id:"save-icon-".concat(s),className:"save-icon fas fa-save",onClick:function(e){e.preventDefault(),e.stopPropagation(),""==A.fname||""==A.lname?F(!0):(r(null),i[t]=A[t],l(i),f[t]=A[t],h(f),function(e){e.preventDefault(),""!==A.fname&&""!==A.lname&&m({route:"/myprofile",data:A,method:"PUT",axios_error:function(e){N(e.message)},axios_response:function(e){}})}(e),F(!1))}}),E&&Object(a.jsx)("div",{className:"empty_name",children:""==A.fname?"First name cannot be empty":"Last name cannot be empty"})]})})})]})},A=(s(135),function(){var e,t=Object(n.useContext)(_),s=t.myAboutValue,c=t.didMyAboutMountValue,r=t.axios_request,i=t.jwtData,d=Object(o.a)(s,2),j=d[0],u=d[1],b=Object(o.a)(c,2),m=b[0],O=b[1],f=Object(n.useState)(),h=Object(o.a)(f,2),p=h[0],v=h[1],g=Object(n.useState)(!0),N=Object(o.a)(g,2),S=N[0],y=N[1],C=Object(n.useState)(""),k=Object(o.a)(C,2),w=k[0],D=k[1],E=Object(l.h)(),F=JSON.parse(localStorage.getItem("local_history")).userid,I=Object(n.useState)(null),L=Object(o.a)(I,2),P=L[0],A=L[1],M=function(){var e="/profile/".concat(F);r({route:e,data:"",method:"GET",axios_error:function(e){D(e.message),y(!1)},axios_response:function(e){F===i.sub&&u(e.data),v(e.data),y(!1)}})};Object(n.useEffect)((function(){i.sub!==F?M():m?(M(),O(!1)):(v(j),y(!1))}),[E.pathname]),p&&(delete p.user,delete p._id,delete p.__v,e=Object.keys(p));var U=Object(n.useState)(null),V=Object(o.a)(U,2),q=V[0],R=V[1],B=Object(n.useState)({}),G=Object(o.a)(B,2),J=G[0],H=G[1];return Object(n.useEffect)((function(){if(p)for(var t={},s=0;s<e.length;s++)t[e[s]]=p[e[s]],s===e.length-1&&H(t)}),[p]),Object(n.useEffect)((function(){window.addEventListener("keydown",(function(e){"Escape"==e.key&&A(null)}))}),[]),Object(a.jsxs)("div",{className:"UserAbout",children:[w&&Object(a.jsx)("div",{className:"error",children:w}),!w&&Object(a.jsxs)(a.Fragment,{children:[S&&Object(a.jsx)("div",{className:"loading-container",style:{zIndex:"1"},children:Object(a.jsx)("div",{className:"spinner-border loading",role:"status",children:Object(a.jsx)("span",{className:"sr-only"})})}),!S&&e.map((function(e,t){return Object(a.jsx)(T,{objkey:e,index:t,clickIndex:P,setClickIndex:A,result:p,setResult:v,ee:J,setee:H,tooltip:q,setTooltip:R,userid:F,jwtData:i},x()())}))]})]})}),M=(s(136),function(e){var t=e.route,s=e.update_value,c=e.method,r=e.formTitle,i=e.user_post_response,l=(e.createClick,e.setCreateClick),d=(e.updateClick,e.setUpdateClick,Object(n.useContext)(_).axios_request),j=Object(n.useState)(""),u=Object(o.a)(j,2),b=u[0],m=u[1],O=Object(n.useState)([]),f=Object(o.a)(O,2),h=f[0],p=f[1],v=Object(n.useState)(!1),g=Object(o.a)(v,2),N=g[0],S=g[1],y=Object(n.useRef)(),C=Object(n.useRef)();Object(n.useEffect)((function(){y.current.value=s?s.title:"",C.current.value=s?s.content_text:""}),[]);return Object(a.jsxs)("div",{className:"MyPostForm",children:[b&&Object(a.jsxs)("div",{className:"error",children:[Object(a.jsxs)("div",{children:[b," "]}),Object(a.jsx)("div",{children:"Please try refreshing the page"})]}),!b&&Object(a.jsxs)("div",{className:"form-container",children:[Object(a.jsxs)("div",{className:"form-head",children:[Object(a.jsx)("div",{className:"form-title",children:r}),Object(a.jsx)("div",{className:"form-close-btn fas fa-times-circle",onClick:function(e){e.preventDefault(),l(!1)}})]}),Object(a.jsxs)("form",{autoComplete:"off",children:[Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"title",children:"Title"}),Object(a.jsx)("input",{id:"title",type:"text",placeholder:"Enter your post title",name:"title",ref:y})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"content_text",children:"Text"}),Object(a.jsx)("textarea",{type:"text",id:"content_text",name:"content_text",placeholder:"Add text",ref:C})]}),function(){var e=[];if(Array.isArray(h))for(var t=0;t<h.length;t++)e.push(Object(a.jsx)("li",{children:h[t].msg},x()()));else e.push(Object(a.jsx)("li",{children:h.msg},x()()));return Object(a.jsx)("ul",{className:"errors",children:e})}(),Object(a.jsx)("div",{className:"submit-btn",children:Object(a.jsx)("button",{onClick:function(e){e.preventDefault(),N||(S(!0),d({route:t,data:{title:y.current.value,content_text:C.current.value},method:c,axios_error:function(e){e.response?p(e.response.data):m(e.message),S(!1)},axios_response:function(e){p([]),S(!1),i(e),l(!1)}}))},children:N?"Submitting...":"Submit"})})]})]})]})}),U=(s(137),function(e){var t=e.user_post_response,s=e.createClick,n=e.setCreateClick,c=JSON.parse(localStorage.getItem("local_history")).fname;return Object(a.jsx)("div",{className:"MyPostCreate",children:Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"show-form-container",children:[Object(a.jsx)("div",{className:"profile-picture",children:Object(g.a)(c[0].toLowerCase())}),Object(a.jsx)("div",{className:"show-form-btn",onClick:function(e){e.preventDefault(),n(!0)},children:"What's on your mind..?"})]}),s&&Object(a.jsx)(M,{route:"/myposts",method:"POST",formTitle:"Create Post",user_post_response:t,createClick:s,setCreateClick:n})]})})}),V=(s(138),function(e){var t=e.postid,s=e.updateClick,n=e.setUpdateClick,c=e.updateData,r=e.user_post_response,i="/mypost/".concat(t);return Object(a.jsx)("div",{className:"MyPostUpdate",children:s&&Object(a.jsx)(M,{route:i,update_value:c,method:"PUT",createClick:s,setCreateClick:n,formTitle:"Update Post",user_post_response:r})})}),q=(s(139),s(140),function(e){var t=e.postid,s=e.index,c=e.setComments,r=e.commentid,i=e.comments,l=e.setCommentOptionIndex,d=e.pp,j=e.setpp,u=Object(n.useContext)(_).axios_request,b="/post/".concat(t,"/comment/").concat(r),m=Object(n.useState)(!1),O=Object(o.a)(m,2),f=(O[0],O[1]),h=Object(n.useState)(""),x=Object(o.a)(h,2),p=x[0],v=x[1];return Object(n.useEffect)((function(){i[s]=i.comment_list.splice(s,1),c(i),j(!d),l(null),u({route:b,data:"",method:"DELETE",axios_error:function(e){v(e.message),f(!1)},axios_response:function(e){f(!1)}})}),[]),Object(a.jsx)("div",{className:"CommentDelete",children:p&&Object(a.jsxs)("div",{className:"error",children:[Object(a.jsx)("div",{children:p}),Object(a.jsx)("div",{children:"Please try refreshing the Page :("})]})})}),R=function(e){var t=e.comment,s=e.index,c=(e.postIndex,e.path),r=e.commentOptionIndex,i=e.setCommentOptionIndex,l=e.postid,j=e.comments,u=e.setComments,b=e.pp,m=e.setpp,O=e.setGetLoading,f=(Object(n.useContext)(_).jwtData,Object(n.useState)(!1)),h=Object(o.a)(f,2),x=h[0],p=h[1],v=JSON.parse(localStorage.getItem("local_history")).userid;return Object(a.jsxs)("div",{className:"CommentCard",children:[Object(a.jsx)("div",{className:"profile-picture",children:Object(g.a)(t.user.fname[0].toLowerCase())}),Object(a.jsxs)("div",{className:"comment-container",children:[Object(a.jsxs)("div",{className:"name",onClick:function(){O(!0)},children:[("newsfeed"==c||v!==t.user._id)&&Object(a.jsxs)(d.b,{to:{pathname:"/user/".concat(t.user.username,"/posts"),state:{fname:t.user.fname,lname:t.user.lname,username:t.user.username,userid:t.user._id}},children:[Object(a.jsxs)("span",{children:[t.user.fname," "]}),Object(a.jsx)("span",{children:t.user.lname})]}),"newsfeed"!=c&&v===t.user._id&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("span",{children:[t.user.fname," "]}),Object(a.jsx)("span",{children:t.user.lname})]})]}),Object(a.jsx)("div",{className:"comment",children:t.comment})]}),Object(a.jsxs)("div",{className:"option-icon",onClick:function(e){e.preventDefault(),e.stopPropagation(),i(r==s?null:s)},children:[Object(a.jsx)("div",{style:{backgroundColor:r==s?"lightgray":""},className:"btn fas fa-ellipsis-v"}),r===s&&Object(a.jsx)("div",{className:"comment-menu",children:Object(a.jsx)("div",{className:"comment-btn delete-comment-btn",onClick:function(e){e.stopPropagation(),e.preventDefault(),p(!x)},children:"Delete"})}),x&&Object(a.jsx)(q,{postid:l,index:s,setComments:u,comments:j,commentid:t._id,commentDeleteClick:x,setCommentDeleteClick:p,pp:b,setpp:m,setCommentOptionIndex:i})]})]})},B=(s(64),function(e){var t=e.value,s=e.index,c=e.friendBtn,r=e.setFriendBtn,i=e.myFriends,l=e.setMyFriends,j=e.setUsersLikedIndex,u=e.setGetLoading,b=e.path,m=Object(n.useState)(!1),O=Object(o.a)(m,2),f=O[0],h=O[1],x=Object(n.useContext)(_),p=x.axios_request,v=x.jwtData,N=Object(n.useState)(""),S=Object(o.a)(N,2),y=S[0],C=S[1],k=JSON.parse(localStorage.getItem("local_history")).userid;return Object(n.useEffect)((function(){-1!==i.findIndex((function(e){return e.username===t.username}))&&(c[s]=!0,r(c)),h(!f)}),[]),Object(a.jsxs)("div",{className:"UserLikesCard",children:[y&&Object(a.jsx)("div",{className:"error",children:y}),!y&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"profile-picture",children:Object(g.a)(t.fname[0].toLowerCase())}),Object(a.jsxs)("div",{className:"name",children:[(k.toString()!==t._id.toString()||"newsfeed"==b)&&Object(a.jsx)("div",{className:"clickable-link",onClick:function(){j(null),u(!0)},children:Object(a.jsxs)(d.b,{to:{pathname:"/user/".concat(t.username,"/posts"),state:{userid:t._id,fname:t.fname,lname:t.lname,username:t.username}},children:[Object(a.jsxs)("span",{children:[t.fname," "]}),Object(a.jsx)("span",{children:t.lname})]})}),"newsfeed"!==b&&k.toString()===t._id.toString()&&Object(a.jsxs)("div",{className:"unclickable-link",children:[Object(a.jsxs)("span",{children:[t.fname," "]}),Object(a.jsx)("span",{children:t.lname})]})]}),v.sub!==t._id&&Object(a.jsx)("div",{className:"add-btn-container",onClick:function(){c[s]=!c[s],r(c),h(!f),function(){var e="/friend/".concat(t._id);if(p({route:e,data:"",method:"POST",axios_error:function(e){C(e.message)},axios_response:function(e){}}),0==c[s]){var a=i.findIndex((function(e){return e.username==t.username}));-1!==a&&i.splice(a,1)}else i.push(t);l(i)}()},style:{color:c[s]?"red":"blue"},children:Object(a.jsx)("div",{className:c[s]?"add-btn fas fa-user-minus":"add-btn fas fa-user-plus"})})]})]})}),G=function(e){var t=e.postid,s=e.setUsersLikedIndex,c=e.userid,r=e.setGetLoading,i=e.path,l=Object(n.useContext)(_),d=l.axios_request,j=(l.jwtData,l.myFriendsValue),u=Object(n.useState)(""),b=Object(o.a)(u,2),m=b[0],O=b[1],f=Object(n.useState)([]),h=Object(o.a)(f,2),p=h[0],v=h[1],g=Object(o.a)(j,2),N=g[0],S=g[1],y=Object(n.useState)([]),C=Object(o.a)(y,2),k=C[0],w=C[1],D=Object(n.useState)(!0),E=Object(o.a)(D,2),F=E[0],I=E[1];return Object(n.useEffect)((function(){!function(){var e="/post/".concat(t,"/like");d({route:e,method:"GET",data:"",axios_error:function(e){O(e.message),I(!1)},axios_response:function(e){v(e.data.like),I(!1);var t=Array(e.data.like.length).fill(!1);w(t)}})}()}),[]),Object(a.jsxs)("div",{className:"UserLikes",children:[m&&Object(a.jsx)("div",{className:"error",children:m}),!m&&Object(a.jsxs)("div",{className:"box",children:[F&&Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("div",{className:"loading-container",children:Object(a.jsxs)("div",{className:"container-2",children:[Object(a.jsx)("div",{className:"loading-msg",children:"Fetching Likes :)"}),Object(a.jsx)("div",{className:"loading",children:Object(a.jsx)("div",{className:"spinner-border",role:"status",children:Object(a.jsx)("div",{className:"sr-only"})})})]})})}),!F&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:'form-close-btn fas fa-times-circle"',children:[Object(a.jsx)("div",{className:"head-msg",children:"People who liked this post."}),Object(a.jsx)("div",{className:"btn-close",children:Object(a.jsx)("button",{onClick:function(e){e.preventDefault(),e.stopPropagation(),s(null)},className:"fas fa-times-circle"})})]}),p.map((function(e,t){return Object(a.jsx)(B,{value:e,index:t,friendBtn:k,setFriendBtn:w,myFriends:N,setMyFriends:S,userid:c,setUsersLikedIndex:s,setGetLoading:r,getLikeLoading:F,path:i},x()())}))]})]})]})},J=(s(141),function(e){var t=e.setComments,s=e.postIndex,c=e.route,r=e.method,i=(e.updateValue,e.comments),l=e.pp,d=e.setpp,j=Object(n.useContext)(_),u=j.jwtData,b=j.axios_request,m=Object(n.useRef)(),O=Object(n.useState)([]),f=Object(o.a)(O,2),h=f[0],p=f[1],v=Object(n.useState)(""),g=Object(o.a)(v,2),N=g[0],S=g[1];return Object(a.jsxs)("div",{className:"CommentForm",children:[N&&Object(a.jsx)("div",{className:"error",children:N}),!N&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"profile-picture",children:[u.fname[0].toLowerCase()]}),Object(a.jsx)("form",{onSubmit:function(e){e.preventDefault(),""!=m.current.value&&function(){var e;if(e=document.querySelector("#post-".concat(s)),i.comment_list.push({comment:m.current.value,user:{fname:u.fname,lname:u.lname,username:u.user,_id:u.sub}}),e){var a=e.querySelector("#post-".concat(s," .empty"));a&&(a.style.display="none")}b({route:c,data:{comment:m.current.value},method:r,axios_error:function(e){e.response?p(e.response.data):S(e.message)},axios_response:function(e){p([])}}),m.current.value="",t(i),d(!l)}()},autoComplete:"off",children:Object(a.jsx)("input",{type:"text",name:"comment",id:"comment",placeholder:"Write a comment...",ref:m})}),function(){var e=[];if(Array.isArray(h))for(var t=0;t<h.length;t++)e.push(Object(a.jsx)("li",{children:h[t].msg},x()()));else e.push(Object(a.jsx)("li",{children:h.msg},x()()));return Object(a.jsx)("ul",{className:"errors",children:e})}()]})]})}),H=function(e){var t=e.postid,s=e.setComments,n=e.postIndex,c=e.comments,r=e.pp,i=e.setpp,o="/post/".concat(t,"/comment");return Object(a.jsx)("div",{className:"CommentCreate",children:Object(a.jsx)(J,{setComments:s,postIndex:n,route:o,method:"POST",comments:c,pp:r,setpp:i})})},W=(s(142),function(e){var t,s,c=e.value,r=e.index,i=e.setPostid,j=e.setUpdateClick,u=e.setUpdateData,b=e.setUpdateIndex,m=e.indexOfCardClicked,O=e.setindexOfCardClicked,f=e.isOwner,h=e.setDeleteClick,p=(e.deleteClick,e.setPostIndex,e.postsLength,e.UserLikedIndex),v=e.setUsersLikedIndex,N=e.path,S=e.result,y=e.setResult,C=e.setGetLoading,k=Object(n.useState)(""),w=Object(o.a)(k,2),D=w[0],E=w[1],F=Object(n.useState)(""),I=Object(o.a)(F,2),L=I[0],P=I[1],T=Object(n.useState)([]),A=Object(o.a)(T,2),M=A[0],U=A[1],V=Object(n.useState)(!0),q=Object(o.a)(V,2),B=q[0],J=q[1],W=Object(n.useState)(!0),z=Object(o.a)(W,2),Y=z[0],K=z[1],Q=Object(n.useState)(null),X=Object(o.a)(Q,2),Z=X[0],$=X[1],ee=Object(n.useContext)(_),te=ee.jwtData,se=ee.axios_request,ae=Object(n.useState)([]),ne=Object(o.a)(ae,2),ce=ne[0],re=ne[1],ie=Object(n.useState)([]),oe=Object(o.a)(ie,2),le=oe[0],de=oe[1],je=Object(n.useState)([]),ue=Object(o.a)(je,2),be=ue[0],me=ue[1];Object(l.h)();if("userpost"==N){var Oe=JSON.parse(localStorage.getItem("local_history"));t=Oe.fname,s=Oe.lname}var fe=Object(n.useState)(!1),he=Object(o.a)(fe,2),xe=he[0],pe=he[1];Object(n.useEffect)((function(){var e=document.querySelector("#post-".concat(r));if(e){var t=e.scrollHeight;e.scrollTo(0,t)}}),[xe,M,B]),Object(n.useEffect)((function(){var e=c.like.includes(te.sub);be[r]=e,me(be),le[r]=Number(c.like.length),de(le),pe(!xe)}),[]);var ve=new Date(c.created_at).getMinutes(),ge=new Date(c.created_at).getHours(),Ne=Object(n.useState)(!1),Se=Object(o.a)(Ne,2),_e=Se[0],ye=Se[1];return Object(a.jsxs)("div",{className:"UserPostCard",children:[Object(a.jsxs)("div",{className:"head",children:[Object(a.jsx)("div",{className:"profile-picture",children:t?Object(g.a)(t[0].toLowerCase()):Object(g.a)(c.user.fname[0].toLowerCase())}),Object(a.jsxs)("div",{className:"name-container",children:[Object(a.jsxs)("div",{className:"name",children:["userpost"!==N&&Object(a.jsxs)(d.b,{to:{pathname:"/user/".concat(c.user.username,"/posts"),state:{userid:c.user._id,fname:c.user.fname,lname:c.user.lname,username:c.user.username}},children:[Object(a.jsxs)("span",{children:[c.user.fname," "]}),Object(a.jsx)("span",{children:c.user.lname})]}),"userpost"==N&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("span",{children:[t," "]}),Object(a.jsx)("span",{children:s})]})]}),Object(a.jsx)("div",{className:"username",children:c.user.username})]}),Object(a.jsxs)("div",{className:"post-date",children:[Object(a.jsx)("div",{children:new Date(c.created_at).toLocaleDateString()}),Object(a.jsxs)("div",{children:[Object(a.jsxs)("span",{children:[ge>12?ge-12:0===ge?12:ge,":"]}),Object(a.jsx)("span",{children:ve<10?"0"+ve:ve}),Object(a.jsx)("span",{children:ge>12?"pm":"am"})]})]}),f&&Object(a.jsxs)("div",{className:"option-btn",onClick:function(e){e.preventDefault(),O(m==r?null:r)},children:[Object(a.jsx)("div",{className:"btn",style:{backgroundColor:m==r?"darkgray":"",borderRadius:"4px"},children:"\u22ee"}),m==r&&Object(a.jsxs)("div",{className:"hamburger-menu",children:[Object(a.jsxs)("div",{className:"menu-btn edit-button-container",onClick:function(e){e.preventDefault(),e.stopPropagation(),O(null),j(!0),u(c),i(c._id),b(r)},children:[Object(a.jsx)("div",{className:"far fa-edit icon"}),Object(a.jsx)("div",{className:"label",children:"Edit post"})]}),Object(a.jsxs)("div",{className:"menu-btn delete-btn-container",onClick:function(e){e.preventDefault(),e.stopPropagation(),O(null),h(!0),i(c._id),b(r)},children:[Object(a.jsx)("div",{className:"far fa-trash-alt icon"}),Object(a.jsx)("div",{className:"label",children:"Delete post"})]})]})]})]}),Object(a.jsxs)("div",{className:"post-content-container",children:[Object(a.jsx)("div",{className:"post-title",children:c.title}),Object(a.jsx)("div",{className:"post-content",children:c.content_text})]}),D&&Object(a.jsxs)("div",{className:"card-error error",children:[" ",D]}),!D&&Object(a.jsxs)("div",{className:"no-like",onClick:function(e){e.preventDefault(),e.stopPropagation(),v(r),pe(!xe)},children:[Object(a.jsxs)("span",{children:[le[r]," "]}),Object(a.jsx)("span",{children:" "}),Object(a.jsxs)("span",{children:[" ",1==le[r]?"like":"likes"]})]}),p==r&&Object(a.jsx)(G,{postid:c._id,setUsersLikedIndex:v,setGetLoading:C,path:N}),Object(a.jsxs)("div",{className:"card-footer",children:[Object(a.jsx)("div",{style:{color:be[r]?"blue":""},className:"like-icon far fa-thumbs-up",onClick:function(e){if(e.preventDefault(),function(e){var t="/post/".concat(e,"/like");se({route:t,data:"",method:"POST",axios_error:function(e){E(e)},axios_response:function(e){}})}(c._id),1==be[r]){le[r]=le[r]-1,de(le);var t=S[r].like.findIndex((function(e){return e.toString()===te.sub.toString()}));S[r].like.splice(t,1),y(S)}else le[r]=le[r]+1,de(le),S[r].like.push(te.sub),y(S);be[r]=!be[r],me(be),pe(!xe)}}),Object(a.jsx)("div",{className:"comment-icon far fa-comment-alt",onClick:function(e){e.preventDefault(),Y&&(!function(e){var t="/post/".concat(e,"/comment");se({route:t,data:"",method:"GET",axios_error:function(e){P(e),J(!1)},axios_response:function(e){re(e.data),J(!1)}})}(c._id),K(!1)),void 0===M[r]?M[r]=!0:M[r]=!M[r],pe(!xe),U(M)}}),Object(a.jsx)("div",{className:"share-icon far fa-share-square",onClick:function(){var e=document.createElement("textarea");e.value=window.location.href,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),ye(!0),setTimeout((function(){ye(!1)}),900)},children:_e&&Object(a.jsx)("div",{id:"copy",children:"Link Copied!!"})})]}),Object(a.jsxs)("div",{className:"comment-list",id:"post-".concat(r),children:[M[r]&&L&&Object(a.jsx)("div",{className:"error",children:L}),M[r]&&!L&&B&&"loading...",M[r]&&!L&&!B&&M&&(0==ce.comment_list.length?Object(a.jsx)("div",{className:"empty",children:"This post has no comments."}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"no-comment",children:[Object(a.jsxs)("span",{children:[ce.comment_list.length," "]}),Object(a.jsx)("span",{children:1==ce.comment_list.length?" comment":" comments"})]}),ce.comment_list.map((function(e,t){return Object(a.jsx)(R,{comment:e,index:t,postIndex:t,path:N,commentOptionIndex:Z,setCommentOptionIndex:$,postid:c._id,comments:ce,setComments:re,pp:xe,setpp:pe,setGetLoading:C},x()())}))]}))]}),M[r]&&!B&&Object(a.jsx)(H,{postid:c._id,setComments:re,comments:ce,postIndex:r,pp:xe,setpp:pe},x()())]})}),z=(s(143),function(e){e.deleteClick;var t=e.setDeleteClick,s=e.user_delete_response,c=e.postid,r=Object(n.useContext)(_).axios_request,i="/mypost/".concat(c),l=Object(n.useState)(!1),d=Object(o.a)(l,2),j=d[0],u=d[1],b=Object(n.useState)(""),m=Object(o.a)(b,2),O=m[0],f=m[1],h=function(){r({route:i,data:"",method:"DELETE",axios_error:function(e){f(e.message),u(!1)},axios_response:function(e){u(!1),s(e)}})};return Object(a.jsxs)("div",{className:"MyPostDelete",children:[O&&Object(a.jsxs)("div",{className:"error",children:[Object(a.jsx)("div",{children:O}),Object(a.jsx)("div",{children:"Please try refreshing the Page"})]}),!O&&Object(a.jsxs)("div",{className:"dialog-box",children:[Object(a.jsx)("p",{className:"confitm-msg",children:"Are you sure want to delete this post?"}),Object(a.jsxs)("div",{className:"btn",children:[Object(a.jsx)("button",{className:"dlt-btn",onClick:function(e){e.preventDefault(),j||(u(!0),h())},children:j?"Deleting post....":"Delete"}),Object(a.jsx)("button",{className:"cancel-btn",onClick:function(e){e.preventDefault(),t(!1)},children:"Cancel"})]})]})]})}),Y=(s(144),function(){var e=Object(n.useContext)(_).jwtData;return Object(a.jsx)("div",{className:"WelcomeMsg",id:"welcome_msg_unique",children:Object(a.jsxs)("div",{className:"container-msg",children:["Welcome ",Object(a.jsxs)("span",{children:[e.fname," "]}),Object(a.jsxs)("span",{children:[e.lname," :)"]})]})})}),K=function(e){var t,s,c,r,i=e.path,d=Object(n.useContext)(_),j=d.jwtData,u=d.axios_request,b=d.myPostsValue,m=d.didMyPostsMountValue,O=d.myNewsFeedValue,f=d.didMyNewsFeedMountValue,h=d.myFriendsValue,p=d.didMyFriendsMountValue,v=Object(o.a)(b,2),g=v[0],N=v[1],S=Object(o.a)(O,2),y=S[0],C=S[1],k=Object(o.a)(f,2),w=k[0],D=k[1],E=Object(o.a)(m,2),F=E[0],I=E[1],L=Object(o.a)(p,2),P=L[0],T=L[1],A=Object(n.useState)(""),M=Object(o.a)(A,2),q=M[0],R=M[1],B=Object(n.useState)(!0),G=Object(o.a)(B,2),J=G[0],H=G[1],K=Object(n.useState)(!1),Q=Object(o.a)(K,2),X=Q[0],Z=Q[1],$=Object(n.useState)([]),ee=Object(o.a)($,2),te=ee[0],se=ee[1],ae=Object(n.useState)(!1),ne=Object(o.a)(ae,2),ce=ne[0],re=ne[1],ie=Object(n.useState)(""),oe=Object(o.a)(ie,2),le=oe[0],de=oe[1],je=Object(n.useState)(!1),ue=Object(o.a)(je,2),be=ue[0],me=ue[1],Oe=Object(n.useState)(!1),fe=Object(o.a)(Oe,2),he=fe[0],xe=fe[1],pe=Object(n.useState)([]),ve=Object(o.a)(pe,2),ge=ve[0],Ne=ve[1],Se=Object(l.h)(),_e=Object(n.useState)(""),ye=Object(o.a)(_e,2),Ce=ye[0],ke=ye[1],we=Object(n.useState)(""),De=Object(o.a)(we,2),Ee=De[0],Fe=De[1],Ie=Object(n.useState)(""),Le=Object(o.a)(Ie,2),Pe=Le[0],Te=Le[1],Ae=Object(n.useState)(null),Me=Object(o.a)(Ae,2),Ue=Me[0],Ve=Me[1],qe=Object(o.a)(h,2),Re=qe[0],Be=qe[1],Ge=Object(n.useState)([]),Je=Object(o.a)(Ge,2),He=Je[0],We=Je[1];if("userpost"==i){var ze=JSON.parse(localStorage.getItem("local_history"));t=ze.userid,s=ze.fname,c=ze.lname,r=ze.from}var Ye=function(){var e;"userpost"==i?e="/posts/".concat(t):"newsfeed"===i&&(e="/news-feed");u({route:e,data:"",method:"GET",axios_error:function(e){R(e.message),H(!1)},axios_response:function(e){"newsfeed"==i?C(e.data):t===j.sub&&N(e.data),se(e.data),H(!1);var s=Array(e.data.length).fill(!1);Ze(s)}})};Object(n.useEffect)((function(){"userpost"==i?t!==j.sub?(Ye(),re(!1)):F?(Ye(),re(!0),I(!1)):(se(g),H(!1),re(!0)):"newsfeed"==i&&(w?(Ye(),re(!1),D(!1)):(se(y),H(!1),re(!1)))}),[Se.pathname,r]),Object(n.useEffect)((function(){"newsfeed"===i&&(Ye(),re(!1))}),[Re.length]);Object(n.useEffect)((function(){P&&(!function(){var e="/friend/".concat(j.sub);u({route:e,data:"",method:"GET",axios_error:function(e){R(e.message),H(!1)},axios_response:function(e){Be(e.data)}})}(),T(!1))}),[]);Object(n.useEffect)((function(){if("/login"===r||"/signup"===r){var e=document.querySelector("#welcome_msg_unique");e&&e.addEventListener("click",(function(e){Z(!0)}))}}),[]);var Ke=Object(n.useState)([]),Qe=Object(o.a)(Ke,2),Xe=Qe[0],Ze=Qe[1],$e=Object(n.useState)(null),et=Object(o.a)($e,2),tt=et[0],st=et[1];return Object(a.jsxs)("div",{className:"userpost"==i?"UserPost myaccount":"UserPost",children:[q&&Object(a.jsx)("div",{className:"error",children:q}),!q&&Object(a.jsxs)(a.Fragment,{children:[!X&&("/login"===r||"/signup"===r)&&"newsfeed"===i&&Object(a.jsx)(Y,{}),J&&Object(a.jsx)("div",{className:"loading-container",style:{zIndex:"1"},children:Object(a.jsx)("div",{className:"spinner-border loading",role:"status",children:Object(a.jsx)("span",{className:"sr-only"})})}),!J&&Object(a.jsxs)(a.Fragment,{children:[ce&&Object(a.jsx)("div",{children:Object(a.jsx)(U,{user_post_response:function(e){se([e.data].concat(te)),N([e.data].concat(g))},createClick:be,setCreateClick:me})}),le&&Object(a.jsx)("div",{children:Object(a.jsx)(V,{postid:Ee,updateClick:le,setUpdateClick:de,updateData:Ce,user_post_response:function(e){te[Pe]=e.data,se(te),g[Pe]=e.data,N(g)}})}),he&&Object(a.jsx)(z,{setDeleteClick:xe,deleteClick:he,user_delete_response:function(e){te.splice(Pe,1),se(te),g.splice(Pe,1),N(g),xe(!1)},postid:Ee}),0==te.length?Object(a.jsxs)("div",{className:"empty-posts",children:["newsfeed"==i&&"Please add friends to see their posts here :)",ce&&"newsfeed"!==i&&"Create new posts to see them here",!ce&&"newsfeed"!==i&&Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("span",{children:[s," ",c," doesn't have any posts to show :("]})})]}):te.map((function(e,t){return Object(a.jsx)(W,{value:e,index:t,setPostid:Fe,setUpdateClick:de,setUpdateData:ke,setUpdateIndex:Te,indexOfCardClicked:Ue,setindexOfCardClicked:Ve,isOwner:ce,setDeleteClick:xe,deleteClick:he,likeClick:Xe,setLikeClick:Ze,postsLength:te.length,path:i,likeLength:ge,setLikeLength:Ne,UserLikedIndex:tt,setUsersLikedIndex:st,result:te,setResult:se,setGetLoading:H,comments:He,setComments:We},x()())}))]})]})]})},Q=(s(65),function(){var e=Object(n.useContext)(_),t=e.axios_request,s=e.jwtData,c=e.myFriendsValue,r=e.didMyFriendsMountValue,i=Object(n.useState)(""),d=Object(o.a)(i,2),j=d[0],u=d[1],b=Object(o.a)(c,2),m=b[0],O=b[1],f=Object(o.a)(r,2),h=f[0],x=f[1],p=Object(n.useState)(!1),v=Object(o.a)(p,2),g=v[0],N=v[1],S=Object(n.useState)(!1),y=Object(o.a)(S,2),C=y[0],k=y[1],w=Object(n.useState)(!0),D=Object(o.a)(w,2),E=D[0],F=D[1],I=(Object(l.h)(),JSON.parse(localStorage.getItem("local_history"))),L=I.userid,P=I.fname,T=I.lname,A=I.username;Object(n.useEffect)((function(){h?(!function(){var e="/friend/".concat(s.sub);t({route:e,data:"",method:"GET",axios_error:function(e){},axios_response:function(e){O(e.data),F(!1)}})}(),x(!1)):F(!1)}),[]),Object(n.useEffect)((function(){var e=m.findIndex((function(e){return e.username===A}));k(-1!==e),N(!g)}),[m]);return Object(a.jsxs)("div",{className:"UserDetailFriendBtn",children:[j&&Object(a.jsx)("div",{className:"error",children:j}),!j&&!E&&Object(a.jsx)("div",{style:{color:C?"red":"blue"},className:C?"add-btn fas fa-user-minus":"add-btn fas fa-user-plus",onClick:function(e){e.preventDefault(),k(!C),N(!g),function(){var e="/friend/".concat(L);if(t({route:e,data:"",method:"POST",axios_error:function(e){u(e.message)},axios_response:function(e){}}),1==C){var s=m.findIndex((function(e){return e.username==A}));-1!==s&&(m.splice(s,1),O(m))}else m.push({_id:L,username:A,fname:P,lname:T});N(!g)}()}})]})}),X=function(){Object(l.h)();var e=Object(l.i)(),t=Object(n.useContext)(_).jwtData,s=JSON.parse(localStorage.getItem("local_history")),c=s.userid,r=s.fname,i=s.lname,o=s.username;s.from;return Object(a.jsxs)("div",{className:"UserDetail",children:[Object(a.jsxs)("div",{className:"user-banner-container",children:[Object(a.jsxs)("div",{className:"user-banner",children:[e.username,Object(a.jsxs)("div",{className:"banner-btn",children:[c&&c!==t.sub&&Object(a.jsx)("div",{className:"chat-link-container",children:Object(a.jsx)(d.b,{to:{pathname:"/chat",state:{userid:c,fname:r,lname:i,username:o}},children:Object(a.jsx)("div",{className:"chat-btn fab fa-facebook-messenger"})})}),c&&c!==t.sub&&Object(a.jsx)(Q,{})]})]}),Object(a.jsx)("div",{className:"name-container",children:Object(a.jsxs)("div",{className:"name",children:[Object(a.jsxs)("span",{children:[r," "]}),Object(a.jsxs)("span",{children:[" ",i]})]})})]}),Object(a.jsxs)("div",{className:"UserNav",children:[Object(a.jsx)(I,{to:"/user/".concat(e.username,"/posts"),fname:r,lname:i,userid:c,username:o,label:"Posts"}),Object(a.jsx)(I,{to:"/user/".concat(e.username,"/about"),fname:r,lname:i,userid:c,username:o,label:"About"}),Object(a.jsx)(I,{to:"/user/".concat(e.username,"/friends"),fname:r,lname:i,userid:c,username:o,label:"Friends"})]}),Object(a.jsxs)(l.d,{children:[Object(a.jsx)(l.b,{path:"/user/".concat(e.username,"/posts"),children:Object(a.jsx)(K,{path:"userpost"})}),Object(a.jsx)(l.b,{path:"/user/".concat(e.username,"/about"),children:Object(a.jsx)(A,{})}),Object(a.jsx)(l.b,{path:"/user/".concat(e.username,"/friends"),children:Object(a.jsx)(S,{})})]})]})},Z=(s(145),function(){var e=Object(n.useContext)(_).jwtData;return Object(a.jsxs)("div",{className:"Hamburger",children:[Object(a.jsx)("div",{className:"box-1 box",children:Object(a.jsxs)(d.b,{to:{pathname:"/user/".concat(e.user,"/posts"),state:{fname:e.fname,lname:e.lname,username:e.user,userid:e.sub}},children:[Object(a.jsx)("div",{className:"profile-picture",children:Object(g.a)(e.fname[0].toLowerCase())}),Object(a.jsxs)("div",{className:"nav-link-container",children:[Object(a.jsx)("div",{className:"user label",children:e.user}),Object(a.jsx)("div",{className:"nav-link-desc label",children:"See your profile"})]})]})}),Object(a.jsx)("div",{className:"box-2 box",children:Object(a.jsx)(d.b,{to:"/logout",children:Object(a.jsx)("div",{className:"label",children:"Logout"})})}),Object(a.jsx)("div",{className:"box-2 box",children:Object(a.jsx)(d.b,{to:"/about",children:"About"})})]})}),$=(s(146),s(147),function(e){var t,s,n,c=e.value;e.index;return""!==c.createdAt&&(s=(t=new Date(c.createdAt)).getFullYear().toString(),n=Object(g.a)(s)),Object(a.jsx)("div",{className:"ChatMap",children:""!==c.message&&Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("div",{className:1==c.isOwner?"me":"person",children:[Object(a.jsx)("div",{className:1==c.isOwner?"curve-right":"curve-left"}),Object(a.jsxs)("div",{className:1==c.isOwner?"right":"left",children:[Object(a.jsx)("div",{className:"message",children:c.message}),Object(a.jsxs)("div",{className:"date-container",children:[Object(a.jsxs)("div",{className:"date",children:[Object(a.jsxs)("span",{children:[t.getDate(),"/"]}),Object(a.jsxs)("span",{children:[t.getMonth()+1,"/"]}),Object(a.jsx)("span",{children:n[2]}),Object(a.jsx)("span",{children:n[3]})]}),Object(a.jsxs)("div",{className:"time",children:[Object(a.jsxs)("span",{children:[t.getHours()>12?t.getHours()-12:0===t.getHours()?12:t.getHours(),":"]}),Object(a.jsx)("span",{children:t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes()}),Object(a.jsx)("span",{children:t.getHours()>12?"pm":"am"})]})]})]})]})})})}),ee=function(e){var t=e.fname,s=e.lname,c=e.userid,r=e.username,i=e.msgArr,l=e.setMsgArr,d=Object(n.useRef)(),j=Object(n.useState)(""),u=Object(o.a)(j,2),b=u[0],m=u[1],O=Object(n.useContext)(_),f=O.jwtData,h=O.socket,p=O.axios_request,v=O.myChatListValue,N=Object(o.a)(v,2),S=N[0],y=N[1];return Object(a.jsxs)("div",{className:"ChatCard",children:[b&&Object(a.jsx)("div",{className:"error",children:b}),!b&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"head-top",children:[Object(a.jsx)("div",{className:"profile-picture",children:Object(g.a)(t)[0].toLowerCase()}),Object(a.jsxs)("div",{className:"name",children:[Object(a.jsxs)("span",{children:[t," "]}),Object(a.jsx)("span",{children:s})]})]}),Object(a.jsx)("form",{autoComplete:"off",children:Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("input",{type:"text",ref:d,name:"msg",id:"msg"}),Object(a.jsx)("div",{className:"send-btn",children:Object(a.jsx)("button",{onClick:function(e){e.preventDefault(),""!==d.current.value&&(function(){var e="/isreadfalse/".concat(c);p({route:e,data:"",method:"PUT",axios_response:function(e){},axios_error:function(e){m(e.message)}})}(),function(){var e="/mychat/".concat(f.sub,"/").concat(c);p({route:e,data:{last_msg:(new Date).toISOString()},method:"PUT",axios_error:function(e){m(e.message)},axios_response:function(e){}})}(),function(){var e="/mychat/".concat(c,"/").concat(f.sub);p({route:e,data:{last_msg:(new Date).toISOString()},method:"PUT",axios_error:function(e){m(e.message)},axios_response:function(e){}})}(),function(e){var t="/chat/".concat(c);p({route:t,data:e,method:"PUT",axios_error:function(e){m(e.message)},axios_response:function(e){}})}({message:d.current.value,createdAt:(new Date).toISOString()}),function(){l([].concat(Object(g.a)(i),[{message:d.current.value,createdAt:(new Date).toISOString(),isOwner:!0}])),h.emit("send_message",{to:r,from:{fname:f.fname,lname:f.lname,username:f.user,userid:f.sub},message:d.current.value,createdAt:(new Date).toISOString()});var e=S.findIndex((function(e){return e.user._id===c}));-1!==e?S[e].last_msg=(new Date).toISOString():S.push({last_msg:(new Date).toISOString(),user:{fname:t,lname:s,username:r,_id:c}});var a=S.sort((function(e,t){return t.last_msg<e.last_msg?-1:t.last_msg>e.last_msg?1:0}));y(a),d.current.value=""}())},children:"Send"})})]})}),Object(a.jsx)("div",{className:"chat-map-container",children:i.map((function(e,t){return Object(a.jsx)($,{value:e,index:t},x()())}))})]})]})},te=function(){Object(l.h)();var e=Object(n.useState)(""),t=Object(o.a)(e,2),s=t[0],c=t[1],r=Object(n.useContext)(_),i=r.axios_request,d=r.jwtData,j=r.socket,u=r.isReadValue,O=JSON.parse(localStorage.getItem("local_history")),f=O.userid,h=O.fname,x=O.lname,p=O.username,v=Object(n.useState)([]),N=Object(o.a)(v,2),S=N[0],y=N[1],C=Object(n.useState)([]),k=Object(o.a)(C,2),w=k[0],D=k[1],E=Object(n.useState)([]),F=Object(o.a)(E,2),I=F[0],P=F[1],T=Object(n.useState)(!0),A=Object(o.a)(T,2),M=A[0],U=A[1],V=Object(n.useState)(!0),q=Object(o.a)(V,2),R=q[0],B=q[1],G=Object(n.useState)([]),J=Object(o.a)(G,2),H=J[0],W=J[1],z=Object(o.a)(u,2),Y=z[0],K=z[1];Object(n.useEffect)((function(){j.on("new_msg",(function(e){y([].concat(Object(g.a)(S),[{message:e.message,createdAt:e.createdAt}]))}))}),[j]),Object(n.useEffect)((function(){0!==S.length&&P([].concat(Object(g.a)(I),Object(g.a)(S)))}),[S]),Object(n.useEffect)((function(){(function(){var e=Object(m.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([Q(),X()]);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()(),Z()}),[]);var Q=function(){var e="/chat/".concat(f,"/").concat(d.sub);i({route:e,data:"",method:"GET",axios_error:function(e){c(e.message),B(!1)},axios_response:function(e){if(0!==e.data.length){var t=e.data.message_container.map((function(e){return Object(L.a)(Object(L.a)({},e),{},{isOwner:!0})}));D(t)}else D([{message:"",createdAt:""}]);B(!1)}})},X=function(){var e="/chat/".concat(d.sub,"/").concat(f);i({route:e,data:"",method:"GET",axios_error:function(e){c(e.message),U(!1)},axios_response:function(e){0!==e.data.length?W(e.data.message_container):W([{message:"",createdAt:""}]),U(!1)}})};Object(n.useEffect)((function(){if(!M&&!R){var e=[].concat(Object(g.a)(w),Object(g.a)(H)).sort((function(e,t){return e.createdAt<t.createdAt?-1:e.createdAt>t.createdAt?1:0}));P(e)}}),[M,R]);var Z=function(){var e="/isreadtrue/".concat(f);if(i({route:e,data:"",method:"PUT",axios_error:function(e){c(e.message)},axios_response:function(e){}}),Y.length>0){var t=Y.findIndex((function(e){return e.user===f}));-1!==t&&(Y[t].isread=[],Y[t].isread.push(!0),K(Y))}};return Object(n.useEffect)((function(){var e=document.querySelector(".Chat"),t=e.scrollHeight;e.scrollTo(0,t)}),[I]),Object(a.jsxs)("div",{className:"Chat",children:[s&&Object(a.jsx)("div",{className:"error",children:s}),!s&&Object(a.jsxs)(a.Fragment,{children:[M&&R&&Object(a.jsx)("div",{className:"loading-container",children:Object(a.jsx)("div",{className:"spinner-border loading",role:"status",children:Object(a.jsx)("span",{className:"sr-only"})})}),!M&&!R&&Object(a.jsx)(ee,{fname:h,lname:x,userid:f,username:p,msgArr:I,setMsgArr:P})]})]})},se=function(e){for(var t,s=e.value,n=(e.index,e.isRead),c=0;c<n.length;c++)if(n[c].user===s.user._id){if(1==n[c].isread[0])break;t=n[c].isread.length}var r=new Date(s.last_msg).getMinutes(),i=new Date(s.last_msg).getHours(),o=new Date(s.last_msg).getDate(),l=new Date(s.last_msg).getMonth()+1,j=new Date(s.last_msg).getFullYear(),u=Object(g.a)(j.toString());return Object(a.jsx)("div",{className:"ChatListCard",children:Object(a.jsxs)(d.b,{to:{pathname:"/chat",state:{userid:s.user._id,fname:s.user.fname,lname:s.user.lname,username:s.user.username}},children:[Object(a.jsx)("div",{className:"profile-picture",children:Object(g.a)(s.user.fname)[0].toLowerCase()}),Object(a.jsx)("div",{className:"name",children:Object(a.jsxs)("div",{children:[Object(a.jsxs)("span",{children:[s.user.fname," "]}),Object(a.jsxs)("span",{children:[s.user.lname," "]})]})}),Object(a.jsxs)("div",{className:"read-container",children:[Object(a.jsx)("div",{className:"read",children:Object(a.jsx)("div",{className:t?"show-read isread":"show-read",children:t||""})}),Object(a.jsxs)("div",{className:"date-container",children:[Object(a.jsxs)("div",{className:"date",children:[Object(a.jsxs)("span",{children:[o,"/"]}),Object(a.jsxs)("span",{children:[l,"/"]}),Object(a.jsx)("span",{children:u[2]}),Object(a.jsx)("span",{children:u[3]})]}),Object(a.jsxs)("div",{className:"time",children:[Object(a.jsxs)("span",{children:[i>12?i-12:0===i?12:i,":"]}),Object(a.jsx)("span",{children:r<10?"0"+r:r}),Object(a.jsx)("span",{children:i>12?"pm":"am"})]})]})]})]})})},ae=(s(148),function(){var e=Object(n.useContext)(_),t=e.axios_request,s=e.myChatListValue,c=e.didMyChatListMountValue,r=e.isReadValue,i=e.socket,l=Object(o.a)(r,2),d=l[0],j=l[1],u=Object(o.a)(s,2),b=u[0],m=u[1],O=Object(o.a)(c,2),f=O[0],h=O[1],p=Object(n.useState)(!0),v=Object(o.a)(p,2),N=v[0],S=v[1],y=Object(n.useState)(!0),C=Object(o.a)(y,2),k=C[0],w=C[1],D=Object(n.useState)([]),E=Object(o.a)(D,2),F=E[0],I=E[1],L=Object(n.useState)(!1),P=Object(o.a)(L,2),T=P[0],A=P[1],M=Object(n.useState)(""),U=Object(o.a)(M,2),V=U[0],q=U[1];return Object(n.useEffect)((function(){f?(t({route:"/mychat",data:"",method:"GET",axios_error:function(e){q(e.message),S(!1)},axios_response:function(e){var t=e.data.received,s=e.data.sent;s.length>0&&t.forEach((function(e){var t=s.findIndex((function(t){return t.user._id===e.user._id}));-1!==t&&s.splice(t,1)}));var a=[].concat(Object(g.a)(t),Object(g.a)(s)).sort((function(e,t){return t.last_msg<e.last_msg?-1:t.last_msg>e.last_msg?1:0}));m(a),S(!1)}}),t({route:"/isread",data:"",method:"GET",axios_response:function(e){j(e.data.users),w(!1)},axios_error:function(e){q(e.message),w(!1)}}),h(!1)):(w(!1),S(!1))}),[T]),Object(n.useEffect)((function(){i.on("new_msg",(function(e){I(e)}))}),[i]),Object(n.useEffect)((function(){if(0!==F.length){var e=d.findIndex((function(e){return e.user===F.from.userid}));-1!==e?(!0===d[e].isread[0]&&d[e].isread.splice(0,1),d[e].isread.push(!1)):d.push({user:F.from.userid,isread:[!1]}),j(d);var t=b.findIndex((function(e){return e.user._id===F.from.userid}));-1!==t?b[t].last_msg=(new Date).toISOString():b.push({last_msg:(new Date).toISOString(),user:{fname:F.from.fname,lname:F.from.lname,username:F.from.username,_id:F.from.userid}});var s=b.sort((function(e,t){return t.last_msg<e.last_msg?-1:t.last_msg>e.last_msg?1:0}));m(s),A(!T)}}),[F]),Object(a.jsxs)("div",{className:"ChatList",children:[V&&Object(a.jsx)("div",{className:"errorr",children:V}),!V&&Object(a.jsxs)(a.Fragment,{children:[N&&k&&Object(a.jsx)("div",{className:"loading-container",children:Object(a.jsx)("div",{className:"spinner-border loading",role:"status",children:Object(a.jsx)("span",{className:"sr-only"})})}),!N&&!k&&(0===b.length?Object(a.jsx)("div",{className:"empty-chatlist",children:"Please start a conversation with someone to see it here."}):b.map((function(e,t){return Object(a.jsx)(se,{value:e,index:t,isRead:d},x()())})))]})]})}),ne=function(){var e=Object(n.useState)(!1),t=Object(o.a)(e,2),s=t[0],c=t[1];return Object(a.jsx)("div",{className:"Menu",children:Object(a.jsxs)("div",{style:{color:s?"red":""},className:"drop-btn ",onClick:function(e){e.stopPropagation(),c(!s)},children:[s?Object(a.jsx)("div",{className:"close-icon fas fa-times-circle"}):Object(a.jsx)("div",{className:"ham-icon fa fa-caret-down"}),s&&Object(a.jsx)(Z,{})]})})},ce=(s(149),function(){return Object(a.jsxs)("div",{className:"PageNotFound",children:[Object(a.jsx)("p",{children:"Error 404 "}),Object(a.jsx)("p",{children:"Oopsie, couldn't find the page you were looking for :("})]})}),re=s.p+"static/media/resume.c1548462.png",ie=(s(150),function(){return Object(a.jsx)("div",{className:"Resume",children:Object(a.jsx)("img",{src:re,alt:"resume"})})}),oe=function(e){var t=e.value,s=(e.index,Object(n.useContext)(_)),c=s.jwtData,r=s.myFriendsValue,i=s.axios_request,l=Object(n.useState)(!1),j=Object(o.a)(l,2),u=j[0],b=j[1],m=Object(n.useState)(""),O=Object(o.a)(m,2),f=O[0],h=O[1],x=Object(o.a)(r,2),p=x[0],v=x[1];return Object(a.jsxs)("div",{className:"ExploreCard",children:[f&&Object(a.jsx)("div",{className:"error",children:f}),!f&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"profile-picture",children:Object(g.a)(t.fname[0].toLowerCase())}),Object(a.jsxs)("div",{className:"name-container",children:[Object(a.jsx)(d.b,{to:{pathname:"/user/".concat(t.username,"/posts"),state:{userid:t._id,fname:t.fname,lname:t.lname,username:t.username}},children:Object(a.jsxs)("div",{className:"name",children:[Object(a.jsxs)("span",{children:[t.fname," "]}),Object(a.jsx)("span",{children:t.lname})]})}),Object(a.jsx)("div",{className:"username",children:t.username})]}),c.sub!==t._id&&Object(a.jsx)("div",{className:"add-btn",style:{color:u?"red":"blue"},onClick:function(){b(!u),function(){var e="/friend/".concat(t._id);if(i({route:e,data:"",method:"POST",axios_error:function(e){h(e.message)},axios_response:function(e){}}),u){var s=p.findIndex((function(e){return e.username==t.username}));-1!==s&&(p.splice(s,1),v(p))}else p.push(t)}()},children:Object(a.jsx)("div",{className:u?"add-btn fas fa-user-minus":"add-btn fas fa-user-plus"})}),Object(a.jsx)("div",{className:"chat-link-container",children:Object(a.jsx)(d.b,{to:{pathname:"/chat",state:{userid:t._id,fname:t.fname,lname:t.lname,username:t.username}},children:Object(a.jsx)("div",{className:"chat-btn fab fa-facebook-messenger"})})})]})]})},le=(s(151),function(){var e=Object(n.useContext)(_),t=e.axios_request,s=e.didMyFriendsMountValue,c=e.myFriendsValue,r=e.jwtData,i=Object(o.a)(s,2),l=i[0],d=i[1],j=Object(o.a)(c,2),u=j[0],b=j[1],m=Object(n.useState)(""),O=Object(o.a)(m,2),f=O[0],h=O[1],p=Object(n.useState)([]),v=Object(o.a)(p,2),g=v[0],N=v[1],S=Object(n.useState)(!0),y=Object(o.a)(S,2),C=y[0],k=y[1],w=Object(n.useState)(!0),D=Object(o.a)(w,2),E=D[0],F=D[1];return Object(n.useEffect)((function(){t({route:"/user_list",data:"",method:"GET",axios_error:function(e){h(e.message),k(!1)},axios_response:function(e){N(e.data),k(!1)}}),l?(!function(){var e="/friend/".concat(r.sub);t({route:e,data:"",method:"GET",axios_error:function(e){h(e.message),F(!1)},axios_response:function(e){b(e.data),F(!1)}})}(),d(!1)):F(!1)}),[]),Object(a.jsxs)("div",{className:"Explore",children:[f&&Object(a.jsx)("div",{className:"error",children:f}),!f&&Object(a.jsx)("h2",{className:"title-msg",children:"People you might know."}),!f&&!C&&!E&&Object(a.jsx)(a.Fragment,{children:g.map((function(e,t){if(!u.find((function(t){return t._id===e._id}))&&r.sub!==e._id)return Object(a.jsx)(oe,{value:e,index:t},x()())}))})]})}),de=function(){var e=Object(l.h)(),t=(e.state&&e.state.background,Object(n.useState)(!1)),s=Object(o.a)(t,2),c=(s[0],s[1]),r=Object(n.useContext)(_),i=r.isAuthValue,d=r.jwtData,u=Object(o.a)(i,2),b=u[0],m=(u[1],e.pathname),O=e.pathname.split("/")[1];return"/"!==m&&"/friends"!==m&&"/mychat"!==m&&"search"!==O&&"/login"!==m&&"/signup"!==m?e.state&&localStorage.setItem("local_history",JSON.stringify({userid:e.state.userid,fname:e.state.fname,lname:e.state.lname,username:e.state.username,from:m})):!b||"/signup"!==m&&"/login"!==m||localStorage.setItem("local_history",JSON.stringify({userid:d.sub,fname:d.fname,lname:d.lname,username:d.user,from:m})),Object(n.useEffect)((function(){window.addEventListener("click",(function(e){try{e.stopPropagation(),e.preventDefault();for(var t=e.target.classList,s=0;s<t.length;s++){var a=document.querySelector(".".concat(t[s]));if(null==a)return;var n=a.classList;"drop-btn"!==n[s].toString()&&null!==n[s]&&"ham-icon"!==n[s]&&"close-icon"!==n[s]&&c(!1),t=[]}t=[]}catch(r){console.log(r.message)}}))}),[]),Object(a.jsxs)("div",{className:"Home",children:[!b&&Object(a.jsx)("div",{className:"odin-book",children:"OdinBook"}),!b&&("/signup"===m?Object(a.jsx)(l.a,{to:"/signup"}):Object(a.jsx)(l.a,{to:"/login"})),b&&("/login"===m||"/signup"===m)&&Object(a.jsx)(l.a,{to:"/"}),b&&Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("div",{className:"Navigation",children:[Object(a.jsx)(D,{}),Object(a.jsxs)("div",{className:"left-nav",children:[Object(a.jsx)(j,{to:"/",label:"fas fa-home"}),Object(a.jsx)(j,{to:"/friends",label:"fas fa-user-friends"}),Object(a.jsx)(j,{to:"/mychat",label:"fab fa-facebook-messenger"}),Object(a.jsx)(j,{to:"/explore",label:"fas fa-search"})]}),Object(a.jsx)(ne,{})]})}),b&&Object(a.jsxs)(l.d,{children:[Object(a.jsx)(l.b,{exact:!0,path:"/",children:Object(a.jsx)(K,{path:"newsfeed"})}),Object(a.jsx)(l.b,{exect:!0,path:"/user/:username",children:Object(a.jsx)(X,{})}),Object(a.jsx)(l.b,{path:"/search/:name",children:Object(a.jsx)(F,{})}),Object(a.jsx)(l.b,{path:"/logout",children:Object(a.jsx)(k,{})}),Object(a.jsx)(l.b,{exact:!0,path:"/friends",children:Object(a.jsx)(S,{path:"myfriends"})}),Object(a.jsx)(l.b,{path:"/chat",children:Object(a.jsx)(te,{})}),Object(a.jsx)(l.b,{path:"/mychat",children:Object(a.jsx)(ae,{})}),Object(a.jsx)(l.b,{path:"/about",children:Object(a.jsx)(ie,{})}),Object(a.jsx)(l.b,{path:"/explore",children:Object(a.jsx)(le,{})}),Object(a.jsx)(l.b,{component:ce})]}),!b&&Object(a.jsxs)(l.d,{children:[Object(a.jsx)(l.b,{path:"/signup",children:Object(a.jsx)(w,{})}),Object(a.jsx)(l.b,{path:"/login",children:Object(a.jsx)(C,{})})]})]})};var je=function(){return Object(a.jsx)("div",{className:"App",children:Object(a.jsx)(de,{})})},ue=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,153)).then((function(t){var s=t.getCLS,a=t.getFID,n=t.getFCP,c=t.getLCP,r=t.getTTFB;s(e),a(e),n(e),c(e),r(e)}))};i.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(y,{children:Object(a.jsx)(d.a,{children:Object(a.jsx)(je,{})})})}),document.getElementById("root")),ue()},64:function(e,t,s){},65:function(e,t,s){},74:function(e,t,s){},75:function(e,t,s){},76:function(e,t,s){}},[[152,1,2]]]);
//# sourceMappingURL=main.c91e8a13.chunk.js.map