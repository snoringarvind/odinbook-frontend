(this["webpackJsonpreact-frontend"]=this["webpackJsonpreact-frontend"]||[]).push([[0],{102:function(e,t,s){},103:function(e,t,s){},111:function(e,t,s){},112:function(e,t,s){},158:function(e,t,s){},163:function(e,t,s){},164:function(e,t,s){},165:function(e,t){},166:function(e,t,s){},167:function(e,t,s){},168:function(e,t,s){},169:function(e,t,s){},170:function(e,t,s){},171:function(e,t,s){},279:function(e,t,s){},280:function(e,t,s){},281:function(e,t,s){},282:function(e,t,s){},283:function(e,t,s){},284:function(e,t,s){},285:function(e,t,s){},286:function(e,t,s){},287:function(e,t,s){},288:function(e,t,s){},289:function(e,t){},290:function(e,t,s){},291:function(e,t,s){},292:function(e,t,s){},293:function(e,t,s){"use strict";s.r(t);var n=s(0),a=s(1),c=s.n(a),o=s(104),r=s.n(o),i=(s(111),s(112),s(2)),l=s(9),u=s(10),d=s.n(u),j=s(23),b=s(21),m=s.n(b),O=(s(45),s(55)),f=s.n(O),h=Object(a.createContext)(),x=function(e){var t,s=e.children,c=Object(a.useState)(!1),o=Object(i.a)(c,2),r=o[0],l=o[1],u=Object(a.useState)({search:""}),b=Object(i.a)(u,2),O=b[0],x=b[1],p=Object(a.useState)([]),g=Object(i.a)(p,2),v=g[0],N=g[1],_=Object(a.useState)(!0),S=Object(i.a)(_,2),C=S[0],k=S[1],y=Object(a.useState)({}),w=Object(i.a)(y,2),D=w[0],E=w[1],F=Object(a.useState)(!0),P=Object(i.a)(F,2),I=P[0],L=P[1],A=Object(a.useState)([]),T=Object(i.a)(A,2),M=T[0],U=T[1],V=Object(a.useState)(!0),q=Object(i.a)(V,2),B=q[0],R=q[1],G=Object(a.useState)([]),H=Object(i.a)(G,2),W=H[0],J=H[1],Y=Object(a.useState)(!0),z=Object(i.a)(Y,2),K=z[0],Q=z[1],X=Object(a.useState)([]),Z=Object(i.a)(X,2),$=Z[0],ee=Z[1],te=Object(a.useState)([]),se=Object(i.a)(te,2),ne=se[0],ae=se[1],ce=Object(a.useState)(!0),oe=Object(i.a)(ce,2),re=oe[0],ie=oe[1],le=Object(a.useState)(!0),ue=Object(i.a)(le,2),de=ue[0],je=ue[1],be=Object(a.useState)(!1),me=Object(i.a)(be,2),Oe=me[0],fe=me[1],he=Object(a.useState)(JSON.parse(localStorage.getItem("jwtData"))),xe=Object(i.a)(he,2),pe=xe[0],ge=xe[1],ve="https://odinbook12.herokuapp.com",Ne=function(){var e=Object(j.a)(d.a.mark((function e(t){var s,n,a,c,o,r,i,l;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=t.route,n=t.data,a=t.method,c=t.axios_error,o=t.axios_response,null===pe&&"/login"!==s&&"/signup"!==s){e.next=19;break}return e.prev=2,"/login"!==s&&"/signup"!==s&&(r=pe.token,i={authorization:"Bearer ".concat(r)}),e.next=6,m()({url:"".concat(ve).concat(s),method:a,headers:i||"",data:n});case 6:l=e.sent,"/login"!==s&&"/signup"!==s||(localStorage.setItem("jwtData",JSON.stringify(l.data.jwtData)),ge(l.data.jwtData)),fe(!0),console.log("Utils Response=",l),o(l),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(2),e.t0.response?(console.log("Utils Error",e.t0.response.data),403===e.t0.response.status&&fe(!1)):console.log("Utils Error",e.t0.message),c(e.t0);case 17:e.next=21;break;case 19:console.log("Utils Error= NO JWT TOKEN"),fe(!1);case 21:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t){return e.apply(this,arguments)}}(),_e=Object(a.useState)(""),Se=Object(i.a)(_e,2),Ce=Se[0],ke=Se[1],ye=function(){var e=Object(j.a)(d.a.mark((function e(){var s,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("/isUserAuth","GET",!pe){e.next=22;break}return e.prev=3,s=pe.token,t={authorization:"Bearer ".concat(s)},console.log(t),e.next=9,m()({url:"".concat(ve).concat("/isUserAuth"),method:"GET",data:s,headers:t});case 9:n=e.sent,console.log("response from context login",n),fe(!0),je(!1),e.next=20;break;case 15:e.prev=15,e.t0=e.catch(3),console.log("error from context login",e.t0),je(!1),e.t0.response&&403==e.t0.response.status&&fe(!1);case 20:e.next=25;break;case 22:fe(!1),je(!1),console.log("context login no jwt token");case 25:case"end":return e.stop()}}),e,null,[[3,15]])})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){ye();var e=f()("https://odinbook12.herokuapp.com/odinbook",{withCredentials:!0});ke(e),console.log(de),pe&&e.emit("join",pe.user)}),[]),Object(n.jsx)(h.Provider,{value:{searchValue:[r,l],searchBarStateValue:[O,x],jwtData:pe,myFriendsValue:[v,N],didMyFriendsMountValue:[C,k],myAboutValue:[D,E],myPostsValue:[M,U],didMyPostsMountValue:[B,R],myNewsFeedValue:[W,J],didMyNewsFeedMountValue:[K,Q],didMyAboutMountValue:[I,L],isAuthValue:[Oe,fe],socket:Ce,axios_request:Ne,myChatListValue:[$,ee],isReadValue:[ne,ae],didMyChatListMountValue:[re,ie]},children:de?Object(n.jsx)("div",{className:"loading",children:"loading context...."}):s})},p=s(6),g=s.n(p),v=(s(158),function(e){var t=e.route,s=e.update_value,c=e.method,o=e.formTitle,r=e.user_post_response,u=(e.createClick,e.setCreateClick),d=(e.updateClick,e.setUpdateClick,Object(a.useContext)(h).axios_request),j=Object(a.useState)(""),b=Object(i.a)(j,2),m=b[0],O=b[1],f=Object(a.useState)([]),x=Object(i.a)(f,2),p=x[0],v=x[1],N=Object(a.useState)(!1),_=Object(i.a)(N,2),S=_[0],C=_[1],k=(Object(l.g)(),Object(a.useRef)()),y=Object(a.useRef)();console.log(k),Object(a.useEffect)((function(){k.current.value=s?s.title:"",y.current.value=s?s.content_text:""}),[]),console.log(s);var w=Object(l.h)();console.log(w.state);var D=Object(l.i)();return console.log(D),Object(n.jsxs)("div",{className:"MyPostForm",children:[m&&Object(n.jsxs)("div",{className:"error",children:[Object(n.jsxs)("div",{children:[m," "]}),Object(n.jsx)("div",{children:"Please try refreshing the page"})]}),!m&&Object(n.jsxs)("div",{className:"form-container",children:[Object(n.jsxs)("div",{className:"form-head",children:[Object(n.jsx)("div",{className:"form-title",children:o}),Object(n.jsx)("div",{className:"form-close-btn fas fa-times-circle",onClick:function(e){e.preventDefault(),u(!1)}})]}),Object(n.jsxs)("form",{children:[Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"title",children:"Title"}),Object(n.jsx)("input",{id:"title",type:"text",placeholder:"Enter your post title",name:"title",ref:k})]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"content_text",children:"Text"}),Object(n.jsx)("textarea",{type:"text",id:"content_text",name:"content_text",placeholder:"Add text",ref:y})]}),function(){var e=[];if(Array.isArray(p))for(var t=0;t<p.length;t++)e.push(Object(n.jsx)("li",{children:p[t].msg},g()()));else e.push(Object(n.jsx)("li",{children:p.msg},g()()));return Object(n.jsx)("ul",{className:"errors",children:e})}(),Object(n.jsx)("div",{className:"submit-btn",children:Object(n.jsx)("button",{onClick:function(e){e.preventDefault(),S||(C(!0),console.log(k.current.value),d({route:t,data:{title:k.current.value,content_text:y.current.value},method:c,axios_error:function(e){e.response?(console.log(e.response.data),v(e.response.data)):(console.log(e.message),O(e.message)),C(!1)},axios_response:function(e){console.log(e),v([]),C(!1),r(e),u(!1)}}))},children:S?"Submitting...":"Submit"})})]})]})]})}),N=function(e){var t=e.postid,s=e.updateClick,a=e.setUpdateClick,c=e.updateData,o=e.user_post_response,r="/mypost/".concat(t);return Object(n.jsx)("div",{className:"MyPostUpdate",children:s&&Object(n.jsx)(v,{route:r,update_value:c,method:"PUT",createClick:s,setCreateClick:a,formTitle:"Update Post",user_post_response:o})})},_=s(4),S=s(5),C=(s(163),function(e){var t=e.user_post_response,s=e.createClick,a=e.setCreateClick,c=Object(l.h)(),o=c.state.fname;c.state.lname,c.state.username;return Object(n.jsx)("div",{className:"MyPostCreate",children:Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("div",{className:"show-form-container",children:[Object(n.jsx)("div",{className:"profile-picture",children:Object(S.a)(o[0].toLowerCase())}),Object(n.jsx)("div",{className:"show-form-btn",onClick:function(e){e.preventDefault(),a(!0)},children:"What's on your mind..?"})]}),s&&Object(n.jsx)(v,{route:"/myposts",method:"POST",formTitle:"Create Post",user_post_response:t,createClick:s,setCreateClick:a})]})})}),k=(s(164),function(e){e.deleteClick;var t=e.setDeleteClick,s=e.user_delete_response,c=e.postid;console.log(c);var o=Object(a.useContext)(h).axios_request,r="/mypost/".concat(c),l=Object(a.useState)(!1),u=Object(i.a)(l,2),d=u[0],j=u[1],b=Object(a.useState)(""),m=Object(i.a)(b,2),O=m[0],f=m[1],x=function(){o({route:r,data:"",method:"DELETE",axios_error:function(e){e.response?f(e.response.data):f(e.message),j(!1)},axios_response:function(e){j(!1),s(e)}})};return Object(n.jsxs)("div",{className:"MyPostDelete",children:[O&&Object(n.jsxs)("div",{className:"error",children:[Object(n.jsx)("div",{children:O}),Object(n.jsx)("div",{children:"Please try refreshing the Page"})]}),!O&&Object(n.jsxs)("div",{className:"dialog-box",children:[Object(n.jsx)("p",{className:"confitm-msg",children:"Are you sure want to delete this post?"}),Object(n.jsxs)("div",{className:"btn",children:[Object(n.jsx)("button",{className:"dlt-btn",onClick:function(e){e.preventDefault(),d||(j(!0),x())},children:d?"Deleting post....":"Delete"}),Object(n.jsx)("button",{className:"cancel-btn",onClick:function(e){e.preventDefault(),t(!1)},children:"Cancel"})]})]})]})}),y=(s(165),s(166),function(e){var t=e.to,s=e.label;console.log(t),console.log(s);var a=Object(l.j)({path:t});a=null!=a&&!!a.isExact;var c=Object(l.h)();console.log(c);Object(l.i)(),Object(l.g)();var o=c.pathname.split("/"),r=document.querySelector("#search");return r&&"search"!==o[1]&&(r.value=""),Object(n.jsx)("div",{className:a?"active nav-links":"nav-links",children:Object(n.jsx)(_.b,{to:t,children:Object(n.jsx)("i",{className:s})})})}),w=(s(167),function(){var e=Object(a.useContext)(h),t=e.axios_request,s=e.isAuthValue,c=Object(i.a)(s,2),o=(c[0],c[1],Object(a.useState)(!1)),r=Object(i.a)(o,2),u=r[0],b=r[1],m=Object(a.useRef)(),O=Object(a.useRef)(),f=Object(a.useState)([]),x=Object(i.a)(f,2),p=x[0],v=x[1],N=Object(a.useState)(""),_=Object(i.a)(N,2),S=_[0],C=_[1],k=Object(a.useState)(!1),y=Object(i.a)(k,2),w=y[0],D=y[1],E=function(){var e=Object(j.a)(d.a.mark((function e(){var s,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:D(!0),s=function(e){e.response?v(e.response.data):C(e.message),D(!1)},n=function(e){D(!1)},t({route:"/login",data:{username:m.current.value,password:O.current.value},method:"POST",axios_error:s,axios_response:n});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(l.g)();return Object(n.jsxs)("div",{className:"Login",children:[S&&Object(n.jsx)("div",{className:"error",children:S}),!S&&Object(n.jsxs)("form",{children:[Object(n.jsx)("div",{className:"head",children:" Login"}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"username",children:"Username:"}),Object(n.jsx)("input",{type:"text",name:"username",id:"username",placeholder:"Enter your username",ref:m})]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"password",children:"Password:"}),Object(n.jsx)("input",{type:"text",name:"password",id:"password",placeholder:"Enter your password",ref:O})]}),function(){var e=[];if(Array.isArray(p))for(var t=0;t<p.length;t++)e.push(Object(n.jsx)("li",{children:p[t].msg},g()()));else e.push(Object(n.jsx)("li",{children:p.msg},g()()));return Object(n.jsx)("ul",{className:"errors",children:e})}(),Object(n.jsxs)("div",{className:"buttons",children:[Object(n.jsx)("div",{className:"login-btn",children:Object(n.jsx)("button",{onClick:function(e){return e.preventDefault(),w||""===m.current.value||""===O.current.value?void 0:E()},children:w?"Logging-in":"Log-in"})}),Object(n.jsx)("div",{className:"signup-btn",onClick:function(e){e.preventDefault(),b(!0)},children:Object(n.jsx)("button",{children:"Sign-up"})})]}),u&&Object(n.jsx)(l.a,{to:"/signup"})]})]})}),D=function(){var e=Object(a.useContext)(h).isAuthValue,t=Object(i.a)(e,2),s=t[0],c=t[1];return Object(a.useEffect)((function(){c(!1)}),[s]),Object(n.jsxs)("div",{className:"Logout",children:[localStorage.clear(),window.location.reload()]})},E=(s(168),function(){var e=Object(a.useContext)(h).axios_request,t=Object(a.useState)(!1),s=Object(i.a)(t,2),c=s[0],o=s[1],r=Object(a.useState)(""),u=Object(i.a)(r,2),d=u[0],j=u[1],b=Object(a.useState)([]),m=Object(i.a)(b,2),O=m[0],f=m[1],x=Object(a.useState)(!1),p=Object(i.a)(x,2),v=p[0],N=p[1],_=Object(a.useRef)(),S=Object(a.useRef)(),C=Object(a.useRef)(),k=Object(a.useRef)();return Object(n.jsxs)("div",{className:"Signup",children:[d&&Object(n.jsx)("div",{className:"error",children:d}),!d&&Object(n.jsxs)("form",{children:[Object(n.jsx)("div",{className:"head",children:"Signup"}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"fname",children:"First Name:"}),Object(n.jsx)("input",{type:"text",name:"fname",id:"fname",placeholder:"Enter your First Name",ref:_})]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"lname",children:"Last Name:"}),Object(n.jsx)("input",{type:"text",name:"lname",id:"lname",placeholder:"Enter your Last Name",ref:S})]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"username",children:"Username:"}),Object(n.jsx)("input",{type:"text",name:"username",id:"username",placeholder:"Enter your username",ref:C})]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"password",children:"Password:"}),Object(n.jsx)("input",{type:"text",name:"password",id:"password",placeholder:"Enter your password",ref:k})]}),function(){var e=[];if(Array.isArray(O))for(var t=0;t<O.length;t++)e.push(Object(n.jsx)("li",{children:O[t].msg},g()()));else e.push(Object(n.jsx)("li",{children:O.msg},g()()));return Object(n.jsx)("ul",{className:"errors",children:e})}(),Object(n.jsxs)("div",{className:"buttons",children:[Object(n.jsx)("div",{className:"signup-btn",children:Object(n.jsx)("button",{onClick:function(t){return t.preventDefault(),v?void 0:(N(!0),void e({route:"/signup",data:{fname:_.current.value,lname:S.current.value,username:C.current.value,password:k.current.value},method:"POST",axios_error:function(e){e.response?f(e.response.data):j(e.message),N(!1)},axios_response:function(e){N(!1),f([]),j("")}}))},children:v?"signing-in":"Sign-up"})}),Object(n.jsx)("div",{className:"login-btn",onClick:function(e){e.preventDefault(),o(!0)},children:Object(n.jsx)("button",{children:"Login"})})]}),c&&Object(n.jsx)(l.a,{to:"/login"})]})]})}),F=(s(169),s(170),function(){var e=Object(a.useContext)(h).searchValue,t=Object(i.a)(e,2),s=(t[0],t[1]),c=Object(l.g)(),o=Object(a.useRef)();return Object(n.jsx)("div",{className:"SearchBar",children:Object(n.jsx)("form",{onSubmit:function(e){return e.preventDefault(),console.log(o.current.value),s(!0),""===o.current.value?void 0:(console.log(o.current.value),c.push("/search/".concat(o.current.value)))},children:Object(n.jsx)("input",{type:"text",id:"search",name:"search",ref:o,placeholder:"Search Odinbook"})})})}),P=(s(171),s(172),s(278),function(e){var t=e.value,s=e.index,c=(e.result,e.friendBtn),o=e.setFriendBtn,r=(e.arrg,Object(a.useContext)(h)),l=r.jwtData,u=r.myFriendsValue,d=r.axios_request,j=Object(i.a)(u,2),b=j[0],m=j[1],O=Object(a.useState)(null),f=Object(i.a)(O,2),x=f[0],p=(f[1],Object(a.useState)("")),g=Object(i.a)(p,2),v=g[0],N=g[1],C=Object(a.useState)(!1),k=Object(i.a)(C,2),y=k[0],w=k[1];Object(a.useEffect)((function(){var e=b.findIndex((function(e){return e.username===t.username}));console.log(e),-1!==e&&(c[s]=!0,o(c)),w(!y)}),[]);var D=document.querySelector("#search");return console.log(x),Object(n.jsxs)("div",{className:"SearchResultCard",children:[v&&Object(n.jsx)("div",{className:"error",children:v}),!v&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("div",{className:"profile-picture",children:Object(S.a)(t.fname[0].toLowerCase())}),Object(n.jsxs)("div",{className:"name-container",onClick:function(e){e.stopPropagation(),e.preventDefault(),D.value=""},children:[Object(n.jsx)(_.b,{to:{pathname:"/user/".concat(t.username,"/posts"),state:{userid:t._id,fname:t.fname,lname:t.lname,username:t.username}},children:Object(n.jsxs)("div",{className:"name",children:[Object(n.jsxs)("span",{children:[t.fname," "]}),Object(n.jsx)("span",{children:t.lname})]})}),Object(n.jsx)("div",{className:"username",children:t.username})]}),t._id!==l.sub&&Object(n.jsx)("div",{className:c[s]?"add-btn fas fa-user-minus":"add-btn fas fa-user-plus",style:{color:c[s]?"red":"blue"},onClick:function(e){e.preventDefault(),e.stopPropagation(),c[s]=!c[s],o(c),w(!y),function(){var e="/friend/".concat(t._id);if(d({route:e,data:"",method:"POST",axios_error:function(e){e.response?console.log(e.response.data):N(e.message)},axios_response:function(e){}}),0==c[s]){var n=b.findIndex((function(e){return e.username==t.username}));-1!==n&&(console.log(n),b.splice(n,1),m(b))}else b.push(t)}()}}),t._id!==l.sub&&Object(n.jsx)("div",{className:"chat-link-container",children:Object(n.jsx)(_.b,{to:{pathname:"/chat",state:{userid:t._id,fname:t.fname,lname:t.lname,username:t.username}},children:Object(n.jsx)("div",{className:"chat-btn fab fa-facebook-messenger"})})})]})]})}),I=function(){var e=Object(a.useContext)(h),t=e.searchValue,s=e.axios_request,c=Object(i.a)(t,2),o=c[0],r=c[1],u=Object(a.useState)([]),d=Object(i.a)(u,2),j=d[0],b=d[1],m=Object(l.i)(),O=Object(a.useState)(""),f=Object(i.a)(O,2),x=f[0],p=f[1],v=Object(a.useState)(!0),N=Object(i.a)(v,2),_=N[0],S=N[1],C=Object(a.useState)([]),k=Object(i.a)(C,2),y=k[0],w=k[1],D=function(){var e="/user/search/".concat(m.name);s({route:e,data:"",method:"GET",axios_error:function(e){e.response?console.log(e.response.data):p(e.message),S(!1)},axios_response:function(e){console.log(e),S(!1),Array.isArray(e.data)?w(e.data):w([e.data]);var t=Array(e.data.length).fill(!1);b(t)}})};Object(a.useEffect)((function(){!0===o&&(D(),r(!1))}),[o]),Object(a.useEffect)((function(){o||m&&(document.querySelector("#search").value=m.name,D())}),[]);var E=[];return console.log(j),Object(n.jsxs)("div",{className:"SearchResult",children:[x&&Object(n.jsx)("div",{className:"error",children:x}),!x&&Object(n.jsxs)(n.Fragment,{children:[_&&"loading...",!_&&(0==y.length?Object(n.jsx)("div",{className:"empty",children:"No users found with this query :("}):y.map((function(e,t){return Object(n.jsx)(P,{value:e,index:t,setResult:w,result:y,friendBtn:j,setFriendBtn:b,arrg:E},g()())})))]})]})},L=(s(279),function(e){var t=e.to,s=e.fname,a=e.lname,c=e.userid,o=e.username,r=e.label,i=Object(l.j)({path:t});return i&&(i=i.isExact,console.log(i)),Object(n.jsx)("div",{className:i?"active nav-links":"nav-links",children:Object(n.jsx)(_.b,{to:{pathname:t,state:{fname:s,lname:a,userid:c,username:o}},children:r})})}),A=s(29),T=s(30),M=function(e){var t=e.objkey,s=e.index,c=e.clickIndex,o=e.setClickIndex,r=(e.result,e.setResult,e.ee),l=e.setee,u=e.jwtData,d=e.userid,j=Object(a.useContext)(h),b=j.myAboutValue,m=(j.didMyAboutMountValue,j.axios_request),O=Object(i.a)(b,2),f=O[0],x=O[1],p=Object(a.useState)(""),g=Object(i.a)(p,2),v=g[0],N=g[1],_=Object(a.useState)(!1),C=Object(i.a)(_,2),k=C[0],y=C[1],w=Object(a.useState)(!1),D=Object(i.a)(w,2),E=D[0],F=D[1],P=Object(a.useState)(Object(T.a)({},t,r[t])),I=Object(i.a)(P,2),L=I[0],M=I[1],U=Object(T.a)({},t,Object(a.useRef)());console.log(U),console.log(t);var V={bio:"Bio",nickName:"Nick-name",school:"School",college:"College",working:"Work Place",relationshipStatus:"Relationhsip Status",book:"Book",food:"Food",gender:"Gender",dob:"Date of birth",email:"Email",phone:"Phone"},q=function(e){console.log(e),e.preventDefault();var s=document.getElementById(t);console.log(s);var n=e.target,a=n.name,c=n.value;if("INPUT"==s.tagName){var o=s.id,r=Object(S.a)(c);if(console.log(r.length),"food"!==o&&"book"!==o){if(console.log(o),r.length>=30)return void y(!0);y(!1)}else if("food"==o||"book"==o){if(r.length>=50)return void y(!0);y(!1)}}M(Object(A.a)(Object(A.a)({},L),{},Object(T.a)({},a,c)))};return Object(a.useEffect)((function(){if(c==s){var e=document.getElementById(t);e.focus(),console.log(e),e.style.border="1px solid blue",e.style.boxShadow="0.3px 0.3px 5px blue",e.style.outline="none",document.getElementById("save-icon-".concat(s)).style.color="blue"}}),[]),console.log(E),Object(n.jsxs)("div",{className:"UserAboutCard",children:[v&&Object(n.jsx)("div",{className:"error",children:v}),!v&&Object(n.jsx)(n.Fragment,{children:Object(n.jsx)("form",{onSubmit:function(e){e.preventDefault()},children:Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:t,children:V[t]}),Object(n.jsxs)("div",{className:"container",children:[c!=s&&Object(n.jsx)("div",{className:"profile-values",children:r[t]||"No ".concat(V[t]," added")}),c==s&&"relationshipStatus"!==t&&"gender"!==t&&"dob"!==t&&"bio"!==t&&Object(n.jsx)("input",{name:t,id:t,value:L[t],onChange:q,maxLength:"food"==t||"book"==t?"50":"30"}),1==k&&Object(n.jsx)("div",{className:"input-tooltip",children:Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("span",{children:"No more than "}),"food"==t||"book"==t?"50":"30",Object(n.jsx)("span",{children:" characters :)"})," "]})}),c==s&&"bio"==t&&Object(n.jsx)("div",{className:"bio-container",children:Object(n.jsx)("textarea",{name:"bio",id:"bio",value:L[t],onChange:q})}),c==s&&"dob"==t&&Object(n.jsx)("input",{type:"date",name:"dob",id:"dob",selected:L[t]?null:"",start:!0}),c==s&&"relationshipStatus"==t&&Object(n.jsxs)("select",{id:"relationshipStatus",name:"relationshipStatus",onChange:q,defaultValue:r[t],children:[Object(n.jsx)("option",{value:"Status",children:"Status"}),Object(n.jsx)("option",{value:"Married",children:"Married"}),Object(n.jsx)("option",{value:"Single",children:"Single"}),Object(n.jsx)("option",{value:"Divorced",children:"Divorced"}),Object(n.jsx)("option",{value:"It's complicated",children:"It's complicated"}),Object(n.jsx)("option",{value:"In a relationship",children:"In relationship"}),Object(n.jsx)("option",{value:"Open Relationship",children:"Open Relationship"}),Object(n.jsx)("option",{value:"Engaged",children:"Engaged"}),Object(n.jsx)("option",{value:"Widowed",children:"Widowed"})]}),c==s&&"gender"===t&&Object(n.jsxs)("select",{id:"gender",name:"gender",onChange:q,defaultValue:r[t],children:[Object(n.jsx)("option",{value:"Male",children:"Male"}),Object(n.jsx)("option",{value:"Female",children:"Female"}),Object(n.jsx)("option",{value:"Transgender",children:"Transgender"}),Object(n.jsx)("option",{value:"Gender Neutral",children:" Gender Neutral"}),Object(n.jsx)("option",{value:"Non Binary",children:"Non Binary"})]})]}),d===u.sub&&c!==s&&Object(n.jsx)("div",{className:"edit-icon fas fa-edit",onClick:function(e){console.log(e),e.preventDefault(),e.stopPropagation(),o(s)}}),u.sub===d&&c==s&&Object(n.jsx)("div",{id:"save-icon-".concat(s),className:"save-icon fas fa-save",onClick:function(e){e.preventDefault(),e.stopPropagation(),""==L.fname||""==L.lname?F(!0):(o(null),r[t]=L[t],l(r),f[t]=L[t],x(f),function(e){console.log(e),e.preventDefault(),console.log(L),""!=L.fname&&""!=L.lname?(console.log(L,"aksamskamskasmk"),m({route:"/myprofile",data:L,method:"PUT",axios_error:function(e){e.response?N(e.response.data):N(e.message)},axios_response:function(e){console.log(e)}})):console.log(L)}(e),F(!1))}}),E&&Object(n.jsx)("div",{className:"empty_name",children:""==L.fname?"First name cannot be empty":"Last name cannot be empty"})]})})})]})},U=(s(280),function(){var e,t=Object(a.useContext)(h),s=t.myAboutValue,c=t.didMyAboutMountValue,o=t.axios_request,r=t.jwtData,u=Object(i.a)(s,2),d=u[0],j=u[1],b=Object(i.a)(c,2),m=b[0],O=b[1],f=Object(a.useState)(),x=Object(i.a)(f,2),p=x[0],v=x[1],N=Object(a.useState)(!0),_=Object(i.a)(N,2),S=_[0],C=_[1],k=Object(a.useState)(""),y=Object(i.a)(k,2),w=(y[0],y[1],Object(a.useState)("")),D=Object(i.a)(w,2),E=D[0],F=D[1],P=Object(l.h)(),I=(P.state.fname,P.state.lname,P.state.username,P.state.userid),L="/profile/".concat(I),A=Object(a.useState)(null),T=Object(i.a)(A,2),U=T[0],V=T[1],q=function(){o({route:L,data:"",method:"GET",axios_error:function(e){e.response?F(e.response.data):F(e.message),C(!1)},axios_response:function(e){I===r.sub&&j(e.data),console.log(e.data),v(e.data),C(!1)}})};Object(a.useEffect)((function(){console.log(r.sub,I),r.sub!==I?q():m?(q(),O(!1)):(v(d),C(!1))}),[P.pathname]),p&&(delete p.user,delete p._id,delete p.__v,e=Object.keys(p),console.log(e));var B=Object(a.useState)(null),R=Object(i.a)(B,2),G=R[0],H=R[1],W=Object(a.useState)({}),J=Object(i.a)(W,2),Y=J[0],z=J[1];return Object(a.useEffect)((function(){if(p)for(var t={},s=0;s<e.length;s++)t[e[s]]=p[e[s]],s===e.length-1&&z(t)}),[p]),console.log(Y),Object(a.useEffect)((function(){window.addEventListener("keydown",(function(e){"Escape"==e.key&&V(null)}))}),[]),Object(n.jsxs)("div",{className:"UserAbout",children:[E&&Object(n.jsx)("div",{className:"error",children:E}),!E&&Object(n.jsxs)(n.Fragment,{children:[S&&Object(n.jsx)("div",{className:"loading-container",children:Object(n.jsx)("div",{className:"spinner-border loading",role:"status",children:Object(n.jsx)("span",{className:"sr-only"})})}),!S&&e.map((function(e,t){return Object(n.jsx)(M,{objkey:e,index:t,clickIndex:U,setClickIndex:V,result:p,setResult:v,ee:Y,setee:z,tooltip:G,setTooltip:H,userid:I,jwtData:r},g()())}))]})]})}),V=(s(101),s(281),s(282),s(283),function(e){var t=e.setComments,s=e.postIndex,c=e.route,o=e.method,r=(e.updateValue,e.comments),l=e.pp,u=e.setpp,d=Object(a.useContext)(h),j=d.jwtData,b=d.axios_request;console.log(r);var m=Object(a.useRef)(),O=Object(a.useState)([]),f=Object(i.a)(O,2),x=f[0],p=f[1],v=Object(a.useState)(""),N=Object(i.a)(v,2),_=N[0],S=N[1];return console.log(m),Object(n.jsxs)("div",{className:"CommentForm",children:[_&&Object(n.jsx)("div",{className:"error",children:_}),!_&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("div",{className:"profile-picture",children:[j.fname[0].toLowerCase()]}),Object(n.jsx)("form",{onSubmit:function(e){e.preventDefault(),console.log(m),""!=m.current.value&&(console.log(m.current.value),function(){var e;if(e=document.querySelector("#post-".concat(s)),r.comment_list.push({comment:m.current.value,user:{fname:j.fname,lname:j.lname,username:j.user,_id:j.sub}}),t(r),u(!l),console.log(s),e){var n=e.querySelector("#post-".concat(s," .empty"));n&&(n.style.display="none")}console.log(e),b({route:c,data:{comment:m.current.value},method:o,axios_error:function(e){console.log(e),e.response?(console.log(e.response.data),p(e.response.data)):S(e.message)},axios_response:function(e){p([])}}),m.current.value=""}())},autoComplete:"off",children:Object(n.jsx)("input",{type:"text",name:"comment",id:"comment",placeholder:"Write a comment...",ref:m})}),function(){var e=[];if(Array.isArray(x))for(var t=0;t<x.length;t++)e.push(Object(n.jsx)("li",{children:x[t].msg},g()()));else e.push(Object(n.jsx)("li",{children:x.msg},g()()));return Object(n.jsx)("ul",{className:"errors",children:e})}()]})]})}),q=(s(284),s(285),function(e){var t=e.postid,s=e.index,c=e.setComments,o=e.commentid,r=(e.commentDeleteClick,e.setCommentDeleteClick,e.comments),l=e.setCommentOptionIndex,u=e.pp,d=e.setpp;console.log(r);var j=Object(a.useContext)(h).axios_request,b="/post/".concat(t,"/comment/").concat(o),m=Object(a.useState)(!1),O=Object(i.a)(m,2),f=(O[0],O[1]),x=Object(a.useState)(""),p=Object(i.a)(x,2),g=p[0],v=p[1];return Object(a.useEffect)((function(){console.log(s),r[s]=r.comment_list.splice(s,1),console.log(r),c(r),d(!u),l(null),j({route:b,data:"",method:"DELETE",axios_error:function(e){e.response?v(e.response.data):v(e.message),f(!1)},axios_response:function(e){f(!1)}})}),[]),console.log(r),Object(n.jsx)("div",{className:"CommentDelete",children:g&&Object(n.jsxs)("div",{className:"error",children:[Object(n.jsx)("div",{children:g}),Object(n.jsx)("div",{children:"Please try refreshing the Page :("})]})})}),B=function(e){var t=e.comment,s=e.index,c=(e.postIndex,e.path),o=e.commentOptionIndex,r=e.setCommentOptionIndex,u=e.postid,d=e.comments,j=e.setComments,b=e.pp,m=e.setpp,O=Object(a.useContext)(h).jwtData,f=Object(l.h)();f.state&&f.state.userid;var x=Object(a.useState)(!1),p=Object(i.a)(x,2),g=(p[0],p[1],Object(a.useState)(!1)),v=Object(i.a)(g,2),N=v[0],C=v[1];return Object(n.jsxs)("div",{className:"CommentCard",children:[Object(n.jsx)("div",{className:"profile-picture",children:Object(S.a)(t.user.fname[0].toLowerCase())}),Object(n.jsxs)("div",{className:"comment-container",children:[Object(n.jsxs)("div",{className:"name",children:[("userpost"==c&&t.user._id!==O.sub||"newsfeed"==c)&&Object(n.jsxs)(_.b,{to:{pathname:"/user/".concat(t.user.username,"/posts"),state:{fname:t.user.fname,lname:t.user.lname,username:t.user.username,userid:t.user._id}},children:[Object(n.jsxs)("span",{children:[t.user.fname," "]}),Object(n.jsx)("span",{children:t.user.lname})]}),"userpost"===c&&t.user._id===O.sub&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("span",{children:[t.user.fname," "]}),Object(n.jsx)("span",{children:t.user.lname})]})]}),Object(n.jsx)("div",{className:"comment",children:t.comment})]}),Object(n.jsxs)("div",{className:"option-icon",onClick:function(e){e.preventDefault(),e.stopPropagation(),r(o==s?null:s)},children:[Object(n.jsx)("div",{style:{backgroundColor:o==s?"lightgray":""},className:"btn fas fa-ellipsis-v"}),o===s&&Object(n.jsx)("div",{className:"comment-menu",children:Object(n.jsx)("div",{className:"comment-btn delete-comment-btn",onClick:function(e){e.stopPropagation(),e.preventDefault(),C(!N)},children:"Delete"})}),N&&Object(n.jsx)(q,{postid:u,index:s,setComments:j,comments:d,commentid:t._id,commentDeleteClick:N,setCommentDeleteClick:C,pp:b,setpp:m,setCommentOptionIndex:r})]})]})},R=(s(102),function(e){var t=e.value,s=e.index,c=e.friendBtn,o=e.setFriendBtn,r=e.myFriends,l=e.setMyFriends,u=Object(a.useState)(!1),d=Object(i.a)(u,2),j=d[0],b=d[1],m=Object(a.useContext)(h),O=m.axios_request,f=m.jwtData,x=Object(a.useState)(""),p=Object(i.a)(x,2),g=p[0],v=p[1];return console.log(t.username),Object(a.useEffect)((function(){var e=r.findIndex((function(e){return e.username===t.username}));console.log(e),-1!==e&&(c[s]=!0,o(c)),b(!j)}),[]),Object(n.jsxs)("div",{className:"UserLikesCard",children:[g&&Object(n.jsx)("div",{className:"error",children:g}),!g&&Object(n.jsxs)(n.Fragment,{children:[" ",Object(n.jsx)("div",{className:"profile-picture",children:Object(S.a)(t.fname[0].toLowerCase())}),Object(n.jsxs)("div",{className:"name",children:[Object(n.jsx)("span",{children:t.fname}),Object(n.jsx)("span",{children:t.lname})]}),f.sub!==t._id&&Object(n.jsx)("div",{className:"add-btn-container",onClick:function(){c[s]=!c[s],o(c),b(!j),function(){var e="/friend/".concat(t._id);if(O({route:e,data:"",method:"POST",axios_error:function(e){e.response?v(e.response.data):v(e.message)},axios_response:function(e){}}),console.log(c[s]),0==c[s]){var n=r.findIndex((function(e){return e.username==t.username}));-1!==n&&(console.log(n),r.splice(n,1),l(r))}else r.push(t);console.log(r)}()},style:{color:c[s]?"red":"blue"},children:Object(n.jsx)("div",{className:c[s]?"add-btn fas fa-user-minus":"add-btn fas fa-user-plus"})})]})]})}),G=function(e){var t=e.postid,s=e.setUsersLikedIndex,c=e.userid,o=Object(a.useContext)(h),r=o.axios_request,u=o.jwtData,d=o.myFriendsValue,j=o.didMyFriendsMountValue,b=Object(a.useState)(""),m=Object(i.a)(b,2),O=m[0],f=m[1],x=Object(a.useState)([]),p=Object(i.a)(x,2),v=p[0],N=p[1],_=Object(i.a)(d,2),S=_[0],C=_[1],k=Object(i.a)(j,2),y=k[0],w=k[1],D=Object(a.useState)([]),E=Object(i.a)(D,2),F=E[0],P=E[1],I=Object(l.i)();console.log(I);var L=Object(l.i)();console.log(L);return Object(a.useEffect)((function(){!function(){var e="/post/".concat(t,"/like");r({route:e,method:"GET",data:"",axios_error:function(e){e.response?f(e.response.data):f(e.message)},axios_response:function(e){N(e.data.like),console.log(S);var t=Array(e.data.like.length).fill(!1);P(t)}})}(),console.log("didmyfriendsmount=",y),y&&(!function(){var e="/friend/".concat(u.sub);r({route:e,data:"",method:"GET",axios_error:function(e){e.response?f(e.response.data):f(e.message)},axios_response:function(e){C(e.data)}})}(),w(!1))}),[]),Object(n.jsxs)("div",{className:"UserLikes",children:[O&&Object(n.jsx)("div",{className:"error",children:O}),!O&&Object(n.jsxs)("div",{className:"box",children:[Object(n.jsx)("div",{className:'form-close-btn fas fa-times-circle"',children:Object(n.jsx)("button",{onClick:function(e){e.preventDefault(),e.stopPropagation(),s(null)},className:"fas fa-times-circle"})}),v.map((function(e,t){return Object(n.jsx)(R,{value:e,index:t,friendBtn:F,setFriendBtn:P,myFriends:S,setMyFriends:C,userid:c},g()())}))]})]})},H=function(e){var t=e.postid,s=e.setComments,a=e.postIndex,c=e.comments,o=e.pp,r=e.setpp,i="/post/".concat(t,"/comment");return Object(n.jsx)("div",{className:"CommentCreate",children:Object(n.jsx)(V,{setComments:s,postIndex:a,route:i,method:"POST",comments:c,pp:o,setpp:r})})},W=function(e){var t,s,c,o=e.value,r=e.index,u=e.setPostid,d=e.setUpdateClick,j=e.setUpdateData,b=e.setUpdateIndex,m=e.indexOfCardClicked,O=e.setindexOfCardClicked,f=e.isOwner,x=e.setDeleteClick,p=(e.deleteClick,e.likeLength),v=e.setLikeLength,N=(e.setPostIndex,e.likeClick),C=e.setLikeClick,k=e.postsLength,y=e.path,w=Object(a.useState)(""),D=Object(i.a)(w,2),E=D[0],F=D[1],P=Object(a.useState)(""),I=Object(i.a)(P,2),L=I[0],A=I[1],T=Object(a.useState)([]),M=Object(i.a)(T,2),U=M[0],V=M[1],q=Object(a.useState)(!1),R=Object(i.a)(q,2),W=R[0],J=R[1],Y=Object(a.useState)(!0),z=Object(i.a)(Y,2),K=z[0],Q=z[1],X=Object(a.useState)(!0),Z=Object(i.a)(X,2),$=Z[0],ee=Z[1],te=Object(a.useState)(null),se=Object(i.a)(te,2),ne=se[0],ae=se[1],ce=Object(a.useContext)(h),oe=ce.jwtData,re=ce.axios_request,ie=Object(a.useState)(null),le=Object(i.a)(ie,2),ue=le[0],de=le[1],je=Object(l.h)();"userpost"==y&&(t=je.state.fname,s=je.state.lname,c=je.state.username,je.state.userid);var be=o.like.includes(oe.sub),me=Object(a.useState)(!1),Oe=Object(i.a)(me,2),fe=Oe[0],he=Oe[1];return console.log(U),Object(a.useEffect)((function(){console.log("hello"),p.length<k&&(N.push(be),C(N),p.push(o.like.length),v(p),he(!fe)),console.log("likeClick.length=",N.length,"likeLength=",p.length,"postslength=",k)}),[]),Object(a.useEffect)((function(){var e=document.querySelector("#post-".concat(r));if(console.log(e),e){console.log(e);var t=e.scrollHeight;console.log(t),e.scrollTo(0,t)}}),[fe,W,K]),Object(n.jsxs)("div",{className:"UserPostCard",children:[Object(n.jsxs)("div",{className:"head",children:[Object(n.jsx)("div",{className:"profile-picture",children:t?Object(S.a)(t[0].toLowerCase()):Object(S.a)(o.user.fname[0].toLowerCase())}),Object(n.jsxs)("div",{className:"name-container",children:[Object(n.jsx)("div",{className:"name",children:Object(n.jsxs)(_.b,{to:{pathname:"/user/".concat(o.user.username,"/posts"),state:{userid:o.user._id,fname:o.user.fname,lname:o.user.lname,username:o.user.username}},children:[Object(n.jsxs)("span",{children:[t||o.user.fname," "]}),Object(n.jsx)("span",{children:s||o.user.lname})]})}),Object(n.jsx)("div",{className:"username",children:c||o.user.username})]}),f&&Object(n.jsxs)("div",{className:"option-btn",onClick:function(e){e.preventDefault(),O(m==r?null:r)},children:[Object(n.jsx)("div",{className:"btn",style:{backgroundColor:m==r?"darkgray":"",borderRadius:"4px"},children:"\u22ee"}),m==r&&Object(n.jsxs)("div",{className:"hamburger-menu",children:[Object(n.jsxs)("div",{className:"menu-btn edit-button-container",onClick:function(e){e.preventDefault(),e.stopPropagation(),O(null),d(!0),j(o),u(o._id),b(r)},children:[Object(n.jsx)("div",{className:"far fa-edit icon"}),Object(n.jsx)("div",{className:"label",children:"Edit post"})]}),Object(n.jsxs)("div",{className:"menu-btn delete-btn-container",onClick:function(e){e.preventDefault(),e.stopPropagation(),O(null),x(!0),u(o._id),b(r)},children:[Object(n.jsx)("div",{className:"far fa-trash-alt icon"}),Object(n.jsx)("div",{className:"label",children:"Delete post"})]})]})]})]}),Object(n.jsxs)("div",{className:"post-content-container",children:[Object(n.jsx)("div",{className:"post-title",children:o.title}),Object(n.jsx)("div",{className:"post-content",children:o.content_text})]}),!E&&Object(n.jsx)("div",{className:"error",children:E}),E&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("div",{className:"no-like",onClick:function(e){e.preventDefault(),e.stopPropagation(),de(r)},children:[Object(n.jsxs)("span",{children:[p[r]," "]}),Object(n.jsx)("span",{children:" "}),Object(n.jsxs)("span",{children:[" ",1==p[r]?"like":"likes"]})]}),ue===r&&Object(n.jsx)(G,{postid:o._id,userid:o.user._id,setUsersLikedIndex:de})]}),Object(n.jsxs)("div",{className:"card-footer",children:[Object(n.jsx)("div",{style:{color:N[r]?"blue":""},className:"like-icon far fa-thumbs-up",onClick:function(e){e.preventDefault(),function(e){var t="/post/".concat(e,"/like");re({route:t,data:"",method:"POST",axios_error:function(e){e.response?F(e.response.data):F(e.message)},axios_response:function(e){console.log(e)}})}(o._id),console.log(N[r]),1==N[r]?(p[r]=p[r]-1,v(p)):(p[r]=p[r]+1,v(p)),N[r]=!N[r],C(N),he(!fe)}}),Object(n.jsx)("div",{className:"comment-icon far fa-comment-alt",onClick:function(e){e.preventDefault(),$&&(!function(e){var t="/post/".concat(e,"/comment");re({route:t,data:"",method:"GET",axios_error:function(e){e.response?A(e.response.data):A(e.mesage),Q(!1)},axios_response:function(e){console.log(e.data),V(e.data),Q(!1)}})}(o._id),ee(!1)),J(!W)}}),Object(n.jsx)("div",{className:"share-icon far fa-share-square"})]}),Object(n.jsxs)("div",{className:"comment-list",id:"post-".concat(r),children:[W&&L&&Object(n.jsx)("div",{className:"error",children:L}),W&&!L&&K&&"loading...",W&&!L&&!K&&W&&(0==U.comment_list.length?Object(n.jsx)("div",{className:"empty",children:"This post has no comments."}):Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("div",{className:"no-comment",children:[Object(n.jsxs)("span",{children:[U.comment_list.length," "]}),Object(n.jsx)("span",{children:1==U.comment_list.length?" comment":" comments"})]}),U.comment_list.map((function(e,t){return Object(n.jsx)(B,{comment:e,index:t,postIndex:t,path:y,commentOptionIndex:ne,setCommentOptionIndex:ae,postid:o._id,comments:U,setComments:V,pp:fe,setpp:he},g()())}))]}))]}),W&&Object(n.jsx)(H,{postid:o._id,setComments:V,comments:U,postIndex:r,pp:fe,setpp:he},g()())]})},J=(s(286),function(){var e=Object(a.useContext)(h).jwtData;return Object(n.jsx)("div",{className:"WelcomeMsg",id:"welcome_msg_unique",children:Object(n.jsxs)("div",{className:"container-msg",children:["Welcome ",Object(n.jsxs)("span",{children:[e.fname," "]}),Object(n.jsxs)("span",{children:[e.lname," :)"]})]})})}),Y=function(e){var t=e.path,s=Object(a.useContext)(h),c=s.jwtData,o=s.axios_request,r=s.myPostsValue,u=s.didMyPostsMountValue,d=s.myNewsFeedValue,j=s.didMyNewsFeedMountValue,b=s.myFriendsValue,m=Object(i.a)(r,2),O=m[0],f=m[1],x=Object(i.a)(d,2),p=x[0],v=x[1],_=Object(i.a)(j,2),S=_[0],y=_[1],w=Object(i.a)(u,2),D=w[0],E=w[1],F=Object(i.a)(b,2),P=(F[0],F[1],Object(a.useState)("")),I=Object(i.a)(P,2),L=I[0],A=I[1],T=Object(a.useState)(!0),M=Object(i.a)(T,2),U=M[0],V=M[1],q=Object(a.useState)(!1),B=Object(i.a)(q,2),R=B[0],G=B[1],H=Object(a.useState)([]),Y=Object(i.a)(H,2),z=Y[0],K=Y[1],Q=Object(a.useState)(!1),X=Object(i.a)(Q,2),Z=X[0],$=X[1],ee=Object(a.useState)(""),te=Object(i.a)(ee,2),se=te[0],ne=te[1],ae=Object(a.useState)(!1),ce=Object(i.a)(ae,2),oe=ce[0],re=ce[1],ie=Object(a.useState)(!1),le=Object(i.a)(ie,2),ue=le[0],de=le[1],je=Object(a.useState)([]),be=Object(i.a)(je,2),me=be[0],Oe=be[1],fe=Object(a.useState)(""),he=Object(i.a)(fe,2),xe=he[0],pe=he[1],ge=Object(a.useState)(""),ve=Object(i.a)(ge,2),Ne=ve[0],_e=ve[1],Se=Object(a.useState)(""),Ce=Object(i.a)(Se,2),ke=Ce[0],ye=Ce[1],we=Object(a.useState)(null),De=Object(i.a)(we,2),Ee=De[0],Fe=De[1],Pe=Object(l.h)();console.log(Pe);var Ie,Le,Ae,Te=Object(l.g)();console.log(Te),"userpost"==t&&(Ie=Pe.state.userid,Le=Pe.state.fname,Ae=Pe.state.lname);Object(l.i)();var Me=function(){var e;"userpost"==t?e="/posts/".concat(Ie):"newsfeed"===t&&(e="/news-feed");o({route:e,data:"",method:"GET",axios_error:function(e){e.response?A(e.response.data):A(e.message),V(!1)},axios_response:function(e){"newsfeed"==t?v(e.data):Ie===c.sub&&f(e.data),K(e.data),V(!1)}})};console.log(ke),Object(a.useEffect)((function(){"userpost"==t?Ie!==c.sub?(Me(),$(!1)):D?(Me(),$(!0),E(!1)):(K(O),V(!1),$(!0)):"newsfeed"==t&&(S?(Me(),$(!1),y(!1)):(K(p),V(!1),$(!1)))}),[Pe.pathname]);var Ue=Object(a.useState)([]),Ve=Object(i.a)(Ue,2),qe=Ve[0],Be=Ve[1],Re=Object(a.useState)(null),Ge=Object(i.a)(Re,2),He=Ge[0],We=Ge[1];return console.log(Pe),console.log(t),Object(a.useEffect)((function(){if(Pe.state&&("/login"===Pe.state.from||"/signup"===Pe.state.from)){var e=document.querySelector("#welcome_msg_unique");e&&e.addEventListener("click",(function(e){G(!0)}))}}),[]),Object(n.jsxs)("div",{className:"userpost"==t?"UserPost myaccount":"UserPost",children:[L&&Object(n.jsx)("div",{className:"error",children:L}),!L&&Object(n.jsxs)(n.Fragment,{children:[" ",!R&&Pe.state&&("/login"===Pe.state.from||"/signup"===Pe.state.from)&&"newsfeed"===t&&Object(n.jsx)(J,{}),U&&Object(n.jsx)("div",{className:"loading-container",children:Object(n.jsx)("div",{className:"spinner-border loading",role:"status",children:Object(n.jsx)("span",{className:"sr-only"})})}),!U&&Object(n.jsxs)(n.Fragment,{children:[Z&&Object(n.jsx)("div",{children:Object(n.jsx)(C,{user_post_response:function(e){console.log("response",e),K([e.data].concat(z)),f([e.data].concat(O)),console.log([e.data].concat(z))},createClick:oe,setCreateClick:re})}),se&&Object(n.jsx)("div",{children:Object(n.jsx)(N,{postid:Ne,updateClick:se,setUpdateClick:ne,updateData:xe,user_post_response:function(e){z[ke]=e.data,K(z),O[ke]=e.data,f(O)}})}),ue&&Object(n.jsx)(k,{setDeleteClick:de,deleteClick:ue,user_delete_response:function(e){console.log(e),console.log(z),console.log(ke),z.splice(ke,1),K(z),O.splice(ke,1),f(O),de(!1)},postid:Ne}),0==z.length?Object(n.jsxs)("div",{className:"empty-posts",children:["newsfeed"==t&&"Please add friends to see their posts here :)",Z&&"newsfeed"!==t&&"Create new posts to see them here",!Z&&"newsfeed"!==t&&Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)("span",{children:[Le," ",Ae," doesn't have any posts to show :("]})})]}):z.map((function(e,s){return Object(n.jsx)(W,{value:e,index:s,setPostid:_e,setUpdateClick:ne,setUpdateData:pe,setUpdateIndex:ye,indexOfCardClicked:Ee,setindexOfCardClicked:Fe,isOwner:Z,setDeleteClick:de,deleteClick:ue,likeLength:me,setLikeLength:Oe,likeClick:qe,setLikeClick:Be,postsLength:z.length,UserLikedIndex:He,setUsersLikedIndex:We,path:t},g()())}))]})]})]})},z=(s(287),function(e){var t=e.value,s=e.index,c=e.friendBtn,o=e.setFriendBtn,r=e.userid,l=e.isChanged,u=e.setIsChanged,d=e.path;console.log(c[s]);var j=Object(a.useState)(null),b=Object(i.a)(j,2),m=(b[0],b[1],Object(a.useState)("")),O=Object(i.a)(m,2),f=(O[0],O[1]),x=Object(a.useContext)(h),p=x.jwtData,g=x.myFriendsValue,v=x.axios_request,N=Object(i.a)(g,2),C=N[0],k=N[1];console.log("hello");var y=Object(a.useState)(!1),w=Object(i.a)(y,2),D=w[0],E=w[1];return Object(a.useEffect)((function(){var e=C.findIndex((function(e){return e.username===t.username}));console.log(e),-1!==e&&(c[s]=!0,o(c)),E(!D)}),[]),console.log(c[s]),Object(n.jsxs)("div",{className:"UserFriendCard",children:[" ",Object(n.jsx)("div",{className:"profile-picture",children:Object(S.a)(t.fname[0].toLowerCase())}),Object(n.jsxs)("div",{className:"name-container",children:[Object(n.jsx)(_.b,{to:{pathname:"/user/".concat(t.username,"/posts"),state:{userid:t._id,fname:t.fname,lname:t.lname,username:t.username}},children:Object(n.jsxs)("div",{className:"name",children:[Object(n.jsxs)("span",{children:[t.fname," "]}),Object(n.jsx)("span",{children:t.lname})]})}),Object(n.jsx)("div",{className:"username",children:t.username})]}),p.sub!==t._id&&Object(n.jsxs)("div",{className:"add-btn",style:{color:"myfriends"==d||p.sub===r||c[s]?"red":"blue"},onClick:function(){c[s]=!c[s],o(c),E(!D),function(){var e="/friend/".concat(t._id);if(v({route:e,data:"",method:"POST",axios_error:function(e){e.response?f(e.response.data):f(e.message)},axios_response:function(e){}}),p.sub!=r&&"myfriends"!=d||(C.splice(s,1),k(C),u(!l)),p.sub!==r){if(console.log(c[s]),0==c[s]){var n=C.findIndex((function(e){return e.username==t.username}));-1!==n&&(console.log(n),C.splice(n,1),k(C))}else C.push(t);console.log(C)}}()},children:[(p.sub==r||"myfriends"===d)&&Object(n.jsx)("div",{className:"add-btn fas fa-user-minus"}),p.sub!==r&&"myfriends"!==d&&Object(n.jsx)("div",{className:c[s]?"add-btn fas fa-user-minus":"add-btn fas fa-user-plus"})]}),p.sub!==t._id&&Object(n.jsx)("div",{className:"chat-link-container",children:Object(n.jsx)(_.b,{to:{pathname:"/chat",state:{userid:t._id,fname:t.fname,lname:t.lname,username:t.username}},children:Object(n.jsx)("div",{className:"chat-btn fab fa-facebook-messenger"})})})]})}),K=function(e){var t,s,c,o=e.path,r=Object(a.useState)(""),u=Object(i.a)(r,2),d=u[0],j=u[1],b=Object(a.useState)(!0),m=Object(i.a)(b,2),O=m[0],f=m[1],x=Object(a.useState)([]),p=Object(i.a)(x,2),v=p[0],N=p[1],_=Object(a.useState)([]),S=Object(i.a)(_,2),C=S[0],k=S[1],y=Object(a.useState)(!1),w=Object(i.a)(y,2),D=w[0],E=w[1],F=Object(a.useContext)(h),P=F.myFriendsValue,I=F.didMyFriendsMountValue,L=F.axios_request,A=Object(i.a)(I,2),T=A[0],M=A[1],U=Object(i.a)(P,2),V=U[0],q=U[1],B=Object(l.h)();"myfriends"!=o&&(t=B.state.userid,s=B.state.fname,c=B.state.lname);var R=function(){var e;"myfriends"==o?(e="/friend/".concat(G.sub),console.log(o)):(e="/friend/".concat(t),console.log(t));L({route:e,data:"",method:"GET",axios_error:function(e){e.response?j(e.response.data):j(e.message),f(!1)},axios_response:function(e){if("myfriends"==o)q(e.data);else if(t==G.sub)q(e.data);else{var s=Array(e.data.length).fill(!1);k(s)}N(e.data),f(!1)}})},G=Object(a.useContext)(h).jwtData;return Object(a.useEffect)((function(){"myfriends"==o?T?(R(),M(!1)):(N(V),f(!1)):G.sub!==t?R():T?(R(),M(!1)):(N(V),f(!1))}),[B.pathname]),console.log(o),Object(n.jsxs)("div",{className:"myfriends"===o?"UserFriend":"UserFriend myaccount",children:[d&&Object(n.jsx)("div",{className:"error",children:d}),!d&&Object(n.jsxs)(n.Fragment,{children:[O&&Object(n.jsx)("div",{className:"loading-container",children:Object(n.jsx)("div",{className:"spinner-border loading",role:"status",children:Object(n.jsx)("span",{className:"sr-only"})})}),!O&&(0===v.length?Object(n.jsxs)("div",{className:"empty-friends",children:["myfriends"!==o&&G.sub!==t&&Object(n.jsxs)("div",{children:[Object(n.jsxs)("span",{children:[s," "]})," ",Object(n.jsxs)("span",{children:[c," "]}),Object(n.jsx)("span",{children:"has no friends on OdinBook :("})]}),("myfriends"===o||G.sub===t)&&Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{children:"You don't have any friends to show."}),Object(n.jsx)("div",{children:"You can add them by searching their name :)"}),Object(n.jsx)("div",{children:"To search with username, please prefix with '@' :)"})]})]}):v.map((function(e,s){return Object(n.jsx)(z,{value:e,index:s,setError:j,friendBtn:C,setFriendBtn:k,userid:t,isChanged:D,setIsChanged:E,path:o},g()())})))]})]})},Q=(s(103),function(){var e,t,s,c,o=Object(a.useContext)(h),r=o.axios_request,u=o.jwtData,d=o.myFriendsValue,j=o.didMyFriendsMountValue,b=Object(a.useState)(""),m=Object(i.a)(b,2),O=m[0],f=m[1],x=Object(i.a)(d,2),p=x[0],g=x[1],v=Object(i.a)(j,2),N=v[0],_=v[1],S=Object(a.useState)(!1),C=Object(i.a)(S,2),k=C[0],y=C[1],w=Object(a.useState)(!1),D=Object(i.a)(w,2),E=D[0],F=D[1],P=Object(l.h)();P.state&&(e=P.state.userid,s=P.state.fname,c=P.state.lname,t=P.state.username),console.log(t);Object(a.useEffect)((function(){console.log("didmyfriendsmount=",N),N&&(!function(){var e="/friend/".concat(u.sub);r({route:e,data:"",method:"GET",axios_error:function(e){},axios_response:function(e){g(e.data)}})}(),_(!1))}),[]),Object(a.useEffect)((function(){console.log(p);var e=p.findIndex((function(e){return console.log(e.username,t),e.username===t}));console.log(e),F(-1!==e),y(!k)}),[p]),console.log(E);return Object(n.jsxs)("div",{className:"UserDetailFriendBtn",children:[O&&Object(n.jsx)("div",{className:"error",children:O}),!O&&Object(n.jsx)("div",{style:{color:E?"red":"blue"},className:E?"add-btn fas fa-user-minus":"add-btn fas fa-user-plus",onClick:function(n){n.preventDefault(),console.log(E),F(!E),console.log(E),y(!k),function(){var n="/friend/".concat(e);if(r({route:n,data:"",method:"POST",axios_error:function(e){e.response?f(e.response.data):f(e.message)},axios_response:function(e){}}),console.log(E),1==E){var a=p.findIndex((function(e){return e.username==t}));console.log(a),-1!==a&&(console.log(a),p.splice(a,1),g(p))}else p.push({_id:e,username:t,fname:s,lname:c});y(!k)}()}})]})}),X=function(){var e=Object(l.h)(),t=Object(l.i)();console.log(t),console.log(e.state);var s=Object(l.g)();console.log(s);var c,o,r,i,u=Object(a.useContext)(h).jwtData;return e.state.userid&&(o=e.state.fname,r=e.state.lname,i=e.state.username,c=e.state.userid),Object(n.jsxs)("div",{className:"UserDetail",children:[Object(n.jsxs)("div",{className:"user-banner-container",children:[Object(n.jsxs)("div",{className:"user-banner",children:[t.username,Object(n.jsxs)("div",{className:"banner-btn",children:[c&&c!==u.sub&&Object(n.jsx)("div",{className:"chat-link-container",children:Object(n.jsx)(_.b,{to:{pathname:"/chat",state:{userid:c,fname:o,lname:r,username:i}},children:Object(n.jsx)("div",{className:"chat-btn fab fa-facebook-messenger"})})}),c&&c!==u.sub&&Object(n.jsx)(Q,{})]})]}),Object(n.jsx)("div",{className:"name-container",children:Object(n.jsxs)("div",{className:"name",children:[Object(n.jsxs)("span",{children:[e.state.fname," "]}),Object(n.jsxs)("span",{children:[" ",e.state.lname]})]})})]}),Object(n.jsxs)("div",{className:"UserNav",children:[Object(n.jsx)(L,{to:"/user/".concat(t.username,"/posts"),fname:e.state.fname,lname:e.state.lname,userid:e.state.userid,username:e.state.username,label:"Posts"}),Object(n.jsx)(L,{to:"/user/".concat(t.username,"/about"),fname:e.state.fname,lname:e.state.lname,userid:e.state.userid,username:e.state.username,label:"About"}),Object(n.jsx)(L,{to:"/user/".concat(t.username,"/friends"),fname:e.state.fname,lname:e.state.lname,userid:e.state.userid,username:e.state.username,label:"Friends"})]}),Object(n.jsxs)(l.d,{children:[Object(n.jsx)(l.b,{path:"/user/".concat(t.username,"/posts"),children:Object(n.jsx)(Y,{path:"userpost"})}),Object(n.jsx)(l.b,{path:"/user/".concat(t.username,"/about"),children:Object(n.jsx)(U,{})}),Object(n.jsx)(l.b,{path:"/user/".concat(t.username,"/friends"),children:Object(n.jsx)(K,{})})]})]})},Z=(s(288),function(){var e=Object(a.useContext)(h).jwtData;return console.log(e),console.log(e),Object(n.jsxs)("div",{className:"Hamburger",children:[Object(n.jsx)("div",{className:"box-1 box",children:Object(n.jsxs)(_.b,{to:{pathname:"/user/".concat(e.user,"/posts"),state:{fname:e.fname,lname:e.lname,username:e.user,userid:e.sub}},children:[Object(n.jsx)("div",{className:"profile-picture",children:Object(S.a)(e.fname[0].toLowerCase())}),Object(n.jsxs)("div",{className:"nav-link-container",children:[Object(n.jsx)("div",{className:"user label",children:e.user}),Object(n.jsx)("div",{className:"nav-link-desc label",children:"See your profile"})]})]})}),Object(n.jsx)("div",{className:"box-2 box",children:Object(n.jsx)(_.b,{to:"/logout",children:Object(n.jsx)("div",{className:"label",children:"Logout"})})})]})}),$=(s(289),s(290),s(291),function(e){var t,s,a,c=e.value;e.index;return""!==c.createdAt&&(s=(t=new Date(c.createdAt)).getFullYear().toString(),a=Object(S.a)(s)),Object(n.jsx)("div",{className:"ChatMap",children:""!==c.message&&Object(n.jsxs)("div",{className:1==c.isOwner?"me":"person",children:[Object(n.jsx)("div",{className:1==c.isOwner?"curve-right":"curve-left"}),Object(n.jsxs)("div",{className:1==c.isOwner?"right":"left",children:[Object(n.jsx)("div",{className:"message",children:c.message}),Object(n.jsxs)("div",{className:"date-container",children:[Object(n.jsxs)("div",{className:"date",children:[Object(n.jsxs)("span",{children:[t.getDate(),"/"]}),Object(n.jsxs)("span",{children:[t.getMonth()+1,"/"]}),Object(n.jsx)("span",{children:a[2]}),Object(n.jsx)("span",{children:a[3]})]}),Object(n.jsxs)("div",{className:"time",children:[Object(n.jsxs)("span",{children:[t.getHours()>12?t.getHours()-12:0===t.getHours()?12:t.getHours(),":"]}),Object(n.jsx)("span",{children:t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes()}),Object(n.jsx)("span",{children:t.getHours()>12?"pm":"am"})]})]})]})]})})}),ee=function(e){var t=e.fname,s=e.lname,c=e.userid,o=e.username,r=e.msgArr,l=e.setMsgArr;console.log("chatcard");var u=Object(a.useRef)(),d=Object(a.useState)(""),j=Object(i.a)(d,2),b=j[0],m=j[1],O=Object(a.useContext)(h),f=O.jwtData,x=O.socket,p=O.axios_request,v=O.myChatListValue,N=Object(i.a)(v,2),_=N[0],C=N[1];console.log(r);return console.log(u),Object(n.jsxs)("div",{className:"ChatCard",children:[b&&Object(n.jsx)("div",{className:"error",children:b}),!b&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("div",{className:"head-top",children:[Object(n.jsx)("div",{className:"profile-picture",children:Object(S.a)(t)[0].toLowerCase()}),Object(n.jsxs)("div",{className:"name",children:[Object(n.jsxs)("span",{children:[t," "]}),Object(n.jsx)("span",{children:s})]})]}),Object(n.jsx)("form",{children:Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("input",{type:"text",ref:u,name:"msg",id:"msg"}),Object(n.jsx)("div",{className:"send-btn",children:Object(n.jsx)("button",{onClick:function(e){e.preventDefault(),""!==u.current.value&&(function(){var e="/isreadfalse/".concat(c);console.log("hello"),p({route:e,data:"",method:"PUT",axios_response:function(e){},axios_error:function(e){e.response?m(e.response.data):m(e.message)}})}(),function(){var e="/mychat/".concat(f.sub,"/").concat(c);console.log("hello"),p({route:e,data:{last_msg:(new Date).toISOString()},method:"PUT",axios_error:function(e){e.response?m(e.response.data):m(e.message)},axios_response:function(e){}})}(),function(){var e="/mychat/".concat(c,"/").concat(f.sub);console.log("hello"),p({route:e,data:{last_msg:(new Date).toISOString()},method:"PUT",axios_error:function(e){e.response?m(e.response.data):m(e.message)},axios_response:function(e){}}),console.log(c)}(),function(e){var t="/chat/".concat(c);console.log("msg=",e),p({route:t,data:e,method:"PUT",axios_error:function(e){e.response?m(e.response.data):m(e.message)},axios_response:function(e){console.log(c),console.log(e)}})}({message:u.current.value,createdAt:(new Date).toISOString()}),function(){l([].concat(Object(S.a)(r),[{message:u.current.value,createdAt:(new Date).toISOString(),isOwner:!0}])),x.emit("send_message",{to:o,from:{fname:f.fname,lname:f.lname,username:f.user,userid:f.sub},message:u.current.value,createdAt:(new Date).toISOString()});var e=_.findIndex((function(e){return e.user._id===c}));-1!==e?_[e].last_msg=(new Date).toISOString():_.push({last_msg:(new Date).toISOString(),user:{fname:t,lname:s,username:o,_id:c}});var n=_.sort((function(e,t){return t.last_msg<e.last_msg?-1:t.last_msg>e.last_msg?1:0}));C(n),u.current.value=""}())},children:"Send"})})]})}),Object(n.jsx)("div",{className:"chat-map-container",children:r.map((function(e,t){return Object(n.jsx)($,{value:e,index:t},g()())}))})]})]})},te=function(){var e=Object(l.h)(),t=Object(a.useState)(""),s=Object(i.a)(t,2),c=s[0],o=s[1],r=Object(a.useContext)(h),u=r.axios_request,b=r.jwtData,m=r.socket,O=r.isReadValue,f=e.state.fname,x=e.state.lname,p=e.state.userid,g=e.state.username;console.log(p);var v=Object(a.useState)([]),N=Object(i.a)(v,2),_=N[0],C=N[1],k=Object(a.useState)([]),y=Object(i.a)(k,2),w=y[0],D=y[1],E=Object(a.useState)([]),F=Object(i.a)(E,2),P=F[0],I=F[1],L=Object(a.useState)(!0),T=Object(i.a)(L,2),M=T[0],U=T[1],V=Object(a.useState)(!0),q=Object(i.a)(V,2),B=q[0],R=q[1],G=Object(a.useState)([]),H=Object(i.a)(G,2),W=H[0],J=H[1],Y=Object(i.a)(O,2),z=Y[0],K=Y[1];Object(a.useEffect)((function(){m.on("new_msg",(function(e){console.log(e),C([].concat(Object(S.a)(_),[{message:e.message,createdAt:e.createdAt}]))}))}),[m]),console.log(P),Object(a.useEffect)((function(){0!==_.length&&I([].concat(Object(S.a)(P),Object(S.a)(_)))}),[_]),console.log(P,"48 msgArr"),Object(a.useEffect)((function(){(function(){var e=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([Q(),X()]);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()(),Z()}),[]);var Q=function(){console.log("get responses");var e="/chat/".concat(p,"/").concat(b.sub);u({route:e,data:"",method:"GET",axios_error:function(e){e.response?o(e.response.data):o(e.message)},axios_response:function(e){if(console.log(e),0!==e.data.length){var t=e.data.message_container.map((function(e){return Object(A.a)(Object(A.a)({},e),{},{isOwner:!0})}));D(t)}else D([{message:"",createdAt:""}]);console.log(e,"get responses"),R(!1)}})},X=function(){console.log("my messages");var e="/chat/".concat(b.sub,"/").concat(p);u({route:e,data:"",method:"GET",axios_error:function(e){e.response?o(e.response.data):o(e.message)},axios_response:function(e){console.log(e,"get my messages"),0!==e.data.length?J(e.data.message_container):J([{message:"",createdAt:""}]),U(!1)}})};Object(a.useEffect)((function(){if(!M&&!B){var e=[].concat(Object(S.a)(w),Object(S.a)(W));console.log(e);var t=e.sort((function(e,t){return e.createdAt<t.createdAt?-1:e.createdAt>t.createdAt?1:0}));console.log(t),I(t)}}),[M,B]);var Z=function(){var e="/isreadtrue/".concat(p);if(u({route:e,data:"",method:"PUT",axios_error:function(e){c.response?o(e.response.data):o(e.message)},axios_response:function(e){}}),z.length>0){var t=z.findIndex((function(e){return e.user===p}));-1!==t&&(z[t].isread=[],z[t].isread.push(!0),K(z))}};return Object(a.useEffect)((function(){var e=document.querySelector(".Chat");console.log(e);var t=e.scrollHeight;console.log(t),e.scrollTo(0,t)}),[P]),console.log(M,B),console.log(P),Object(n.jsxs)("div",{className:"Chat",children:[c&&Object(n.jsx)("div",{className:"error",children:c}),!c&&Object(n.jsxs)(n.Fragment,{children:[M&&B&&Object(n.jsx)("div",{className:"loading-container",children:Object(n.jsx)("div",{className:"spinner-border loading",role:"status",children:Object(n.jsx)("span",{className:"sr-only"})})}),!M&&!B&&Object(n.jsx)(ee,{fname:f,lname:x,userid:p,username:g,msgArr:P,setMsgArr:I,responseloading:B})]})]})},se=function(e){for(var t,s=e.value,a=(e.index,e.isRead),c=0;c<a.length;c++)if(a[c].user===s.user._id){if(1==a[c].isread[0])break;t=a[c].isread.length}var o=new Date(s.last_msg).getMinutes(),r=new Date(s.last_msg).getHours(),i=new Date(s.last_msg).getDate(),l=new Date(s.last_msg).getMonth()+1,u=new Date(s.last_msg).getFullYear(),d=Object(S.a)(u.toString());return Object(n.jsx)("div",{className:"ChatListCard",children:Object(n.jsxs)(_.b,{to:{pathname:"/chat",state:{userid:s.user._id,fname:s.user.fname,lname:s.user.lname,username:s.user.username}},children:[Object(n.jsx)("div",{className:"profile-picture",children:Object(S.a)(s.user.fname)[0].toLowerCase()}),Object(n.jsx)("div",{className:"name",children:Object(n.jsxs)("div",{children:[Object(n.jsxs)("span",{children:[s.user.fname," "]}),Object(n.jsxs)("span",{children:[s.user.lname," "]})]})}),Object(n.jsxs)("div",{className:"read-container",children:[Object(n.jsx)("div",{className:"read",children:Object(n.jsx)("div",{className:t?"show-read isread":"show-read",children:t||""})}),Object(n.jsxs)("div",{className:"date-container",children:[Object(n.jsxs)("div",{className:"date",children:[Object(n.jsxs)("span",{children:[i,"/"]}),Object(n.jsxs)("span",{children:[l,"/"]}),Object(n.jsx)("span",{children:d[2]}),Object(n.jsx)("span",{children:d[3]})]}),Object(n.jsxs)("div",{className:"time",children:[Object(n.jsxs)("span",{children:[r>12?r-12:0===r?12:r,":"]}),Object(n.jsx)("span",{children:o<10?"0"+o:o}),Object(n.jsx)("span",{children:r>12?"pm":"am"})]})]})]})]})})},ne=(s(292),function(){var e=Object(a.useContext)(h),t=e.axios_request,s=(e.jwtData,e.myChatListValue),c=e.didMyChatListMountValue,o=e.isReadValue,r=e.socket,l=Object(i.a)(o,2),u=l[0],d=l[1],j=Object(i.a)(s,2),b=j[0],m=j[1],O=Object(i.a)(c,2),f=O[0],x=O[1],p=Object(a.useState)(!0),v=Object(i.a)(p,2),N=v[0],_=v[1],C=Object(a.useState)(!0),k=Object(i.a)(C,2),y=k[0],w=k[1],D=Object(a.useState)([]),E=Object(i.a)(D,2),F=E[0],P=E[1],I=Object(a.useState)(!1),L=Object(i.a)(I,2),A=L[0],T=L[1],M=Object(a.useState)(""),U=Object(i.a)(M,2),V=U[0],q=U[1];return Object(a.useEffect)((function(){f?(t({route:"/mychat",data:"",method:"GET",axios_error:function(e){e.response?q(e.response.data):q(e.message)},axios_response:function(e){var t=e.data.received,s=e.data.sent;s.length>0&&t.forEach((function(e){var t=s.findIndex((function(t){return t.user._id===e.user._id}));-1!==t&&s.splice(t,1)}));var n=[].concat(Object(S.a)(t),Object(S.a)(s)).sort((function(e,t){return t.last_msg<e.last_msg?-1:t.last_msg>e.last_msg?1:0}));m(n),_(!1)}}),t({route:"/isread",data:"",method:"GET",axios_response:function(e){d(e.data.users),w(!1)},axios_error:function(e){e.response?q(e.response.data):q(e.message)}}),x(!1)):(w(!1),_(!1))}),[A]),Object(a.useEffect)((function(){r.on("new_msg",(function(e){P(e)}))}),[r]),Object(a.useEffect)((function(){if(0!==F.length){console.log("tempisread=",F),console.log("isread=",u);var e=u.findIndex((function(e){return e.user===F.from.userid}));console.log("is-read-index=",e),-1!==e?(!0===u[e].isread[0]&&u[e].isread.splice(0,1),u[e].isread.push(!1)):u.push({user:F.from.userid,isread:[!1]}),d(u);var t=b.findIndex((function(e){return e.user._id===F.from.userid}));console.log("check=",t),console.log(b),-1!==t?b[t].last_msg=(new Date).toISOString():b.push({last_msg:(new Date).toISOString(),user:{fname:F.from.fname,lname:F.from.lname,username:F.from.username,_id:F.from.userid}});var s=b.sort((function(e,t){return t.last_msg<e.last_msg?-1:t.last_msg>e.last_msg?1:0}));m(s),T(!A)}}),[F]),console.log(b),Object(n.jsxs)("div",{className:"ChatList",children:[V&&Object(n.jsx)("div",{className:"errorr",children:V}),!V&&Object(n.jsxs)(n.Fragment,{children:[N&&y&&Object(n.jsx)("div",{className:"loading-container",children:Object(n.jsx)("div",{className:"spinner-border loading",role:"status",children:Object(n.jsx)("span",{className:"sr-only"})})}),!N&&!y&&(0===b.length?Object(n.jsx)("div",{className:"empty-chatlist",children:"Please start a conversation with someone to see it here."}):b.map((function(e,t){return Object(n.jsx)(se,{value:e,index:t,isRead:u},g()())})))]})]})}),ae=function(){var e=Object(l.h)(),t=e.state&&e.state.background,s=Object(a.useState)(!1),c=Object(i.a)(s,2),o=c[0],r=c[1],u=Object(a.useContext)(h),d=u.isAuthValue,j=(u.jwtData,Object(i.a)(d,2)),b=j[0];j[1],Object(l.g)();console.log(e);var m=e.pathname,O=Object(a.useRef)();return O.current&&console.log(O.current),console.log(m),Object(a.useEffect)((function(){window.addEventListener("click",(function(e){try{e.stopPropagation(),e.preventDefault();for(var t=e.target.classList,s=0;s<t.length;s++){var n=document.querySelector(".".concat(t[s]));if(null==n)return;var a=n.classList;"drop-btn"!==a[s].toString()&&null!==a[s]&&"ham-icon"!==a[s]&&"close-icon"!==a[s]&&r(!1),t=[]}t=[]}catch(c){console.log(c.message)}}))}),[]),console.log(m),Object(n.jsxs)("div",{className:"Home",children:[!b&&Object(n.jsx)("div",{className:"odin-book",children:"OdinBook"}),!b&&("/signup"===m?Object(n.jsx)(l.a,{to:"/signup"}):Object(n.jsx)(l.a,{to:"/login"})),b&&("/login"===m||"/signup"===m)&&Object(n.jsx)(l.a,{to:{pathname:"/",state:{from:m}}}),b&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("div",{className:"Navigation",children:[Object(n.jsx)(F,{}),Object(n.jsxs)("div",{className:"left-nav",children:[Object(n.jsx)(y,{to:"/",label:"fas fa-home"}),Object(n.jsx)(y,{to:"/friends",label:"fas fa-user-friends"}),Object(n.jsx)(y,{to:"/mychat",label:"fab fa-facebook-messenger"}),Object(n.jsx)("div",{style:{color:o?"red":""},className:"drop-btn ",onClick:function(e){e.stopPropagation(),r(!o)},ref:O,children:o?Object(n.jsx)("div",{className:"close-icon fas fa-times-circle"}):Object(n.jsx)("div",{className:"ham-icon fa fa-caret-down"})})]})]}),o?Object(n.jsx)(Z,{}):""]}),Object(n.jsxs)(l.d,{location:t||e,children:[b&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(l.b,{exact:!0,path:"/",children:Object(n.jsx)(Y,{path:"newsfeed"})}),Object(n.jsx)(l.b,{exect:!0,path:"/user/:username",children:Object(n.jsx)(X,{})}),Object(n.jsx)(l.b,{path:"/search/:name",children:Object(n.jsx)(I,{})}),Object(n.jsx)(l.b,{path:"/logout",children:Object(n.jsx)(D,{})}),Object(n.jsx)(l.b,{exact:!0,path:"/friends",children:Object(n.jsx)(K,{path:"myfriends"})}),Object(n.jsx)(l.b,{path:"/chat",children:Object(n.jsx)(te,{})}),Object(n.jsx)(l.b,{path:"/mychat",children:Object(n.jsx)(ne,{})})]}),!b&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(l.b,{path:"/signup",children:Object(n.jsx)(E,{})}),Object(n.jsx)(l.b,{path:"/login",children:Object(n.jsx)(w,{})})]})]})]})};var ce=function(){return Object(n.jsx)("div",{className:"App",children:Object(n.jsx)(ae,{})})},oe=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,294)).then((function(t){var s=t.getCLS,n=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;s(e),n(e),a(e),c(e),o(e)}))};r.a.render(Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)(x,{children:Object(n.jsx)(_.a,{children:Object(n.jsx)(ce,{})})})}),document.getElementById("root")),oe()}},[[293,1,2]]]);
//# sourceMappingURL=main.13d7cf6f.chunk.js.map