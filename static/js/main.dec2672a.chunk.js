(this["webpackJsonpreact-frontend"]=this["webpackJsonpreact-frontend"]||[]).push([[0],{127:function(e,t,s){},128:function(e,t,s){},129:function(e,t,s){},130:function(e,t,s){},131:function(e,t,s){},132:function(e,t,s){},133:function(e,t,s){},134:function(e,t,s){},135:function(e,t,s){},136:function(e,t,s){},137:function(e,t,s){},138:function(e,t,s){},139:function(e,t,s){},140:function(e,t,s){},141:function(e,t,s){},142:function(e,t,s){},143:function(e,t,s){},144:function(e,t,s){},145:function(e,t,s){},146:function(e,t,s){},147:function(e,t,s){"use strict";s.r(t);var a=s(0),n=s(1),c=s.n(n),r=s(65),i=s.n(r),o=(s(73),s(74),s(2)),l=s(6),d=s(3),u=(s(75),function(e){var t=e.to,s=e.label,n=Object(l.j)({path:t});n=null!=n&&!!n.isExact;var c=Object(l.h)().pathname.split("/"),r=document.querySelector("#search");return r&&"search"!==c[1]&&(r.value=""),Object(a.jsx)("div",{className:n?"active nav-links":"nav-links",children:Object(a.jsx)(d.b,{to:t,children:Object(a.jsx)("i",{className:s})})})}),j=s(12),b=s.n(j),m=s(18),O=s(30),f=s.n(O),h=s(67),x=s.n(h),p=Object(n.createContext)(),v=function(e){var t,s=e.children,c=Object(n.useState)(!1),r=Object(o.a)(c,2),i=r[0],l=r[1],d=Object(n.useState)({search:""}),u=Object(o.a)(d,2),j=u[0],O=u[1],h=Object(n.useState)([]),v=Object(o.a)(h,2),g=v[0],N=v[1],_=Object(n.useState)(!0),S=Object(o.a)(_,2),C=S[0],y=S[1],k=Object(n.useState)({}),w=Object(o.a)(k,2),D=w[0],E=w[1],F=Object(n.useState)(!0),P=Object(o.a)(F,2),I=P[0],L=P[1],T=Object(n.useState)([]),A=Object(o.a)(T,2),M=A[0],U=A[1],V=Object(n.useState)(!0),q=Object(o.a)(V,2),B=q[0],R=q[1],G=Object(n.useState)([]),H=Object(o.a)(G,2),W=H[0],J=H[1],Y=Object(n.useState)(!0),z=Object(o.a)(Y,2),K=z[0],Q=z[1],X=Object(n.useState)([]),Z=Object(o.a)(X,2),$=Z[0],ee=Z[1],te=Object(n.useState)([]),se=Object(o.a)(te,2),ae=se[0],ne=se[1],ce=Object(n.useState)(!0),re=Object(o.a)(ce,2),ie=re[0],oe=re[1],le=Object(n.useState)(!0),de=Object(o.a)(le,2),ue=de[0],je=de[1],be=Object(n.useState)(!1),me=Object(o.a)(be,2),Oe=me[0],fe=me[1],he=Object(n.useState)(),xe=Object(o.a)(he,2),pe=xe[0],ve=xe[1],ge="https://odinbook12.herokuapp.com/odinbook",Ne=function(){var e=Object(m.a)(b.a.mark((function e(t){var s,a,n,c,r,i,o,l;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=t.route,a=t.data,n=t.method,c=t.axios_error,r=t.axios_response,null===pe&&"/login"!==s&&"/signup"!==s){e.next=19;break}return e.prev=2,"/login"!==s&&"/signup"!==s&&(i=pe.token,o={authorization:"Bearer ".concat(i)}),e.next=6,f()({url:"".concat(ge).concat(s),method:n,headers:o||"",data:a});case 6:l=e.sent,"/login"!==s&&"/signup"!==s||(localStorage.setItem("jwtData",JSON.stringify(l.data.jwtData)),ve(l.data.jwtData)),fe(!0),console.log("Utils Response=",l),r(l),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(2),e.t0.response?(console.log("Utils Error",e.t0.response.data),403===e.t0.response.status&&fe(!1)):console.log("Utils Error",e.t0.message),c(e.t0);case 17:e.next=21;break;case 19:console.log("Utils Error= NO JWT TOKEN"),fe(!1);case 21:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t){return e.apply(this,arguments)}}(),_e=Object(n.useState)(""),Se=Object(o.a)(_e,2),Ce=Se[0],ye=Se[1],ke=function(){var e=Object(m.a)(b.a.mark((function e(){var s,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/isUserAuth","GET",e.prev=2,s=pe.token,t={authorization:"Bearer ".concat(s)},e.next=7,f()({url:"".concat(ge).concat("/isUserAuth"),method:"GET",data:s,headers:t});case 7:a=e.sent,console.log("response from context login",a),fe(!0),je(!1),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(2),console.log("error from context login",e.t0),je(!1),e.t0.response&&403==e.t0.response.status&&fe(!1);case 18:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){if(console.log(Oe),!Oe){var e=localStorage.getItem("jwtData");e?(ve(e),ke()):(fe(!1),je(!1))}}),[Oe]),Object(n.useEffect)((function(){if(Oe){var e=x()("https://odinbook12.herokuapp.com/odinbook",{withCredentials:!0});ye(e),pe&&e.emit("join",pe.user)}}),[Oe]),Object(a.jsx)(p.Provider,{value:{searchValue:[i,l],searchBarStateValue:[j,O],jwtData:pe,myFriendsValue:[g,N],didMyFriendsMountValue:[C,y],myAboutValue:[D,E],myPostsValue:[M,U],didMyPostsMountValue:[B,R],myNewsFeedValue:[W,J],didMyNewsFeedMountValue:[K,Q],didMyAboutMountValue:[I,L],isAuthValue:[Oe,fe],socket:Ce,axios_request:Ne,myChatListValue:[$,ee],isReadValue:[ae,ne],didMyChatListMountValue:[ie,oe]},children:ue?Object(a.jsx)("div",{className:"loading",children:"loading context...."}):s})},g=s(5),N=s.n(g),_=(s(127),function(){var e=Object(n.useContext)(p),t=e.axios_request,s=(e.isAuthValue,Object(n.useState)(!1)),c=Object(o.a)(s,2),r=c[0],i=c[1],d=Object(n.useRef)(),u=Object(n.useRef)(),j=Object(n.useState)([]),O=Object(o.a)(j,2),f=O[0],h=O[1],x=Object(n.useState)(""),v=Object(o.a)(x,2),g=v[0],_=v[1],S=Object(n.useState)(!1),C=Object(o.a)(S,2),y=C[0],k=C[1],w=function(){var e=Object(m.a)(b.a.mark((function e(){var s,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:k(!0),s=function(e){e.response?h(e.response.data):_(e.message),k(!1)},a=function(e){k(!1)},t({route:"/login",data:{username:d.current.value,password:u.current.value},method:"POST",axios_error:s,axios_response:a});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.jsxs)("div",{className:"Login",children:[g&&Object(a.jsx)("div",{className:"error",children:g}),!g&&Object(a.jsxs)("form",{children:[Object(a.jsx)("div",{className:"head",children:" Login"}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"username",children:"Username:"}),Object(a.jsx)("input",{type:"text",name:"username",id:"username",placeholder:"Enter your username",ref:d})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"password",children:"Password:"}),Object(a.jsx)("input",{type:"text",name:"password",id:"password",placeholder:"Enter your password",ref:u})]}),function(){var e=[];if(Array.isArray(f))for(var t=0;t<f.length;t++)e.push(Object(a.jsx)("li",{children:f[t].msg},N()()));else e.push(Object(a.jsx)("li",{children:f.msg},N()()));return Object(a.jsx)("ul",{className:"errors",children:e})}(),Object(a.jsxs)("div",{className:"buttons",children:[Object(a.jsx)("div",{className:"login-btn",children:Object(a.jsx)("button",{onClick:function(e){return e.preventDefault(),y||""===d.current.value||""===u.current.value?void 0:w()},children:y?"Logging-in":"Log-in"})}),Object(a.jsx)("div",{className:"signup-btn",onClick:function(e){e.preventDefault(),i(!0)},children:Object(a.jsx)("button",{children:"Sign-up"})})]}),r&&Object(a.jsx)(l.a,{to:"/signup"})]})]})}),S=function(){var e=Object(n.useContext)(p).isAuthValue,t=Object(o.a)(e,2),s=t[0],c=t[1];return Object(n.useEffect)((function(){c(!1)}),[s]),Object(a.jsxs)("div",{className:"Logout",children:[localStorage.clear(),window.location.reload()]})},C=(s(128),function(){var e=Object(n.useContext)(p).axios_request,t=Object(n.useState)(!1),s=Object(o.a)(t,2),c=s[0],r=s[1],i=Object(n.useState)(""),d=Object(o.a)(i,2),u=d[0],j=d[1],b=Object(n.useState)([]),m=Object(o.a)(b,2),O=m[0],f=m[1],h=Object(n.useState)(!1),x=Object(o.a)(h,2),v=x[0],g=x[1],_=Object(n.useRef)(),S=Object(n.useRef)(),C=Object(n.useRef)(),y=Object(n.useRef)();return Object(a.jsxs)("div",{className:"Signup",children:[u&&Object(a.jsx)("div",{className:"error",children:u}),!u&&Object(a.jsxs)("form",{children:[Object(a.jsx)("div",{className:"head",children:"Signup"}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"fname",children:"First Name:"}),Object(a.jsx)("input",{type:"text",name:"fname",id:"fname",placeholder:"Enter your First Name",ref:_})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"lname",children:"Last Name:"}),Object(a.jsx)("input",{type:"text",name:"lname",id:"lname",placeholder:"Enter your Last Name",ref:S})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"username",children:"Username:"}),Object(a.jsx)("input",{type:"text",name:"username",id:"username",placeholder:"Enter your username",ref:C})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"password",children:"Password:"}),Object(a.jsx)("input",{type:"text",name:"password",id:"password",placeholder:"Enter your password",ref:y})]}),function(){var e=[];if(Array.isArray(O))for(var t=0;t<O.length;t++)e.push(Object(a.jsx)("li",{children:O[t].msg},N()()));else e.push(Object(a.jsx)("li",{children:O.msg},N()()));return Object(a.jsx)("ul",{className:"errors",children:e})}(),Object(a.jsxs)("div",{className:"buttons",children:[Object(a.jsx)("div",{className:"signup-btn",children:Object(a.jsx)("button",{onClick:function(t){return t.preventDefault(),v?void 0:(g(!0),void e({route:"/signup",data:{fname:_.current.value,lname:S.current.value,username:C.current.value,password:y.current.value},method:"POST",axios_error:function(e){e.response?f(e.response.data):j(e.message),g(!1)},axios_response:function(e){g(!1),f([]),j("")}}))},children:v?"signing-in":"Sign-up"})}),Object(a.jsx)("div",{className:"login-btn",onClick:function(e){e.preventDefault(),r(!0)},children:Object(a.jsx)("button",{children:"Login"})})]}),c&&Object(a.jsx)(l.a,{to:"/login"})]})]})}),y=(s(129),s(130),function(){var e=Object(n.useContext)(p).searchValue,t=Object(o.a)(e,2),s=(t[0],t[1]),c=Object(l.g)(),r=Object(n.useRef)();return Object(a.jsx)("div",{className:"SearchBar",children:Object(a.jsx)("form",{onSubmit:function(e){return e.preventDefault(),s(!0),""===r.current.value?void 0:c.push("/search/".concat(r.current.value))},children:Object(a.jsx)("input",{type:"text",id:"search",name:"search",ref:r,placeholder:"Search Odinbook"})})})}),k=(s(131),s(4)),w=function(e){var t=e.value,s=e.index,c=(e.result,e.friendBtn),r=e.setFriendBtn,i=(e.arrg,Object(n.useContext)(p)),l=i.jwtData,u=i.myFriendsValue,j=i.axios_request,b=Object(o.a)(u,2),m=b[0],O=b[1],f=Object(n.useState)(null),h=Object(o.a)(f,2),x=(h[0],h[1],Object(n.useState)("")),v=Object(o.a)(x,2),g=v[0],N=v[1],_=Object(n.useState)(!1),S=Object(o.a)(_,2),C=S[0],y=S[1];Object(n.useEffect)((function(){-1!==m.findIndex((function(e){return e.username===t.username}))&&(c[s]=!0,r(c)),y(!C)}),[]);var w=document.querySelector("#search");return Object(a.jsxs)("div",{className:"SearchResultCard",children:[g&&Object(a.jsx)("div",{className:"error",children:g}),!g&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"profile-picture",children:Object(k.a)(t.fname[0].toLowerCase())}),Object(a.jsxs)("div",{className:"name-container",onClick:function(e){e.stopPropagation(),e.preventDefault(),w.value=""},children:[Object(a.jsx)(d.b,{to:{pathname:"/user/".concat(t.username,"/posts"),state:{userid:t._id,fname:t.fname,lname:t.lname,username:t.username}},children:Object(a.jsxs)("div",{className:"name",children:[Object(a.jsxs)("span",{children:[t.fname," "]}),Object(a.jsx)("span",{children:t.lname})]})}),Object(a.jsx)("div",{className:"username",children:t.username})]}),t._id!==l.sub&&Object(a.jsx)("div",{className:c[s]?"add-btn fas fa-user-minus":"add-btn fas fa-user-plus",style:{color:c[s]?"red":"blue"},onClick:function(e){e.preventDefault(),e.stopPropagation(),c[s]=!c[s],r(c),y(!C),function(){var e="/friend/".concat(t._id);if(j({route:e,data:"",method:"POST",axios_error:function(e){e.response?N(e.response.data):N(e.message)},axios_response:function(e){}}),!1===c[s]){var a=m.findIndex((function(e){return e.username===t.username}));-1!==a&&(m.splice(a,1),O(m))}else m.push(t)}()}}),t._id!==l.sub&&Object(a.jsx)("div",{className:"chat-link-container",children:Object(a.jsx)(d.b,{to:{pathname:"/chat",state:{userid:t._id,fname:t.fname,lname:t.lname,username:t.username}},children:Object(a.jsx)("div",{className:"chat-btn fab fa-facebook-messenger"})})})]})]})},D=function(){var e=Object(n.useContext)(p),t=e.searchValue,s=e.axios_request,c=Object(o.a)(t,2),r=c[0],i=c[1],d=Object(n.useState)([]),u=Object(o.a)(d,2),j=u[0],b=u[1],m=Object(l.i)(),O=Object(n.useState)(""),f=Object(o.a)(O,2),h=f[0],x=f[1],v=Object(n.useState)(!0),g=Object(o.a)(v,2),_=g[0],S=g[1],C=Object(n.useState)([]),y=Object(o.a)(C,2),k=y[0],D=y[1],E=function(){var e="/user/search/".concat(m.name);s({route:e,data:"",method:"GET",axios_error:function(e){e.response?x(e.response.data):x(e.message),S(!1)},axios_response:function(e){S(!1),Array.isArray(e.data)?D(e.data):D([e.data]);var t=Array(e.data.length).fill(!1);b(t)}})};Object(n.useEffect)((function(){!0===r&&(E(),i(!1))}),[r]),Object(n.useEffect)((function(){r||m&&(document.querySelector("#search").value=m.name,E())}),[]);var F=[];return Object(a.jsxs)("div",{className:"SearchResult",children:[h&&Object(a.jsx)("div",{className:"error",children:h}),!h&&Object(a.jsxs)(a.Fragment,{children:[_&&"loading...",!_&&(0==k.length?Object(a.jsx)("div",{className:"empty",children:"No users found with this query :("}):k.map((function(e,t){return Object(a.jsx)(w,{value:e,index:t,setResult:D,result:k,friendBtn:j,setFriendBtn:b,arrg:F},N()())})))]})]})},E=(s(132),function(e){var t=e.to,s=e.fname,n=e.lname,c=e.userid,r=e.username,i=e.label,o=Object(l.j)({path:t});return o&&(o=o.isExact),Object(a.jsx)("div",{className:o?"active nav-links":"nav-links",children:Object(a.jsx)(d.b,{to:{pathname:t,state:{fname:s,lname:n,userid:c,username:r}},children:i})})}),F=s(22),P=s(26),I=function(e){var t=e.objkey,s=e.index,c=e.clickIndex,r=e.setClickIndex,i=(e.result,e.setResult,e.ee),l=e.setee,d=e.jwtData,u=e.userid,j=Object(n.useContext)(p),b=j.myAboutValue,m=j.axios_request,O=Object(o.a)(b,2),f=O[0],h=O[1],x=Object(n.useState)(""),v=Object(o.a)(x,2),g=v[0],N=v[1],_=Object(n.useState)(!1),S=Object(o.a)(_,2),C=S[0],y=S[1],w=Object(n.useState)(!1),D=Object(o.a)(w,2),E=D[0],I=D[1],L=Object(n.useState)(Object(P.a)({},t,i[t])),T=Object(o.a)(L,2),A=T[0],M=T[1],U={bio:"Bio",nickName:"Nick-name",school:"School",college:"College",working:"Work Place",relationshipStatus:"Relationhsip Status",book:"Book",food:"Food",gender:"Gender",dob:"Date of birth",email:"Email",phone:"Phone"},V=function(e){e.preventDefault();var s=document.getElementById(t),a=e.target,n=a.name,c=a.value;if("INPUT"==s.tagName){var r=s.id,i=Object(k.a)(c);if("food"!==r&&"book"!==r){if(i.length>=30)return void y(!0);y(!1)}else if("food"==r||"book"==r){if(i.length>=50)return void y(!0);y(!1)}}M(Object(F.a)(Object(F.a)({},A),{},Object(P.a)({},n,c)))};return Object(n.useEffect)((function(){if(c==s){var e=document.getElementById(t);e.focus(),e.style.border="1px solid blue",e.style.boxShadow="0.3px 0.3px 5px blue",e.style.outline="none",document.getElementById("save-icon-".concat(s)).style.color="blue"}}),[]),Object(a.jsxs)("div",{className:"UserAboutCard",children:[g&&Object(a.jsx)("div",{className:"error",children:g}),!g&&Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("form",{onSubmit:function(e){e.preventDefault()},children:Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:t,children:U[t]}),Object(a.jsxs)("div",{className:"container",children:[c!=s&&Object(a.jsx)("div",{className:"profile-values",children:i[t]||"No ".concat(U[t]," added")}),c==s&&"relationshipStatus"!==t&&"gender"!==t&&"dob"!==t&&"bio"!==t&&Object(a.jsx)("input",{name:t,id:t,value:A[t],onChange:V,maxLength:"food"==t||"book"==t?"50":"30"}),1==C&&Object(a.jsx)("div",{className:"input-tooltip",children:Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("span",{children:"No more than "}),"food"==t||"book"==t?"50":"30",Object(a.jsx)("span",{children:" characters :)"})," "]})}),c==s&&"bio"==t&&Object(a.jsx)("div",{className:"bio-container",children:Object(a.jsx)("textarea",{name:"bio",id:"bio",value:A[t],onChange:V})}),c==s&&"dob"==t&&Object(a.jsx)("input",{type:"date",name:"dob",id:"dob",selected:A[t]?null:"",start:!0}),c==s&&"relationshipStatus"==t&&Object(a.jsxs)("select",{id:"relationshipStatus",name:"relationshipStatus",onChange:V,defaultValue:i[t],children:[Object(a.jsx)("option",{value:"Status",children:"Status"}),Object(a.jsx)("option",{value:"Married",children:"Married"}),Object(a.jsx)("option",{value:"Single",children:"Single"}),Object(a.jsx)("option",{value:"Divorced",children:"Divorced"}),Object(a.jsx)("option",{value:"It's complicated",children:"It's complicated"}),Object(a.jsx)("option",{value:"In a relationship",children:"In relationship"}),Object(a.jsx)("option",{value:"Open Relationship",children:"Open Relationship"}),Object(a.jsx)("option",{value:"Engaged",children:"Engaged"}),Object(a.jsx)("option",{value:"Widowed",children:"Widowed"})]}),c==s&&"gender"===t&&Object(a.jsxs)("select",{id:"gender",name:"gender",onChange:V,defaultValue:i[t],children:[Object(a.jsx)("option",{value:"Male",children:"Male"}),Object(a.jsx)("option",{value:"Female",children:"Female"}),Object(a.jsx)("option",{value:"Transgender",children:"Transgender"}),Object(a.jsx)("option",{value:"Gender Neutral",children:" Gender Neutral"}),Object(a.jsx)("option",{value:"Non Binary",children:"Non Binary"})]})]}),u===d.sub&&c!==s&&Object(a.jsx)("div",{className:"edit-icon fas fa-edit",onClick:function(e){e.preventDefault(),e.stopPropagation(),r(s)}}),d.sub===u&&c==s&&Object(a.jsx)("div",{id:"save-icon-".concat(s),className:"save-icon fas fa-save",onClick:function(e){e.preventDefault(),e.stopPropagation(),""==A.fname||""==A.lname?I(!0):(r(null),i[t]=A[t],l(i),f[t]=A[t],h(f),function(e){e.preventDefault(),""!==A.fname&&""!==A.lname&&m({route:"/myprofile",data:A,method:"PUT",axios_error:function(e){e.response?N(e.response.data):N(e.message)},axios_response:function(e){}})}(e),I(!1))}}),E&&Object(a.jsx)("div",{className:"empty_name",children:""==A.fname?"First name cannot be empty":"Last name cannot be empty"})]})})})]})},L=(s(133),function(){var e,t=Object(n.useContext)(p),s=t.myAboutValue,c=t.didMyAboutMountValue,r=t.axios_request,i=t.jwtData,d=Object(o.a)(s,2),u=d[0],j=d[1],b=Object(o.a)(c,2),m=b[0],O=b[1],f=Object(n.useState)(),h=Object(o.a)(f,2),x=h[0],v=h[1],g=Object(n.useState)(!0),_=Object(o.a)(g,2),S=_[0],C=_[1],y=Object(n.useState)(""),k=Object(o.a)(y,2),w=k[0],D=k[1],E=Object(l.h)();E.state&&(E.state.fname,E.state.lname,E.state.username,e=E.state.userid);var F,P=Object(n.useState)(null),L=Object(o.a)(P,2),T=L[0],A=L[1],M=function(){var t="/profile/".concat(e);r({route:t,data:"",method:"GET",axios_error:function(e){e.response?D(e.response.data):D(e.message),C(!1)},axios_response:function(t){e===i.sub&&j(t.data),v(t.data),C(!1)}})};Object(n.useEffect)((function(){i.sub!==e?M():m?(M(),O(!1)):(v(u),C(!1))}),[E.pathname]),x&&(delete x.user,delete x._id,delete x.__v,F=Object.keys(x));var U=Object(n.useState)(null),V=Object(o.a)(U,2),q=V[0],B=V[1],R=Object(n.useState)({}),G=Object(o.a)(R,2),H=G[0],W=G[1];return Object(n.useEffect)((function(){if(x)for(var e={},t=0;t<F.length;t++)e[F[t]]=x[F[t]],t===F.length-1&&W(e)}),[x]),Object(n.useEffect)((function(){window.addEventListener("keydown",(function(e){"Escape"==e.key&&A(null)}))}),[]),Object(a.jsxs)("div",{className:"UserAbout",children:[w&&Object(a.jsx)("div",{className:"error",children:w}),!w&&Object(a.jsxs)(a.Fragment,{children:[S&&Object(a.jsx)("div",{className:"loading-container",children:Object(a.jsx)("div",{className:"spinner-border loading",role:"status",children:Object(a.jsx)("span",{className:"sr-only"})})}),!S&&F.map((function(t,s){return Object(a.jsx)(I,{objkey:t,index:s,clickIndex:T,setClickIndex:A,result:x,setResult:v,ee:H,setee:W,tooltip:q,setTooltip:B,userid:e,jwtData:i},N()())}))]})]})}),T=(s(134),function(e){var t=e.route,s=e.update_value,c=e.method,r=e.formTitle,i=e.user_post_response,l=(e.createClick,e.setCreateClick),d=(e.updateClick,e.setUpdateClick,Object(n.useContext)(p).axios_request),u=Object(n.useState)(""),j=Object(o.a)(u,2),b=j[0],m=j[1],O=Object(n.useState)([]),f=Object(o.a)(O,2),h=f[0],x=f[1],v=Object(n.useState)(!1),g=Object(o.a)(v,2),_=g[0],S=g[1],C=Object(n.useRef)(),y=Object(n.useRef)();Object(n.useEffect)((function(){C.current.value=s?s.title:"",y.current.value=s?s.content_text:""}),[]);return Object(a.jsxs)("div",{className:"MyPostForm",children:[b&&Object(a.jsxs)("div",{className:"error",children:[Object(a.jsxs)("div",{children:[b," "]}),Object(a.jsx)("div",{children:"Please try refreshing the page"})]}),!b&&Object(a.jsxs)("div",{className:"form-container",children:[Object(a.jsxs)("div",{className:"form-head",children:[Object(a.jsx)("div",{className:"form-title",children:r}),Object(a.jsx)("div",{className:"form-close-btn fas fa-times-circle",onClick:function(e){e.preventDefault(),l(!1)}})]}),Object(a.jsxs)("form",{children:[Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"title",children:"Title"}),Object(a.jsx)("input",{id:"title",type:"text",placeholder:"Enter your post title",name:"title",ref:C})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"content_text",children:"Text"}),Object(a.jsx)("textarea",{type:"text",id:"content_text",name:"content_text",placeholder:"Add text",ref:y})]}),function(){var e=[];if(Array.isArray(h))for(var t=0;t<h.length;t++)e.push(Object(a.jsx)("li",{children:h[t].msg},N()()));else e.push(Object(a.jsx)("li",{children:h.msg},N()()));return Object(a.jsx)("ul",{className:"errors",children:e})}(),Object(a.jsx)("div",{className:"submit-btn",children:Object(a.jsx)("button",{onClick:function(e){e.preventDefault(),_||(S(!0),d({route:t,data:{title:C.current.value,content_text:y.current.value},method:c,axios_error:function(e){e.response?x(e.response.data):m(e.message),S(!1)},axios_response:function(e){x([]),S(!1),i(e),l(!1)}}))},children:_?"Submitting...":"Submit"})})]})]})]})}),A=(s(135),function(e){var t=e.user_post_response,s=e.createClick,n=e.setCreateClick,c=Object(l.h)().state.fname;return Object(a.jsx)("div",{className:"MyPostCreate",children:Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"show-form-container",children:[Object(a.jsx)("div",{className:"profile-picture",children:Object(k.a)(c[0].toLowerCase())}),Object(a.jsx)("div",{className:"show-form-btn",onClick:function(e){e.preventDefault(),n(!0)},children:"What's on your mind..?"})]}),s&&Object(a.jsx)(T,{route:"/myposts",method:"POST",formTitle:"Create Post",user_post_response:t,createClick:s,setCreateClick:n})]})})}),M=(s(136),function(e){var t=e.postid,s=e.updateClick,n=e.setUpdateClick,c=e.updateData,r=e.user_post_response,i="/mypost/".concat(t);return Object(a.jsx)("div",{className:"MyPostUpdate",children:s&&Object(a.jsx)(T,{route:i,update_value:c,method:"PUT",createClick:s,setCreateClick:n,formTitle:"Update Post",user_post_response:r})})}),U=(s(137),s(138),function(e){var t=e.postid,s=e.index,c=e.setComments,r=e.commentid,i=e.comments,l=e.setCommentOptionIndex,d=e.pp,u=e.setpp,j=Object(n.useContext)(p).axios_request,b="/post/".concat(t,"/comment/").concat(r),m=Object(n.useState)(!1),O=Object(o.a)(m,2),f=(O[0],O[1]),h=Object(n.useState)(""),x=Object(o.a)(h,2),v=x[0],g=x[1];return Object(n.useEffect)((function(){i[s]=i.comment_list.splice(s,1),c(i),u(!d),l(null),j({route:b,data:"",method:"DELETE",axios_error:function(e){e.response?g(e.response.data):g(e.message),f(!1)},axios_response:function(e){f(!1)}})}),[]),Object(a.jsx)("div",{className:"CommentDelete",children:v&&Object(a.jsxs)("div",{className:"error",children:[Object(a.jsx)("div",{children:v}),Object(a.jsx)("div",{children:"Please try refreshing the Page :("})]})})}),V=function(e){var t=e.comment,s=e.index,c=(e.postIndex,e.path),r=e.commentOptionIndex,i=e.setCommentOptionIndex,u=e.postid,j=e.comments,b=e.setComments,m=e.pp,O=e.setpp,f=Object(n.useContext)(p).jwtData,h=Object(l.h)();h.state&&h.state.userid;var x=Object(n.useState)(!1),v=Object(o.a)(x,2),g=v[0],N=v[1];return Object(a.jsxs)("div",{className:"CommentCard",children:[Object(a.jsx)("div",{className:"profile-picture",children:Object(k.a)(t.user.fname[0].toLowerCase())}),Object(a.jsxs)("div",{className:"comment-container",children:[Object(a.jsxs)("div",{className:"name",children:[("userpost"==c&&t.user._id!==f.sub||"newsfeed"==c)&&Object(a.jsxs)(d.b,{to:{pathname:"/user/".concat(t.user.username,"/posts"),state:{fname:t.user.fname,lname:t.user.lname,username:t.user.username,userid:t.user._id}},children:[Object(a.jsxs)("span",{children:[t.user.fname," "]}),Object(a.jsx)("span",{children:t.user.lname})]}),"userpost"===c&&t.user._id===f.sub&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("span",{children:[t.user.fname," "]}),Object(a.jsx)("span",{children:t.user.lname})]})]}),Object(a.jsx)("div",{className:"comment",children:t.comment})]}),Object(a.jsxs)("div",{className:"option-icon",onClick:function(e){e.preventDefault(),e.stopPropagation(),i(r==s?null:s)},children:[Object(a.jsx)("div",{style:{backgroundColor:r==s?"lightgray":""},className:"btn fas fa-ellipsis-v"}),r===s&&Object(a.jsx)("div",{className:"comment-menu",children:Object(a.jsx)("div",{className:"comment-btn delete-comment-btn",onClick:function(e){e.stopPropagation(),e.preventDefault(),N(!g)},children:"Delete"})}),g&&Object(a.jsx)(U,{postid:u,index:s,setComments:b,comments:j,commentid:t._id,commentDeleteClick:g,setCommentDeleteClick:N,pp:m,setpp:O,setCommentOptionIndex:i})]})]})},q=(s(63),function(e){var t=e.value,s=e.index,c=e.friendBtn,r=e.setFriendBtn,i=e.myFriends,l=e.setMyFriends,d=Object(n.useState)(!1),u=Object(o.a)(d,2),j=u[0],b=u[1],m=Object(n.useContext)(p),O=m.axios_request,f=m.jwtData,h=Object(n.useState)(""),x=Object(o.a)(h,2),v=x[0],g=x[1];return Object(n.useEffect)((function(){-1!==i.findIndex((function(e){return e.username===t.username}))&&(c[s]=!0,r(c)),b(!j)}),[]),Object(a.jsxs)("div",{className:"UserLikesCard",children:[v&&Object(a.jsx)("div",{className:"error",children:v}),!v&&Object(a.jsxs)(a.Fragment,{children:[" ",Object(a.jsx)("div",{className:"profile-picture",children:Object(k.a)(t.fname[0].toLowerCase())}),Object(a.jsxs)("div",{className:"name",children:[Object(a.jsx)("span",{children:t.fname}),Object(a.jsx)("span",{children:t.lname})]}),f.sub!==t._id&&Object(a.jsx)("div",{className:"add-btn-container",onClick:function(){c[s]=!c[s],r(c),b(!j),function(){var e="/friend/".concat(t._id);if(O({route:e,data:"",method:"POST",axios_error:function(e){e.response?g(e.response.data):g(e.message)},axios_response:function(e){}}),0==c[s]){var a=i.findIndex((function(e){return e.username==t.username}));-1!==a&&(i.splice(a,1),l(i))}else i.push(t)}()},style:{color:c[s]?"red":"blue"},children:Object(a.jsx)("div",{className:c[s]?"add-btn fas fa-user-minus":"add-btn fas fa-user-plus"})})]})]})}),B=function(e){var t=e.postid,s=e.setUsersLikedIndex,c=e.userid,r=Object(n.useContext)(p),i=r.axios_request,l=r.jwtData,d=r.myFriendsValue,u=r.didMyFriendsMountValue,j=Object(n.useState)(""),b=Object(o.a)(j,2),m=b[0],O=b[1],f=Object(n.useState)([]),h=Object(o.a)(f,2),x=h[0],v=h[1],g=Object(o.a)(d,2),_=g[0],S=g[1],C=Object(o.a)(u,2),y=C[0],k=C[1],w=Object(n.useState)([]),D=Object(o.a)(w,2),E=D[0],F=D[1];return Object(n.useEffect)((function(){!function(){var e="/post/".concat(t,"/like");i({route:e,method:"GET",data:"",axios_error:function(e){e.response?O(e.response.data):O(e.message)},axios_response:function(e){v(e.data.like);var t=Array(e.data.like.length).fill(!1);F(t)}})}(),y&&(!function(){var e="/friend/".concat(l.sub);i({route:e,data:"",method:"GET",axios_error:function(e){e.response?O(e.response.data):O(e.message)},axios_response:function(e){S(e.data)}})}(),k(!1))}),[]),Object(a.jsxs)("div",{className:"UserLikes",children:[m&&Object(a.jsx)("div",{className:"error",children:m}),!m&&Object(a.jsxs)("div",{className:"box",children:[Object(a.jsx)("div",{className:'form-close-btn fas fa-times-circle"',children:Object(a.jsx)("button",{onClick:function(e){e.preventDefault(),e.stopPropagation(),s(null)},className:"fas fa-times-circle"})}),x.map((function(e,t){return Object(a.jsx)(q,{value:e,index:t,friendBtn:E,setFriendBtn:F,myFriends:_,setMyFriends:S,userid:c},N()())}))]})]})},R=(s(139),function(e){var t=e.setComments,s=e.postIndex,c=e.route,r=e.method,i=(e.updateValue,e.comments),l=e.pp,d=e.setpp,u=Object(n.useContext)(p),j=u.jwtData,b=u.axios_request,m=Object(n.useRef)(),O=Object(n.useState)([]),f=Object(o.a)(O,2),h=f[0],x=f[1],v=Object(n.useState)(""),g=Object(o.a)(v,2),_=g[0],S=g[1];return Object(a.jsxs)("div",{className:"CommentForm",children:[_&&Object(a.jsx)("div",{className:"error",children:_}),!_&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"profile-picture",children:[j.fname[0].toLowerCase()]}),Object(a.jsx)("form",{onSubmit:function(e){e.preventDefault(),""!=m.current.value&&function(){var e;if(e=document.querySelector("#post-".concat(s)),i.comment_list.push({comment:m.current.value,user:{fname:j.fname,lname:j.lname,username:j.user,_id:j.sub}}),t(i),d(!l),e){var a=e.querySelector("#post-".concat(s," .empty"));a&&(a.style.display="none")}b({route:c,data:{comment:m.current.value},method:r,axios_error:function(e){e.response?x(e.response.data):S(e.message)},axios_response:function(e){x([])}}),m.current.value=""}()},autoComplete:"off",children:Object(a.jsx)("input",{type:"text",name:"comment",id:"comment",placeholder:"Write a comment...",ref:m})}),function(){var e=[];if(Array.isArray(h))for(var t=0;t<h.length;t++)e.push(Object(a.jsx)("li",{children:h[t].msg},N()()));else e.push(Object(a.jsx)("li",{children:h.msg},N()()));return Object(a.jsx)("ul",{className:"errors",children:e})}()]})]})}),G=function(e){var t=e.postid,s=e.setComments,n=e.postIndex,c=e.comments,r=e.pp,i=e.setpp,o="/post/".concat(t,"/comment");return Object(a.jsx)("div",{className:"CommentCreate",children:Object(a.jsx)(R,{setComments:s,postIndex:n,route:o,method:"POST",comments:c,pp:r,setpp:i})})},H=function(e){var t,s,c,r=e.value,i=e.index,u=e.setPostid,j=e.setUpdateClick,b=e.setUpdateData,m=e.setUpdateIndex,O=e.indexOfCardClicked,f=e.setindexOfCardClicked,h=e.isOwner,x=e.setDeleteClick,v=(e.deleteClick,e.likeLength),g=e.setLikeLength,_=(e.setPostIndex,e.likeClick),S=e.setLikeClick,C=e.postsLength,y=e.path,w=Object(n.useState)(""),D=Object(o.a)(w,2),E=D[0],F=D[1],P=Object(n.useState)(""),I=Object(o.a)(P,2),L=I[0],T=I[1],A=Object(n.useState)([]),M=Object(o.a)(A,2),U=M[0],q=M[1],R=Object(n.useState)(!1),H=Object(o.a)(R,2),W=H[0],J=H[1],Y=Object(n.useState)(!0),z=Object(o.a)(Y,2),K=z[0],Q=z[1],X=Object(n.useState)(!0),Z=Object(o.a)(X,2),$=Z[0],ee=Z[1],te=Object(n.useState)(null),se=Object(o.a)(te,2),ae=se[0],ne=se[1],ce=Object(n.useContext)(p),re=ce.jwtData,ie=ce.axios_request,oe=Object(n.useState)(null),le=Object(o.a)(oe,2),de=le[0],ue=le[1],je=Object(l.h)();"userpost"==y&&(t=je.state.fname,s=je.state.lname,c=je.state.username,je.state.userid);var be=r.like.includes(re.sub),me=Object(n.useState)(!1),Oe=Object(o.a)(me,2),fe=Oe[0],he=Oe[1];return Object(n.useEffect)((function(){v.length<C&&(_.push(be),S(_),v.push(r.like.length),g(v),he(!fe))}),[]),console.log(v),Object(n.useEffect)((function(){var e=document.querySelector("#post-".concat(i));if(e){var t=e.scrollHeight;e.scrollTo(0,t)}}),[fe,W,K]),Object(a.jsxs)("div",{className:"UserPostCard",children:[Object(a.jsxs)("div",{className:"head",children:[Object(a.jsx)("div",{className:"profile-picture",children:t?Object(k.a)(t[0].toLowerCase()):Object(k.a)(r.user.fname[0].toLowerCase())}),Object(a.jsxs)("div",{className:"name-container",children:[Object(a.jsx)("div",{className:"name",children:Object(a.jsxs)(d.b,{to:{pathname:"/user/".concat(r.user.username,"/posts"),state:{userid:r.user._id,fname:r.user.fname,lname:r.user.lname,username:r.user.username}},children:[Object(a.jsxs)("span",{children:[t||r.user.fname," "]}),Object(a.jsx)("span",{children:s||r.user.lname})]})}),Object(a.jsx)("div",{className:"username",children:c||r.user.username})]}),h&&Object(a.jsxs)("div",{className:"option-btn",onClick:function(e){e.preventDefault(),f(O==i?null:i)},children:[Object(a.jsx)("div",{className:"btn",style:{backgroundColor:O==i?"darkgray":"",borderRadius:"4px"},children:"\u22ee"}),O==i&&Object(a.jsxs)("div",{className:"hamburger-menu",children:[Object(a.jsxs)("div",{className:"menu-btn edit-button-container",onClick:function(e){e.preventDefault(),e.stopPropagation(),f(null),j(!0),b(r),u(r._id),m(i)},children:[Object(a.jsx)("div",{className:"far fa-edit icon"}),Object(a.jsx)("div",{className:"label",children:"Edit post"})]}),Object(a.jsxs)("div",{className:"menu-btn delete-btn-container",onClick:function(e){e.preventDefault(),e.stopPropagation(),f(null),x(!0),u(r._id),m(i)},children:[Object(a.jsx)("div",{className:"far fa-trash-alt icon"}),Object(a.jsx)("div",{className:"label",children:"Delete post"})]})]})]})]}),Object(a.jsxs)("div",{className:"post-content-container",children:[Object(a.jsx)("div",{className:"post-title",children:r.title}),Object(a.jsx)("div",{className:"post-content",children:r.content_text})]}),E&&Object(a.jsx)("div",{className:"error",children:E}),!E&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"no-like",onClick:function(e){e.preventDefault(),e.stopPropagation(),ue(i)},children:[Object(a.jsxs)("span",{children:[v[i]," "]}),Object(a.jsxs)("span",{children:[" ",1==v[i]?"like":"likes"]})]}),de===i&&Object(a.jsx)(B,{postid:r._id,userid:r.user._id,setUsersLikedIndex:ue})]}),Object(a.jsxs)("div",{className:"card-footer",children:[Object(a.jsx)("div",{style:{color:_[i]?"blue":""},className:"like-icon far fa-thumbs-up",onClick:function(e){e.preventDefault(),function(e){var t="/post/".concat(e,"/like");ie({route:t,data:"",method:"POST",axios_error:function(e){e.response?F(e.response.data):F(e.message)},axios_response:function(e){}})}(r._id),1==_[i]?(v[i]=v[i]-1,g(v)):(v[i]=v[i]+1,g(v)),_[i]=!_[i],S(_),he(!fe)}}),Object(a.jsx)("div",{className:"comment-icon far fa-comment-alt",onClick:function(e){e.preventDefault(),$&&(!function(e){var t="/post/".concat(e,"/comment");ie({route:t,data:"",method:"GET",axios_error:function(e){e.response?T(e.response.data):T(e.mesage),Q(!1)},axios_response:function(e){q(e.data),Q(!1)}})}(r._id),ee(!1)),J(!W)}}),Object(a.jsx)("div",{className:"share-icon far fa-share-square"})]}),Object(a.jsxs)("div",{className:"comment-list",id:"post-".concat(i),children:[W&&L&&Object(a.jsx)("div",{className:"error",children:L}),W&&!L&&K&&"loading...",W&&!L&&!K&&W&&(0==U.comment_list.length?Object(a.jsx)("div",{className:"empty",children:"This post has no comments."}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"no-comment",children:[Object(a.jsxs)("span",{children:[U.comment_list.length," "]}),Object(a.jsx)("span",{children:1==U.comment_list.length?" comment":" comments"})]}),U.comment_list.map((function(e,t){return Object(a.jsx)(V,{comment:e,index:t,postIndex:t,path:y,commentOptionIndex:ae,setCommentOptionIndex:ne,postid:r._id,comments:U,setComments:q,pp:fe,setpp:he},N()())}))]}))]}),W&&Object(a.jsx)(G,{postid:r._id,setComments:q,comments:U,postIndex:i,pp:fe,setpp:he},N()())]})},W=(s(140),function(e){e.deleteClick;var t=e.setDeleteClick,s=e.user_delete_response,c=e.postid,r=Object(n.useContext)(p).axios_request,i="/mypost/".concat(c),l=Object(n.useState)(!1),d=Object(o.a)(l,2),u=d[0],j=d[1],b=Object(n.useState)(""),m=Object(o.a)(b,2),O=m[0],f=m[1],h=function(){r({route:i,data:"",method:"DELETE",axios_error:function(e){e.response?f(e.response.data):f(e.message),j(!1)},axios_response:function(e){j(!1),s(e)}})};return Object(a.jsxs)("div",{className:"MyPostDelete",children:[O&&Object(a.jsxs)("div",{className:"error",children:[Object(a.jsx)("div",{children:O}),Object(a.jsx)("div",{children:"Please try refreshing the Page"})]}),!O&&Object(a.jsxs)("div",{className:"dialog-box",children:[Object(a.jsx)("p",{className:"confitm-msg",children:"Are you sure want to delete this post?"}),Object(a.jsxs)("div",{className:"btn",children:[Object(a.jsx)("button",{className:"dlt-btn",onClick:function(e){e.preventDefault(),u||(j(!0),h())},children:u?"Deleting post....":"Delete"}),Object(a.jsx)("button",{className:"cancel-btn",onClick:function(e){e.preventDefault(),t(!1)},children:"Cancel"})]})]})]})}),J=(s(141),function(){var e=Object(n.useContext)(p).jwtData;return Object(a.jsx)("div",{className:"WelcomeMsg",id:"welcome_msg_unique",children:Object(a.jsxs)("div",{className:"container-msg",children:["Welcome ",Object(a.jsxs)("span",{children:[e.fname," "]}),Object(a.jsxs)("span",{children:[e.lname," :)"]})]})})}),Y=function(e){var t,s,c,r=e.path,i=Object(n.useContext)(p),d=i.jwtData,u=i.axios_request,j=i.myPostsValue,b=i.didMyPostsMountValue,m=i.myNewsFeedValue,O=i.didMyNewsFeedMountValue,f=(i.myFriendsValue,Object(o.a)(j,2)),h=f[0],x=f[1],v=Object(o.a)(m,2),g=v[0],_=v[1],S=Object(o.a)(O,2),C=S[0],y=S[1],k=Object(o.a)(b,2),w=k[0],D=k[1],E=Object(n.useState)(""),F=Object(o.a)(E,2),P=F[0],I=F[1],L=Object(n.useState)(!0),T=Object(o.a)(L,2),U=T[0],V=T[1],q=Object(n.useState)(!1),B=Object(o.a)(q,2),R=B[0],G=B[1],Y=Object(n.useState)([]),z=Object(o.a)(Y,2),K=z[0],Q=z[1],X=Object(n.useState)(!1),Z=Object(o.a)(X,2),$=Z[0],ee=Z[1],te=Object(n.useState)(""),se=Object(o.a)(te,2),ae=se[0],ne=se[1],ce=Object(n.useState)(!1),re=Object(o.a)(ce,2),ie=re[0],oe=re[1],le=Object(n.useState)(!1),de=Object(o.a)(le,2),ue=de[0],je=de[1],be=Object(n.useState)([]),me=Object(o.a)(be,2),Oe=me[0],fe=me[1],he=Object(n.useState)(""),xe=Object(o.a)(he,2),pe=xe[0],ve=xe[1],ge=Object(n.useState)(""),Ne=Object(o.a)(ge,2),_e=Ne[0],Se=Ne[1],Ce=Object(n.useState)(""),ye=Object(o.a)(Ce,2),ke=ye[0],we=ye[1],De=Object(n.useState)(null),Ee=Object(o.a)(De,2),Fe=Ee[0],Pe=Ee[1],Ie=Object(l.h)();"userpost"==r&&(t=Ie.state.userid,s=Ie.state.fname,c=Ie.state.lname);var Le=function(){var e;"userpost"==r?e="/posts/".concat(t):"newsfeed"===r&&(e="/news-feed");u({route:e,data:"",method:"GET",axios_error:function(e){e.response?I(e.response.data):I(e.message),V(!1)},axios_response:function(e){"newsfeed"==r?_(e.data):t===d.sub&&x(e.data),Q(e.data),V(!1)}})};Object(n.useEffect)((function(){"userpost"==r?t!==d.sub?(Le(),ee(!1)):w?(Le(),ee(!0),D(!1)):(Q(h),V(!1),ee(!0)):"newsfeed"==r&&(C?(Le(),ee(!1),y(!1)):(Q(g),V(!1),ee(!1)))}),[Ie.pathname]);var Te=Object(n.useState)([]),Ae=Object(o.a)(Te,2),Me=Ae[0],Ue=Ae[1],Ve=Object(n.useState)(null),qe=Object(o.a)(Ve,2),Be=qe[0],Re=qe[1];return Object(n.useEffect)((function(){if(Ie.state&&("/login"===Ie.state.from||"/signup"===Ie.state.from)){var e=document.querySelector("#welcome_msg_unique");e&&e.addEventListener("click",(function(e){G(!0)}))}}),[]),Object(a.jsxs)("div",{className:"userpost"==r?"UserPost myaccount":"UserPost",children:[P&&Object(a.jsx)("div",{className:"error",children:P}),!P&&Object(a.jsxs)(a.Fragment,{children:[!R&&Ie.state&&("/login"===Ie.state.from||"/signup"===Ie.state.from)&&"newsfeed"===r&&Object(a.jsx)(J,{}),U&&Object(a.jsx)("div",{className:"loading-container",children:Object(a.jsx)("div",{className:"spinner-border loading",role:"status",children:Object(a.jsx)("span",{className:"sr-only"})})}),!U&&Object(a.jsxs)(a.Fragment,{children:[$&&Object(a.jsx)("div",{children:Object(a.jsx)(A,{user_post_response:function(e){Q([e.data].concat(K)),x([e.data].concat(h))},createClick:ie,setCreateClick:oe})}),ae&&Object(a.jsx)("div",{children:Object(a.jsx)(M,{postid:_e,updateClick:ae,setUpdateClick:ne,updateData:pe,user_post_response:function(e){K[ke]=e.data,Q(K),h[ke]=e.data,x(h)}})}),ue&&Object(a.jsx)(W,{setDeleteClick:je,deleteClick:ue,user_delete_response:function(e){K.splice(ke,1),Q(K),h.splice(ke,1),x(h),je(!1)},postid:_e}),0==K.length?Object(a.jsxs)("div",{className:"empty-posts",children:["newsfeed"==r&&"Please add friends to see their posts here :)",$&&"newsfeed"!==r&&"Create new posts to see them here",!$&&"newsfeed"!==r&&Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("span",{children:[s," ",c," doesn't have any posts to show :("]})})]}):K.map((function(e,t){return Object(a.jsx)(H,{value:e,index:t,setPostid:Se,setUpdateClick:ne,setUpdateData:ve,setUpdateIndex:we,indexOfCardClicked:Fe,setindexOfCardClicked:Pe,isOwner:$,setDeleteClick:je,deleteClick:ue,likeLength:Oe,setLikeLength:fe,likeClick:Me,setLikeClick:Ue,postsLength:K.length,UserLikedIndex:Be,setUsersLikedIndex:Re,path:r},N()())}))]})]})]})},z=(s(142),function(e){var t=e.value,s=e.index,c=e.friendBtn,r=e.setFriendBtn,i=e.userid,l=e.isChanged,u=e.setIsChanged,j=e.path,b=Object(n.useState)(""),m=Object(o.a)(b,2),O=m[0],f=m[1],h=Object(n.useContext)(p),x=h.jwtData,v=h.myFriendsValue,g=h.axios_request,N=Object(o.a)(v,2),_=N[0],S=N[1],C=Object(n.useState)(!1),y=Object(o.a)(C,2),w=y[0],D=y[1];return Object(n.useEffect)((function(){-1!==_.findIndex((function(e){return e.username===t.username}))&&(c[s]=!0,r(c)),D(!w)}),[]),Object(a.jsxs)("div",{className:"UserFriendCard",children:[O&&Object(a.jsx)("div",{className:"error",children:O}),!O&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"profile-picture",children:Object(k.a)(t.fname[0].toLowerCase())}),Object(a.jsxs)("div",{className:"name-container",children:[Object(a.jsx)(d.b,{to:{pathname:"/user/".concat(t.username,"/posts"),state:{userid:t._id,fname:t.fname,lname:t.lname,username:t.username}},children:Object(a.jsxs)("div",{className:"name",children:[Object(a.jsxs)("span",{children:[t.fname," "]}),Object(a.jsx)("span",{children:t.lname})]})}),Object(a.jsx)("div",{className:"username",children:t.username})]}),x.sub!==t._id&&Object(a.jsxs)("div",{className:"add-btn",style:{color:"myfriends"==j||x.sub===i||c[s]?"red":"blue"},onClick:function(){c[s]=!c[s],r(c),D(!w),function(){var e="/friend/".concat(t._id);if(g({route:e,data:"",method:"POST",axios_error:function(e){e.response?f(e.response.data):f(e.message)},axios_response:function(e){}}),x.sub!=i&&"myfriends"!=j||(_.splice(s,1),S(_),u(!l)),x.sub!==i)if(0==c[s]){var a=_.findIndex((function(e){return e.username==t.username}));-1!==a&&(_.splice(a,1),S(_))}else _.push(t)}()},children:[(x.sub==i||"myfriends"===j)&&Object(a.jsx)("div",{className:"add-btn fas fa-user-minus"}),x.sub!==i&&"myfriends"!==j&&Object(a.jsx)("div",{className:c[s]?"add-btn fas fa-user-minus":"add-btn fas fa-user-plus"})]}),x.sub!==t._id&&Object(a.jsx)("div",{className:"chat-link-container",children:Object(a.jsx)(d.b,{to:{pathname:"/chat",state:{userid:t._id,fname:t.fname,lname:t.lname,username:t.username}},children:Object(a.jsx)("div",{className:"chat-btn fab fa-facebook-messenger"})})})]})]})}),K=function(e){var t,s,c,r=e.path,i=Object(n.useState)(""),d=Object(o.a)(i,2),u=d[0],j=d[1],b=Object(n.useState)(!0),m=Object(o.a)(b,2),O=m[0],f=m[1],h=Object(n.useState)([]),x=Object(o.a)(h,2),v=x[0],g=x[1],_=Object(n.useState)([]),S=Object(o.a)(_,2),C=S[0],y=S[1],k=Object(n.useState)(!1),w=Object(o.a)(k,2),D=w[0],E=w[1],F=Object(n.useContext)(p),P=F.myFriendsValue,I=F.didMyFriendsMountValue,L=F.axios_request,T=Object(o.a)(I,2),A=T[0],M=T[1],U=Object(o.a)(P,2),V=U[0],q=U[1],B=Object(l.h)();"myfriends"!==r&&(t=B.state.userid,s=B.state.fname,c=B.state.lname);var R=function(){var e;e="/friend/".concat("myfriends"==r?G.sub:t);L({route:e,data:"",method:"GET",axios_error:function(e){e.response?j(e.response.data):j(e.message),f(!1)},axios_response:function(e){if("myfriends"==r)q(e.data);else if(t==G.sub)q(e.data);else{var s=Array(e.data.length).fill(!1);y(s)}g(e.data),f(!1)}})},G=Object(n.useContext)(p).jwtData;return Object(n.useEffect)((function(){"myfriends"==r?A?(R(),M(!1)):(g(V),f(!1)):G.sub!==t?R():A?(R(),M(!1)):(g(V),f(!1))}),[B.pathname]),Object(a.jsxs)("div",{className:"myfriends"===r?"UserFriend":"UserFriend myaccount",children:[u&&Object(a.jsx)("div",{className:"error",children:u}),!u&&Object(a.jsxs)(a.Fragment,{children:[O&&Object(a.jsx)("div",{className:"loading-container",children:Object(a.jsx)("div",{className:"spinner-border loading",role:"status",children:Object(a.jsx)("span",{className:"sr-only"})})}),!O&&(0===v.length?Object(a.jsxs)("div",{className:"empty-friends",children:["myfriends"!==r&&G.sub!==t&&Object(a.jsxs)("div",{children:[Object(a.jsxs)("span",{children:[s," "]})," ",Object(a.jsxs)("span",{children:[c," "]}),Object(a.jsx)("span",{children:"has no friends on OdinBook :("})]}),("myfriends"===r||G.sub===t)&&Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{children:"You don't have any friends to show."}),Object(a.jsx)("div",{children:"You can add them by searching their name :)"}),Object(a.jsx)("div",{children:"To search with username, please prefix with '@' :)"})]})]}):v.map((function(e,s){return Object(a.jsx)(z,{value:e,index:s,setError:j,friendBtn:C,setFriendBtn:y,userid:t,isChanged:D,setIsChanged:E,path:r},N()())})))]})]})},Q=(s(64),function(){var e,t,s,c,r=Object(n.useContext)(p),i=r.axios_request,d=r.jwtData,u=r.myFriendsValue,j=r.didMyFriendsMountValue,b=Object(n.useState)(""),m=Object(o.a)(b,2),O=m[0],f=m[1],h=Object(o.a)(u,2),x=h[0],v=h[1],g=Object(o.a)(j,2),N=g[0],_=g[1],S=Object(n.useState)(!1),C=Object(o.a)(S,2),y=C[0],k=C[1],w=Object(n.useState)(!1),D=Object(o.a)(w,2),E=D[0],F=D[1],P=Object(l.h)();P.state&&(e=P.state.userid,s=P.state.fname,c=P.state.lname,t=P.state.username);Object(n.useEffect)((function(){N&&(!function(){var e="/friend/".concat(d.sub);i({route:e,data:"",method:"GET",axios_error:function(e){},axios_response:function(e){v(e.data)}})}(),_(!1))}),[]),Object(n.useEffect)((function(){var e=x.findIndex((function(e){return e.username===t}));F(-1!==e),k(!y)}),[x]);return Object(a.jsxs)("div",{className:"UserDetailFriendBtn",children:[O&&Object(a.jsx)("div",{className:"error",children:O}),!O&&Object(a.jsx)("div",{style:{color:E?"red":"blue"},className:E?"add-btn fas fa-user-minus":"add-btn fas fa-user-plus",onClick:function(a){a.preventDefault(),F(!E),k(!y),function(){var a="/friend/".concat(e);if(i({route:a,data:"",method:"POST",axios_error:function(e){e.response?f(e.response.data):f(e.message)},axios_response:function(e){}}),1==E){var n=x.findIndex((function(e){return e.username==t}));-1!==n&&(x.splice(n,1),v(x))}else x.push({_id:e,username:t,fname:s,lname:c});k(!y)}()}})]})}),X=function(){var e,t,s,c,r=Object(l.h)(),i=Object(l.i)(),o=Object(n.useContext)(p).jwtData;return r.state.userid&&(t=r.state.fname,s=r.state.lname,c=r.state.username,e=r.state.userid),Object(a.jsxs)("div",{className:"UserDetail",children:[Object(a.jsxs)("div",{className:"user-banner-container",children:[Object(a.jsxs)("div",{className:"user-banner",children:[i.username,Object(a.jsxs)("div",{className:"banner-btn",children:[e&&e!==o.sub&&Object(a.jsx)("div",{className:"chat-link-container",children:Object(a.jsx)(d.b,{to:{pathname:"/chat",state:{userid:e,fname:t,lname:s,username:c}},children:Object(a.jsx)("div",{className:"chat-btn fab fa-facebook-messenger"})})}),e&&e!==o.sub&&Object(a.jsx)(Q,{})]})]}),Object(a.jsx)("div",{className:"name-container",children:Object(a.jsxs)("div",{className:"name",children:[Object(a.jsxs)("span",{children:[r.state.fname," "]}),Object(a.jsxs)("span",{children:[" ",r.state.lname]})]})})]}),Object(a.jsxs)("div",{className:"UserNav",children:[Object(a.jsx)(E,{to:"/user/".concat(i.username,"/posts"),fname:r.state.fname,lname:r.state.lname,userid:r.state.userid,username:r.state.username,label:"Posts"}),Object(a.jsx)(E,{to:"/user/".concat(i.username,"/about"),fname:r.state.fname,lname:r.state.lname,userid:r.state.userid,username:r.state.username,label:"About"}),Object(a.jsx)(E,{to:"/user/".concat(i.username,"/friends"),fname:r.state.fname,lname:r.state.lname,userid:r.state.userid,username:r.state.username,label:"Friends"})]}),Object(a.jsxs)(l.d,{children:[Object(a.jsx)(l.b,{path:"/user/".concat(i.username,"/posts"),children:Object(a.jsx)(Y,{path:"userpost"})}),Object(a.jsx)(l.b,{path:"/user/".concat(i.username,"/about"),children:Object(a.jsx)(L,{})}),Object(a.jsx)(l.b,{path:"/user/".concat(i.username,"/friends"),children:Object(a.jsx)(K,{})})]})]})},Z=(s(143),function(){var e=Object(n.useContext)(p).jwtData;return Object(a.jsxs)("div",{className:"Hamburger",children:[Object(a.jsx)("div",{className:"box-1 box",children:Object(a.jsxs)(d.b,{to:{pathname:"/user/".concat(e.user,"/posts"),state:{fname:e.fname,lname:e.lname,username:e.user,userid:e.sub}},children:[Object(a.jsx)("div",{className:"profile-picture",children:Object(k.a)(e.fname[0].toLowerCase())}),Object(a.jsxs)("div",{className:"nav-link-container",children:[Object(a.jsx)("div",{className:"user label",children:e.user}),Object(a.jsx)("div",{className:"nav-link-desc label",children:"See your profile"})]})]})}),Object(a.jsx)("div",{className:"box-2 box",children:Object(a.jsx)(d.b,{to:"/logout",children:Object(a.jsx)("div",{className:"label",children:"Logout"})})})]})}),$=(s(144),s(145),function(e){var t,s,n,c=e.value;e.index;return""!==c.createdAt&&(s=(t=new Date(c.createdAt)).getFullYear().toString(),n=Object(k.a)(s)),Object(a.jsx)("div",{className:"ChatMap",children:""!==c.message&&Object(a.jsxs)("div",{className:1==c.isOwner?"me":"person",children:[Object(a.jsx)("div",{className:1==c.isOwner?"curve-right":"curve-left"}),Object(a.jsxs)("div",{className:1==c.isOwner?"right":"left",children:[Object(a.jsx)("div",{className:"message",children:c.message}),Object(a.jsxs)("div",{className:"date-container",children:[Object(a.jsxs)("div",{className:"date",children:[Object(a.jsxs)("span",{children:[t.getDate(),"/"]}),Object(a.jsxs)("span",{children:[t.getMonth()+1,"/"]}),Object(a.jsx)("span",{children:n[2]}),Object(a.jsx)("span",{children:n[3]})]}),Object(a.jsxs)("div",{className:"time",children:[Object(a.jsxs)("span",{children:[t.getHours()>12?t.getHours()-12:0===t.getHours()?12:t.getHours(),":"]}),Object(a.jsx)("span",{children:t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes()}),Object(a.jsx)("span",{children:t.getHours()>12?"pm":"am"})]})]})]})]})})}),ee=function(e){var t=e.fname,s=e.lname,c=e.userid,r=e.username,i=e.msgArr,l=e.setMsgArr,d=Object(n.useRef)(),u=Object(n.useState)(""),j=Object(o.a)(u,2),b=j[0],m=j[1],O=Object(n.useContext)(p),f=O.jwtData,h=O.socket,x=O.axios_request,v=O.myChatListValue,g=Object(o.a)(v,2),_=g[0],S=g[1];return Object(a.jsxs)("div",{className:"ChatCard",children:[b&&Object(a.jsx)("div",{className:"error",children:b}),!b&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"head-top",children:[Object(a.jsx)("div",{className:"profile-picture",children:Object(k.a)(t)[0].toLowerCase()}),Object(a.jsxs)("div",{className:"name",children:[Object(a.jsxs)("span",{children:[t," "]}),Object(a.jsx)("span",{children:s})]})]}),Object(a.jsx)("form",{children:Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("input",{type:"text",ref:d,name:"msg",id:"msg"}),Object(a.jsx)("div",{className:"send-btn",children:Object(a.jsx)("button",{onClick:function(e){e.preventDefault(),""!==d.current.value&&(function(){var e="/isreadfalse/".concat(c);x({route:e,data:"",method:"PUT",axios_response:function(e){},axios_error:function(e){e.response?m(e.response.data):m(e.message)}})}(),function(){var e="/mychat/".concat(f.sub,"/").concat(c);x({route:e,data:{last_msg:(new Date).toISOString()},method:"PUT",axios_error:function(e){e.response?m(e.response.data):m(e.message)},axios_response:function(e){}})}(),function(){var e="/mychat/".concat(c,"/").concat(f.sub);x({route:e,data:{last_msg:(new Date).toISOString()},method:"PUT",axios_error:function(e){e.response?m(e.response.data):m(e.message)},axios_response:function(e){}})}(),function(e){var t="/chat/".concat(c);x({route:t,data:e,method:"PUT",axios_error:function(e){e.response?m(e.response.data):m(e.message)},axios_response:function(e){}})}({message:d.current.value,createdAt:(new Date).toISOString()}),function(){l([].concat(Object(k.a)(i),[{message:d.current.value,createdAt:(new Date).toISOString(),isOwner:!0}])),h.emit("send_message",{to:r,from:{fname:f.fname,lname:f.lname,username:f.user,userid:f.sub},message:d.current.value,createdAt:(new Date).toISOString()});var e=_.findIndex((function(e){return e.user._id===c}));-1!==e?_[e].last_msg=(new Date).toISOString():_.push({last_msg:(new Date).toISOString(),user:{fname:t,lname:s,username:r,_id:c}});var a=_.sort((function(e,t){return t.last_msg<e.last_msg?-1:t.last_msg>e.last_msg?1:0}));S(a),d.current.value=""}())},children:"Send"})})]})}),Object(a.jsx)("div",{className:"chat-map-container",children:i.map((function(e,t){return Object(a.jsx)($,{value:e,index:t},N()())}))})]})]})},te=function(){var e=Object(l.h)(),t=Object(n.useState)(""),s=Object(o.a)(t,2),c=s[0],r=s[1],i=Object(n.useContext)(p),d=i.axios_request,u=i.jwtData,j=i.socket,O=i.isReadValue,f=e.state.fname,h=e.state.lname,x=e.state.userid,v=e.state.username,g=Object(n.useState)([]),N=Object(o.a)(g,2),_=N[0],S=N[1],C=Object(n.useState)([]),y=Object(o.a)(C,2),w=y[0],D=y[1],E=Object(n.useState)([]),P=Object(o.a)(E,2),I=P[0],L=P[1],T=Object(n.useState)(!0),A=Object(o.a)(T,2),M=A[0],U=A[1],V=Object(n.useState)(!0),q=Object(o.a)(V,2),B=q[0],R=q[1],G=Object(n.useState)([]),H=Object(o.a)(G,2),W=H[0],J=H[1],Y=Object(o.a)(O,2),z=Y[0],K=Y[1];Object(n.useEffect)((function(){j.on("new_msg",(function(e){S([].concat(Object(k.a)(_),[{message:e.message,createdAt:e.createdAt}]))}))}),[j]),Object(n.useEffect)((function(){0!==_.length&&L([].concat(Object(k.a)(I),Object(k.a)(_)))}),[_]),Object(n.useEffect)((function(){(function(){var e=Object(m.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([Q(),X()]);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()(),Z()}),[]);var Q=function(){var e="/chat/".concat(x,"/").concat(u.sub);d({route:e,data:"",method:"GET",axios_error:function(e){e.response?r(e.response.data):r(e.message)},axios_response:function(e){if(0!==e.data.length){var t=e.data.message_container.map((function(e){return Object(F.a)(Object(F.a)({},e),{},{isOwner:!0})}));D(t)}else D([{message:"",createdAt:""}]);R(!1)}})},X=function(){var e="/chat/".concat(u.sub,"/").concat(x);d({route:e,data:"",method:"GET",axios_error:function(e){e.response?r(e.response.data):r(e.message)},axios_response:function(e){0!==e.data.length?J(e.data.message_container):J([{message:"",createdAt:""}]),U(!1)}})};Object(n.useEffect)((function(){if(!M&&!B){var e=[].concat(Object(k.a)(w),Object(k.a)(W)).sort((function(e,t){return e.createdAt<t.createdAt?-1:e.createdAt>t.createdAt?1:0}));L(e)}}),[M,B]);var Z=function(){var e="/isreadtrue/".concat(x);if(d({route:e,data:"",method:"PUT",axios_error:function(e){c.response?r(e.response.data):r(e.message)},axios_response:function(e){}}),z.length>0){var t=z.findIndex((function(e){return e.user===x}));-1!==t&&(z[t].isread=[],z[t].isread.push(!0),K(z))}};return Object(n.useEffect)((function(){var e=document.querySelector(".Chat"),t=e.scrollHeight;e.scrollTo(0,t)}),[I]),Object(a.jsxs)("div",{className:"Chat",children:[c&&Object(a.jsx)("div",{className:"error",children:c}),!c&&Object(a.jsxs)(a.Fragment,{children:[M&&B&&Object(a.jsx)("div",{className:"loading-container",children:Object(a.jsx)("div",{className:"spinner-border loading",role:"status",children:Object(a.jsx)("span",{className:"sr-only"})})}),!M&&!B&&Object(a.jsx)(ee,{fname:f,lname:h,userid:x,username:v,msgArr:I,setMsgArr:L})]})]})},se=function(e){for(var t,s=e.value,n=(e.index,e.isRead),c=0;c<n.length;c++)if(n[c].user===s.user._id){if(1==n[c].isread[0])break;t=n[c].isread.length}var r=new Date(s.last_msg).getMinutes(),i=new Date(s.last_msg).getHours(),o=new Date(s.last_msg).getDate(),l=new Date(s.last_msg).getMonth()+1,u=new Date(s.last_msg).getFullYear(),j=Object(k.a)(u.toString());return Object(a.jsx)("div",{className:"ChatListCard",children:Object(a.jsxs)(d.b,{to:{pathname:"/chat",state:{userid:s.user._id,fname:s.user.fname,lname:s.user.lname,username:s.user.username}},children:[Object(a.jsx)("div",{className:"profile-picture",children:Object(k.a)(s.user.fname)[0].toLowerCase()}),Object(a.jsx)("div",{className:"name",children:Object(a.jsxs)("div",{children:[Object(a.jsxs)("span",{children:[s.user.fname," "]}),Object(a.jsxs)("span",{children:[s.user.lname," "]})]})}),Object(a.jsxs)("div",{className:"read-container",children:[Object(a.jsx)("div",{className:"read",children:Object(a.jsx)("div",{className:t?"show-read isread":"show-read",children:t||""})}),Object(a.jsxs)("div",{className:"date-container",children:[Object(a.jsxs)("div",{className:"date",children:[Object(a.jsxs)("span",{children:[o,"/"]}),Object(a.jsxs)("span",{children:[l,"/"]}),Object(a.jsx)("span",{children:j[2]}),Object(a.jsx)("span",{children:j[3]})]}),Object(a.jsxs)("div",{className:"time",children:[Object(a.jsxs)("span",{children:[i>12?i-12:0===i?12:i,":"]}),Object(a.jsx)("span",{children:r<10?"0"+r:r}),Object(a.jsx)("span",{children:i>12?"pm":"am"})]})]})]})]})})},ae=(s(146),function(){var e=Object(n.useContext)(p),t=e.axios_request,s=e.myChatListValue,c=e.didMyChatListMountValue,r=e.isReadValue,i=e.socket,l=Object(o.a)(r,2),d=l[0],u=l[1],j=Object(o.a)(s,2),b=j[0],m=j[1],O=Object(o.a)(c,2),f=O[0],h=O[1],x=Object(n.useState)(!0),v=Object(o.a)(x,2),g=v[0],_=v[1],S=Object(n.useState)(!0),C=Object(o.a)(S,2),y=C[0],w=C[1],D=Object(n.useState)([]),E=Object(o.a)(D,2),F=E[0],P=E[1],I=Object(n.useState)(!1),L=Object(o.a)(I,2),T=L[0],A=L[1],M=Object(n.useState)(""),U=Object(o.a)(M,2),V=U[0],q=U[1];return Object(n.useEffect)((function(){f?(t({route:"/mychat",data:"",method:"GET",axios_error:function(e){e.response?q(e.response.data):q(e.message)},axios_response:function(e){var t=e.data.received,s=e.data.sent;s.length>0&&t.forEach((function(e){var t=s.findIndex((function(t){return t.user._id===e.user._id}));-1!==t&&s.splice(t,1)}));var a=[].concat(Object(k.a)(t),Object(k.a)(s)).sort((function(e,t){return t.last_msg<e.last_msg?-1:t.last_msg>e.last_msg?1:0}));m(a),_(!1)}}),t({route:"/isread",data:"",method:"GET",axios_response:function(e){u(e.data.users),w(!1)},axios_error:function(e){e.response?q(e.response.data):q(e.message)}}),h(!1)):(w(!1),_(!1))}),[T]),Object(n.useEffect)((function(){i.on("new_msg",(function(e){P(e)}))}),[i]),Object(n.useEffect)((function(){if(0!==F.length){var e=d.findIndex((function(e){return e.user===F.from.userid}));-1!==e?(!0===d[e].isread[0]&&d[e].isread.splice(0,1),d[e].isread.push(!1)):d.push({user:F.from.userid,isread:[!1]}),u(d);var t=b.findIndex((function(e){return e.user._id===F.from.userid}));-1!==t?b[t].last_msg=(new Date).toISOString():b.push({last_msg:(new Date).toISOString(),user:{fname:F.from.fname,lname:F.from.lname,username:F.from.username,_id:F.from.userid}});var s=b.sort((function(e,t){return t.last_msg<e.last_msg?-1:t.last_msg>e.last_msg?1:0}));m(s),A(!T)}}),[F]),Object(a.jsxs)("div",{className:"ChatList",children:[V&&Object(a.jsx)("div",{className:"errorr",children:V}),!V&&Object(a.jsxs)(a.Fragment,{children:[g&&y&&Object(a.jsx)("div",{className:"loading-container",children:Object(a.jsx)("div",{className:"spinner-border loading",role:"status",children:Object(a.jsx)("span",{className:"sr-only"})})}),!g&&!y&&(0===b.length?Object(a.jsx)("div",{className:"empty-chatlist",children:"Please start a conversation with someone to see it here."}):b.map((function(e,t){return Object(a.jsx)(se,{value:e,index:t,isRead:d},N()())})))]})]})}),ne=function(){var e=Object(l.h)(),t=e.state&&e.state.background,s=Object(n.useState)(!1),c=Object(o.a)(s,2),r=c[0],i=c[1],d=Object(n.useContext)(p),j=d.isAuthValue,b=(d.jwtData,Object(o.a)(j,2)),m=b[0],O=(b[1],e.pathname);return Object(n.useEffect)((function(){window.addEventListener("click",(function(e){try{e.stopPropagation(),e.preventDefault();for(var t=e.target.classList,s=0;s<t.length;s++){var a=document.querySelector(".".concat(t[s]));if(null==a)return;var n=a.classList;"drop-btn"!==n[s].toString()&&null!==n[s]&&"ham-icon"!==n[s]&&"close-icon"!==n[s]&&i(!1),t=[]}t=[]}catch(c){console.log(c.message)}}))}),[]),Object(a.jsxs)("div",{className:"Home",children:[!m&&Object(a.jsx)("div",{className:"odin-book",children:"OdinBook"}),!m&&("/signup"===O?Object(a.jsx)(l.a,{to:"/signup"}):Object(a.jsx)(l.a,{to:"/login"})),m&&("/login"===O||"/signup"===O)&&Object(a.jsx)(l.a,{to:{pathname:"/",state:{from:O}}}),m&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"Navigation",children:[Object(a.jsx)(y,{}),Object(a.jsxs)("div",{className:"left-nav",children:[Object(a.jsx)(u,{to:"/",label:"fas fa-home"}),Object(a.jsx)(u,{to:"/friends",label:"fas fa-user-friends"}),Object(a.jsx)(u,{to:"/mychat",label:"fab fa-facebook-messenger"}),Object(a.jsx)("div",{style:{color:r?"red":""},className:"drop-btn ",onClick:function(e){e.stopPropagation(),i(!r)},children:r?Object(a.jsx)("div",{className:"close-icon fas fa-times-circle"}):Object(a.jsx)("div",{className:"ham-icon fa fa-caret-down"})})]})]}),r?Object(a.jsx)(Z,{}):""]}),Object(a.jsxs)(l.d,{location:t||e,children:[m&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(l.b,{exact:!0,path:"/",children:Object(a.jsx)(Y,{path:"newsfeed"})}),Object(a.jsx)(l.b,{exect:!0,path:"/user/:username",children:Object(a.jsx)(X,{})}),Object(a.jsx)(l.b,{path:"/search/:name",children:Object(a.jsx)(D,{})}),Object(a.jsx)(l.b,{path:"/logout",children:Object(a.jsx)(S,{})}),Object(a.jsx)(l.b,{exact:!0,path:"/friends",children:Object(a.jsx)(K,{path:"myfriends"})}),Object(a.jsx)(l.b,{path:"/chat",children:Object(a.jsx)(te,{})}),Object(a.jsx)(l.b,{path:"/mychat",children:Object(a.jsx)(ae,{})})]}),!m&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(l.b,{path:"/signup",children:Object(a.jsx)(C,{})}),Object(a.jsx)(l.b,{path:"/login",children:Object(a.jsx)(_,{})})]})]})]})};var ce=function(){return Object(a.jsx)("div",{className:"App",children:Object(a.jsx)(ne,{})})},re=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,148)).then((function(t){var s=t.getCLS,a=t.getFID,n=t.getFCP,c=t.getLCP,r=t.getTTFB;s(e),a(e),n(e),c(e),r(e)}))};i.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(v,{children:Object(a.jsx)(d.a,{children:Object(a.jsx)(ce,{})})})}),document.getElementById("root")),re()},63:function(e,t,s){},64:function(e,t,s){},73:function(e,t,s){},74:function(e,t,s){},75:function(e,t,s){}},[[147,1,2]]]);
//# sourceMappingURL=main.dec2672a.chunk.js.map